<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>GMAC Bring Up Work Flow | </title>
<meta name="description" content="1. Identifying the GMAC from the Schematic From the default DTS provided by the SDK, it can be seen that there are two GMACs, gmac0 and gmac1. 1.1 First, check the schematic from the hardware engineer, search for GMAC, and see if gmac1 or gmac0 is used. To determine this, one must look at the pins used in the schematic and compare them with the configuration of the gmac nodes in the DTS.">
<meta property="og:url" content="https://potterwhite.github.io/en/blog/2025/07/25/gmac-bring-up-work-flow/">
  <meta property="og:title" content="GMAC Bring Up Work Flow">
  <meta property="og:description" content="1. Identifying the GMAC from the Schematic From the default DTS provided by the SDK, it can be seen that there are two GMACs, gmac0 and gmac1. 1.1 First, check the schematic from the hardware engineer, search for GMAC, and see if gmac1 or gmac0 is used. To determine this, one must look at the pins used in the schematic and compare them with the configuration of the gmac nodes in the DTS.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2025-07-25T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-07-25T00:00:00+00:00">

  <meta itemprop="name" content="GMAC Bring Up Work Flow">
  <meta itemprop="description" content="1. Identifying the GMAC from the Schematic From the default DTS provided by the SDK, it can be seen that there are two GMACs, gmac0 and gmac1. 1.1 First, check the schematic from the hardware engineer, search for GMAC, and see if gmac1 or gmac0 is used. To determine this, one must look at the pins used in the schematic and compare them with the configuration of the gmac nodes in the DTS.">
  <meta itemprop="datePublished" content="2025-07-25T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-07-25T00:00:00+00:00">
  <meta itemprop="wordCount" content="790">
  <meta itemprop="keywords" content="Blog,Linux">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="GMAC Bring Up Work Flow">
  <meta name="twitter:description" content="1. Identifying the GMAC from the Schematic From the default DTS provided by the SDK, it can be seen that there are two GMACs, gmac0 and gmac1. 1.1 First, check the schematic from the hardware engineer, search for GMAC, and see if gmac1 or gmac0 is used. To determine this, one must look at the pins used in the schematic and compare them with the configuration of the gmac nodes in the DTS.">
<link rel="preload" href="/scss/main.min.8d9fc392f483ddcfc12deab0c7339579a28bf9668f42018b93887d57cf8a63f4.css" as="style" integrity="sha256-jZ/DkvSD3c/BLeqwxzOVeaKL&#43;WaPQgGLk4h9V8&#43;KY/Q=" crossorigin="anonymous">
<link href="/scss/main.min.8d9fc392f483ddcfc12deab0c7339579a28bf9668f42018b93887d57cf8a63f4.css" rel="stylesheet" integrity="sha256-jZ/DkvSD3c/BLeqwxzOVeaKL&#43;WaPQgGLk4h9V8&#43;KY/Q=" crossorigin="anonymous">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>

  </head>
  <body class="td-page td-blog">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/en/"><span class="navbar-brand__logo navbar-logo"><svg width="30" height="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="100%" height="100%" fill="none"/><text x="50%" y="50%" font-family="Times New Roman" font-weight="bold" font-size="80" text-anchor="middle" fill="#fff" dy=".35em">J</text></svg></span><span class="navbar-brand__name"></span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/en/about/"><span>About</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/en/blog/"><span>Blog</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/en/portfolio/"><span>Portfolio</span></a>
      </li>
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/blog/2025/07/25/gmac-bring-up-work-flow/">简体中文</a></li>
    </ul>
</div></li>
      <li class="td-light-dark-menu nav-item dropdown">
        <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="check2" viewBox="0 0 16 16">
    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
  </symbol>
  <symbol id="circle-half" viewBox="0 0 16 16">
    <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
  </symbol>
  <symbol id="moon-stars-fill" viewBox="0 0 16 16">
    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
    <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
  </symbol>
  <symbol id="sun-fill" viewBox="0 0 16 16">
    <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
  </symbol>
</svg>

<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center"
        id="bd-theme"
        type="button"
        aria-expanded="false"
        data-bs-toggle="dropdown"
        data-bs-display="static"
        aria-label="Toggle theme (auto)">
  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg>
</button>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#sun-fill"></use></svg>
      Light
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"></use></svg>
      Dark
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
      <svg class="bi me-2 opacity-50"><use href="#circle-half"></use></svg>
      Auto
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
</ul>

      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.ce2d1b0f8608f8a602699e57202ea1d8.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.ce2d1b0f8608f8a602699e57202ea1d8.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none">
      <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/blog/2025/07/25/gmac-bring-up-work-flow/">简体中文</a></li>
    </ul>
</div>
    </div>
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-enblog-li">
  <a href="/en/blog/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-enblog"><span class="">Blog</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-enbloglinux-li">
  <a href="/en/blog/linux/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-enbloglinux"><span class="">Linux</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-enblog20250725gmac-bring-up-work-flow-li">
  <a href="/en/blog/2025/07/25/gmac-bring-up-work-flow/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-enblog20250725gmac-bring-up-work-flow"><span class="td-sidebar-nav-active-item">GMAC Bring Up Work Flow</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-enblog20250725gmac-bring-up-debug-strategies-li">
  <a href="/en/blog/2025/07/25/gmac-bring-up-debug-strategies/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-enblog20250725gmac-bring-up-debug-strategies"><span class="">GMAC Bring-Up Debug Strategies</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/potterwhite/blog-source/tree/main/content_root/content/en/blog/Linux/gmac-bringup-workflow.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/potterwhite/blog-source/edit/main/content_root/content/en/blog/Linux/gmac-bringup-workflow.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/potterwhite/blog-source/new/main/content_root/content/en/blog/Linux?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/potterwhite/blog-source/issues/new?title=GMAC%20Bring%20Up%20Work%20Flow" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/potterwhite/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  <a id="print" href="/en/blog/linux/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#1-identifying-the-gmac-from-the-schematic">1. Identifying the GMAC from the Schematic</a>
      <ul>
        <li><a href="#11-first-check-the-schematic-from-the-hardware-engineer-search-for-gmac-and-see-if-gmac1-or-gmac0-is-used">1.1 First, check the schematic from the hardware engineer, search for GMAC, and see if gmac1 or gmac0 is used.</a></li>
        <li><a href="#12-actually-why-can-the-hardware-side-correspond-to-the-dts">1.2 Actually, why can the hardware side correspond to the DTS?</a></li>
        <li><a href="#13-to-summarize">1.3 To summarize:</a></li>
      </ul>
    </li>
    <li><a href="#2-determining-the-clock-mode-from-the-schematic-and-the-flow-of-25m-and-125m-clocks">2. Determining the Clock Mode from the Schematic, and the flow of 25M and 125M clocks</a>
      <ul>
        <li><a href="#21-first-look-at-the-phy-section-of-the-schematic"><strong>2.1 First, look at the PHY section of the schematic</strong></a></li>
        <li><a href="#22-look-at-the-phy"><strong>2.2 Look at the PHY&rsquo;s DataSheet</strong></a></li>
      </ul>
    </li>
    <li><a href="#3-enter-the-dts-directory-find-the-entry-dts-disable-redundant-devices-and-enable-the-target-device">3. Enter the dts directory, find the entry dts, disable redundant devices, and enable the target device</a></li>
    <li><a href="#4-open-rockchip_developer_guide_linux_gmac_mode_configuration_cnpdf">4. Open Rockchip_Developer_Guide_Linux_GMAC_Mode_Configuration_CN.pdf</a></li>
    <li><a href="#5-summary">5. Summary</a></li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-categories">
      <h5 class="taxonomy-title">Categories</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://potterwhite.github.io/en/categories/blog/" data-taxonomy-term="blog"><span class="taxonomy-label">Blog</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://potterwhite.github.io/en/categories/linux/" data-taxonomy-term="linux"><span class="taxonomy-label">Linux</span><span class="taxonomy-count">2</span></a></li>
        </ul>
    </div>
  
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role="main">
            <a class="td-rss-button" title="RSS" href="/en/blog/linux/index.xml" target="_blank" rel="noopener">
              <i class="fa-solid fa-rss" aria-hidden="true"></i>
            </a>
            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/en/blog/">Blog</a></li>
  <li class="breadcrumb-item">
    <a href="/en/blog/linux/">Linux</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    GMAC Bring Up Work Flow</li>
  </ol>
</nav>
<div class="td-content">
	<h1>GMAC Bring Up Work Flow</h1>
	
	<div class="td-byline mb-4">
		
		<time datetime="2025-07-25" class="text-body-secondary">Jul 25, 2025</time>
	</div>
	<header class="article-meta">
		<div class="taxonomy taxonomy-terms-article taxo-categories">
  <h5 class="taxonomy-title">Categories:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://potterwhite.github.io/en/categories/blog/" data-taxonomy-term="blog"><span class="taxonomy-label">Blog</span></a></li>
    <li><a class="taxonomy-term" href="https://potterwhite.github.io/en/categories/linux/" data-taxonomy-term="linux"><span class="taxonomy-label">Linux</span></a></li>
    </ul>
</div>

  <p class="reading-time"><i class="fa-solid fa-clock" aria-hidden="true"></i>&nbsp; 4 minute read &nbsp;</p>
</header>
	<h2 id="1-identifying-the-gmac-from-the-schematic">1. Identifying the GMAC from the Schematic</h2>
<ul>
<li>From the default DTS provided by the SDK, it can be seen that there are two GMACs, gmac0 and gmac1.</li>
</ul>
<h3 id="11-first-check-the-schematic-from-the-hardware-engineer-search-for-gmac-and-see-if-gmac1-or-gmac0-is-used">1.1 First, check the schematic from the hardware engineer, search for GMAC, and see if gmac1 or gmac0 is used.</h3>
<p>To determine this, one must look at the pins used in the schematic and compare them with the configuration of the gmac nodes in the DTS.</p>
<p>The specific file is located at <code>kernel/arch/arm64/boot/dts/rockchip/rk3568-pinctrl.dtsi</code>.</p>
<p>During the BSP creation process (the previous step), a layered structure was established, and this dtsi file belongs to the lowest chip-level layer.
This file defines the specific sub-nodes of gmac1, and which pins correspond to each sub-node, for example:</p>
<p><img src="/2025/gmac-rk3568-bring-up/dts-gmac1m1_miim.png" alt=""></p>
<p>When it comes to gmac1, it is further divided into m0 and m1. The image I have captured is the m1 portion. How do we know to use m1?
We can refer to the CPU section of the schematic:</p>
<p><img src="/2025/gmac-rk3568-bring-up/rk3568-gmac-pins-top-view.png" alt=""></p>
<p>I have specifically captured the gmac module used this time. The hardware engineer has added &ldquo;M1&rdquo; after each pin name, which also reminds us that the one being used is GMAC1&rsquo;s M1.</p>
<h3 id="12-actually-why-can-the-hardware-side-correspond-to-the-dts">1.2 Actually, why can the hardware side correspond to the DTS?</h3>
<p>It is likely because when the hardware engineer was designing the schematic, they directly referenced the usage guidelines provided by the Chip Manufacturer. It&rsquo;s divided into GMAC1 and GMAC0, and GMAC1 is further divided into M0 and M1. I would guess that if we insisted on modifying it, using a hybrid version like a GMAC2 wouldn&rsquo;t be entirely impossible, but the DTS side would have to be completely redone. We would have to write out each pin one by one, just as it&rsquo;s done in <code>kernel/arch/arm64/boot/dts/rockchip/rk3568-pinctrl.dtsi</code>.</p>
<h3 id="13-to-summarize">1.3 To summarize:</h3>
<p>Looking at the symbols in the schematic is just a tip and not definitive.
The definitive way is to compare the pins configs in the chip-level dts include file. They must correspond.</p>
<h2 id="2-determining-the-clock-mode-from-the-schematic-and-the-flow-of-25m-and-125m-clocks">2. Determining the Clock Mode from the Schematic, and the flow of 25M and 125M clocks</h2>
<h3 id="21-first-look-at-the-phy-section-of-the-schematic"><strong>2.1 First, look at the PHY section of the schematic</strong></h3>
<p><img src="/2025/gmac-rk3568-bring-up/yt8521sc-clock-related-three-pins.png" alt=""></p>
<p>Here we can see that XTAL_I is grounded, and we don&rsquo;t yet know where XTAL_O and CLKOUT are connected.</p>
<h3 id="22-look-at-the-phy"><strong>2.2 Look at the PHY&rsquo;s DataSheet</strong></h3>
<p><img src="/2025/gmac-rk3568-bring-up/yt8521sc-clock-pins-in-datasheet.png" alt=""></p>
<h4 id="221-first-look-at-no44">2.2.1 First, look at No.44</h4>
<p>It is specifically written here that CLKOUT is an output type, and if it&rsquo;s not needed to output a clock to the MAC, this pin should be left floating.</p>
<p>However, it is not floating here, so the schematic must be outputting a 125MHz clock to the MAC.</p>
<h4 id="222-next-look-at-no45">2.2.2 Next, look at No.45</h4>
<p>It is introduced here that if XTAL_O is supplied with an external 25MHz clock, then XTAL_I must be grounded.
So, from the schematic showing XTAL_I is grounded, it should mean an external 25MHz is being supplied to the PHY.</p>
<p>Therefore, we just need to further trace which pins are actually connected.</p>
<h2 id="3-enter-the-dts-directory-find-the-entry-dts-disable-redundant-devices-and-enable-the-target-device">3. Enter the dts directory, find the entry dts, disable redundant devices, and enable the target device</h2>
<p>Because GMAC1M1 is used on my board, GMAC0 can be disabled.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/*
</span></span><span style="display:flex;"><span>* 2nd: Configure the active GMAC0 interface.
</span></span><span style="display:flex;"><span>*
</span></span><span style="display:flex;"><span>* NOTE:   The properties below are overrides <span style="color:#204a87;font-weight:bold">for</span> the <span style="color:#000;font-weight:bold">&amp;</span>gmac0 node,
</span></span><span style="display:flex;"><span>*         which inherits its base configuration from <span style="color:#4e9a06">&#34;rk3568-evb1-ddr4-v10.dtsi&#34;</span>.
</span></span><span style="display:flex;"><span>*
</span></span><span style="display:flex;"><span>* ACTION: Review these settings against your schematic.
</span></span><span style="display:flex;"><span>*/
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&amp;</span>gmac0 <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>	// there is more ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	//status <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;okay&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;disabled&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&amp;</span>mdio0 <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;disabled&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>	// there is more ...
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span><span style="color:#000;font-weight:bold">;</span>
</span></span></code></pre></div><p>My initial judgment was not to use gmac0, so I did a lot of debugging, and only at the very end did I change them all to <code>status = &quot;disabled&quot;</code>;</p>
<h2 id="4-open-rockchip_developer_guide_linux_gmac_mode_configuration_cnpdf">4. Open Rockchip_Developer_Guide_Linux_GMAC_Mode_Configuration_CN.pdf</h2>
<p>Based on the determined clock mode, directly copy the node configuration. Do not modify other dtsi files (they are just libraries).</p>
<p>Open this manual provided by Rockchip:
<img src="/2025/gmac-rk3568-bring-up/mode-config-rk3568-part.png" alt=""></p>
<p>There are so many modes here. SGMII, which stands for Serial Gigabit Media Independent Interface, is used for bridging, so SGMII and QSGMII are not within my scope of concern.</p>
<p>RMII Clock Input and Output also don&rsquo;t seem to apply to the current board&rsquo;s situation, because I have two clock speeds, 25MHz and 125MHz, so I&rsquo;ll look at the other four modes first.</p>
<p>Here, I referenced an article by an engineer named Baron:</p>
<p><img src="/2025/gmac-rk3568-bring-up/phy-clk-mode-from-baron.png" alt=""></p>
<p><a href="https://baron-z.cn/2023/05/25/rk3566%E4%BB%A5%E5%A4%AA%E7%BD%91%E8%B0%83%E8%AF%95/" target="_blank" rel="noopener">Reference Link: A very good article</a></p>
<p>Following this summary, we should now choose <strong>RGMII PLL output 25M for PHY, RGMII_CLK input 125M for TX_CLK</strong>.</p>
<h2 id="5-summary">5. Summary</h2>
<ul>
<li>
<p>The above is just the normal porting process. During bring-up, it is very likely that the hardware is not okay. So, after confirming the correct porting process, you can confidently proceed to find bugs in the hardware.</p>
</li>
<li>
<p>Regarding the debugging mindset, my personal notes are organized here to provide a starting point for thinking: <a href="/en/blog/2025/07/25/gmac-bring-up-debug-strategies">GMAC Bring-Up Debug Strategies</a></p>
</li>
</ul>

	<ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5">
  <li>
    <a href="/en/blog/2025/07/25/gmac-bring-up-debug-strategies/" aria-label="Previous - GMAC Bring-Up Debug Strategies" class="btn btn-primary"><span class="me-1">←</span>Previous</a>
  </li>
  <li>
    <a class="btn btn-primary disabled">Next<span class="ms-1">→</span></a>
  </li>
</ul>

	</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="X" aria-label="X">
    <a target="_blank" rel="noopener" href="https://x.com/potter_whi3340" aria-label="X">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Hugging Face" aria-label="Hugging Face">
    <a target="_blank" rel="noopener" href="https://huggingface.co/PotterWhite" aria-label="Hugging Face">
      <i class="fab fa-hugging-face"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/potterwhite" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Slack" aria-label="Slack">
    <a target="_blank" rel="noopener" href="https://zadoktec.slack.com" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024&ndash;2025
    <span class="td-footer__authors">Potter White | <a href="https://creativecommons.org/licenses/by/4.0" target="_blank" rel="noopener">CC BY 4.0</a> |</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.c7cf76e0360e19b696291ec124be8f05e7d46230f8031e081350143806af8320.js" integrity="sha256-x8924DYOGbaWKR7BJL6PBefUYjD4Ax4IE1AUOAavgyA=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>