<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>CMake on 嵌入式系统爱好者</title><link>https://potterwhite.github.io/categories/cmake/</link><description>Recent content in CMake on 嵌入式系统爱好者</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Thu, 18 Jul 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://potterwhite.github.io/categories/cmake/index.xml" rel="self" type="application/rss+xml"/><item><title>CMake Key Points in Qt6</title><link>https://potterwhite.github.io/blog/2024/07/18/cmake-key-points-in-qt6/</link><pubDate>Thu, 18 Jul 2024 00:00:00 +0000</pubDate><guid>https://potterwhite.github.io/blog/2024/07/18/cmake-key-points-in-qt6/</guid><description>&lt;details>
 &lt;summary>&lt;strong>
 001. &lt;/br>find_package(QT NAMES Qt6 Qt5 REQUIRED COMPONENTS Core Widgets)&lt;/br>
 find_package(Qt${QT_VERSION_MAJOR} REQUIRED COMPONENTS Core Widgets) Usages&lt;strong>&lt;/summary>
&lt;div style="padding-left: 2em;">
&lt;p>&lt;code>find_package(QT NAMES Qt6 Qt5 REQUIRED COMPONENTS Core)&lt;/code>：&lt;/p>
&lt;p>这行代码试图找到名为 Qt6 或 Qt5 的 Qt 版本，并且要求找到其中的 Core 组件。
如果系统上安装了 Qt6，这行代码会找到 Qt6；如果没有找到 Qt6，会尝试找到 Qt5。&lt;/p>
&lt;p>&lt;code>find_package(Qt${QT_VERSION_MAJOR} REQUIRED COMPONENTS Core)&lt;/code>：&lt;/p>
&lt;p>这行代码利用第一个 find_package 结果中设置的 QT_VERSION_MAJOR 变量来找到具体的 Qt 版本及其 Core 组件。&lt;/p>
&lt;/div>
&lt;/details>
&lt;h4 id="cmake_minimum_requiredversion-314">&lt;code>cmake_minimum_required(VERSION 3.14)&lt;/code>&lt;/h4>
&lt;h4 id="projectlibdiytoolswrapper-languages-cxx">&lt;code>project(LibDiyToolsWrapper LANGUAGES CXX)&lt;/code>&lt;/h4>
&lt;h4 id="setcmake_autouic-on">&lt;code>set(CMAKE_AUTOUIC ON)&lt;/code>&lt;/h4>
&lt;h4 id="setcmake_cxx_standard-17">&lt;code>set(CMAKE_CXX_STANDARD 17)&lt;/code>&lt;/h4>
&lt;h4 id="setcmake_cxx_standard_required-on">&lt;code>set(CMAKE_CXX_STANDARD_REQUIRED ON)&lt;/code>&lt;/h4>
&lt;h4 id="add_library-libdiytoolswrapper-shared--libdiytoolswrapper_globalh--">&lt;code>add_library( LibDiyToolsWrapper SHARED LibDiyToolsWrapper_global.h )&lt;/code>&lt;/h4>
&lt;h4 id="include_directories--inc-">&lt;code>include_directories( .. ../inc )&lt;/code>&lt;/h4>
&lt;h4 id="target_link_libraries-libdiytoolswrapper-private-qtqt_version_majorwidgets-">&lt;code>target_link_libraries( LibDiyToolsWrapper PRIVATE Qt${QT_VERSION_MAJOR}::Widgets )&lt;/code>&lt;/h4>
&lt;h4 id="target_compile_definitionslibdiytoolswrapper-private-libdiytoolswrapper_library">&lt;code>target_compile_definitions(LibDiyToolsWrapper PRIVATE LIBDIYTOOLSWRAPPER_LIBRARY)&lt;/code>&lt;/h4>
&lt;h2 id="set-destination_dir-ifconfigdebugcmake_binary_dirfinaldllsdebug-嵌套">&lt;code>set( DESTINATION_DIR $&amp;lt;IF:$&amp;lt;CONFIG:Debug&amp;gt;,${CMAKE_BINARY_DIR}/finalDLLs/Debug,) 嵌套&lt;/code>&lt;/h2>
&lt;div style="padding-left: 2em;">
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmake" data-lang="cmake">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87">set&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">DESTINATION_DIR&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">$&amp;lt;&lt;/span>&lt;span style="color:#000">IF:$&amp;lt;CONFIG:Debug&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#4e9a06">,&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">${&lt;/span>&lt;span style="color:#000">CMAKE_BINARY_DIR&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>&lt;span style="color:#4e9a06">/finalDLLs/Debug,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">DESTINATION_DIR&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">$&amp;lt;&lt;/span>&lt;span style="color:#000">IF:$&amp;lt;CONFIG:Debug&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#4e9a06">,&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">${&lt;/span>&lt;span style="color:#000">CMAKE_BINARY_DIR&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>&lt;span style="color:#4e9a06">/finalDLLs/Release,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">DESTINATION_DIR&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">$&amp;lt;&lt;/span>&lt;span style="color:#000">IF:$&amp;lt;CONFIG:Debug&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#4e9a06">,&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">${&lt;/span>&lt;span style="color:#000">CMAKE_BINARY_DIR&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>&lt;span style="color:#4e9a06">/finalDLLs/Profile,&lt;/span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ce5c00;font-weight:bold">${&lt;/span>&lt;span style="color:#000">CMAKE_BINARY_DIR&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>&lt;span style="color:#4e9a06">/Unknown&amp;gt;&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmake" data-lang="cmake">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">$&amp;lt;IF:&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 第一层开始
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#a40000">$&amp;lt;CONFIG:Debug&amp;gt;,${CMAKE_BINARY_DIR}/Debug,&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 第一层条件和结果
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#a40000">$&amp;lt;IF:&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 第二层开始
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#a40000">$&amp;lt;CONFIG:Release&amp;gt;,${CMAKE_BINARY_DIR}/Release,&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 第二层条件和结果
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#a40000">$&amp;lt;IF:&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 第三层开始
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#a40000">$&amp;lt;CONFIG:Profile&amp;gt;,${CMAKE_BINARY_DIR}/Profile,&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 第三层条件和结果
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#a40000">${CMAKE_BINARY_DIR}/Unknown&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 默认值
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#a40000">&amp;gt;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 第三层结束
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span> &lt;span style="color:#a40000">&amp;gt;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 第二层结束
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#a40000">&amp;gt;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># 第一层结束
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div></description></item></channel></rss>