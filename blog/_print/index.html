<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://potterwhite.github.io/blog/><link rel=alternate type=application/rss+xml href=https://potterwhite.github.io/blog/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>博客文章 | </title><meta name=description content><meta property="og:url" content="https://potterwhite.github.io/blog/"><meta property="og:title" content="博客文章"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="website"><meta itemprop=name content="博客文章"><meta itemprop=datePublished content="2025-07-29T00:00:00+00:00"><meta itemprop=dateModified content="2025-07-29T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="博客文章"><link rel=preload href=/scss/main.min.8d9fc392f483ddcfc12deab0c7339579a28bf9668f42018b93887d57cf8a63f4.css as=style integrity="sha256-jZ/DkvSD3c/BLeqwxzOVeaKL+WaPQgGLk4h9V8+KY/Q=" crossorigin=anonymous><link href=/scss/main.min.8d9fc392f483ddcfc12deab0c7339579a28bf9668f42018b93887d57cf8a63f4.css rel=stylesheet integrity="sha256-jZ/DkvSD3c/BLeqwxzOVeaKL+WaPQgGLk4h9V8+KY/Q=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css></head><body class="td-section td-blog"><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg width="30" height="1" viewBox="0 0 100 100"><rect width="100%" height="100%" fill="none"/><text x="50%" y="50%" font-family="Times New Roman" font-weight="bold" font-size="80" text-anchor="middle" fill="#fff" dy=".35em">J</text></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about/><span>关于</span></a></li><li class=nav-item><a class=nav-link href=/blog/><span>博客</span></a></li><li class=nav-item><a class=nav-link href=/portfolio/><span>我的作品</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>简体中文</a><ul class=dropdown-menu><li><a class=dropdown-item href=/en/blog/>English</a></li></ul></div></li><li class="td-light-dark-menu nav-item dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme (auto)"><svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=bd-theme-text><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder=站内搜索… aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.c70ade2f812ca2773e2c1c4a9cb99a28.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/blog/>返回本页常规视图</a>.</p></div><h1 class=title>博客文章</h1><ul><li><a href=#pg-2f127a5fd5d468c5eb86266daad62359>000_Grp_Collection</a></li><ul><li><a href=#pg-1dd599fe13d18753bd7aeb49da0a34b8>celebrity quotes</a></li><li><a href=#pg-1cad4fe27a93cf79ee04fc118800f0e8>Reading List</a></li></ul><li><a href=#pg-43788e033bd545562c0fc053b8c79a3b>002_Grp_HugoDocsy</a></li><ul><li><a href=#pg-729590ae559a675d7c26a76baa5cb942>Docsy 设置教程</a></li><li><a href=#pg-75fcd2944b879dcf7eda743b34bd537e>Docsy`s Interesting Tricks</a></li><li><a href=#pg-1e267fd76ccbbfa541d293d05506d372>Docsy主题的设置技巧</a></li></ul><li><a href=#pg-d9064da9a31b2507c70cc07b8b8053c8>003_Grp_ERP</a></li><ul><li><a href=#pg-175b68ce61a4576347995b42322c31a9>003_001_Grp_ERPNext</a></li><ul><li><a href=#pg-78e0794667a90364d4d53ab6b241a48b>与ERPNext的初次见面</a></li></ul></ul><li><a href=#pg-2296f0b9e92e9ca1ededd12dca4664d0>004_Grp_AI</a></li><ul><li><a href=#pg-ee3a471e85eecb11b85c3bb0c0f8b147>004_001_Grp_TTI</a></li><ul><li><a href=#pg-4b6d62a5294b24da3340bc4c4f2b10e7>初体验-stable diffusion</a></li><li><a href=#pg-6be463e23b8efec9938e7dfb13d0f373>选择文生图工具之路</a></li></ul><li><a href=#pg-cd68161f0e991eaccf10a25a0d190c4c>004_010_Grp_ESP32</a></li><ul></ul><li><a href=#pg-1499ff69b052c9e5aaa6c92f8e495717>ChatGPT</a></li></ul><li><a href=#pg-5a6fdbeef0fe89b66429f606fd501ffc>005_Grp_Tools</a></li><ul><li><a href=#pg-02c62d6f18bd9d10b96de85fbc51b5f1>005_001_Grp_VSCode</a></li><ul><li><a href=#pg-91861bb406795d359f38d14dd15a44ec>VSCode使用技巧</a></li></ul><li><a href=#pg-13b61fc80e0e1f82565712fb4d68732a>005_002_Grp_Mermaid</a></li><ul><li><a href=#pg-591916c0250e708137178f5f6ab4e225>Mermaid使用技巧</a></li></ul><li><a href=#pg-105e49fe3e617dd43df432c820b4c853>005_003_Grp_Markdown</a></li><ul><li><a href=#pg-647c6c0cb1d84553bc784d7939287457>Markdown使用技巧</a></li></ul><li><a href=#pg-1731944405ae14ffc155b48875593724>Time Zone Map</a></li></ul><li><a href=#pg-1f5e41c2a6e8da01fe68a0105f93761f>DevOps</a></li><ul><li><a href=#pg-24bca13ef08aff7367527ad565e07f5a>Ubuntu</a></li><ul><li><a href=#pg-56b418746454a34b9183df21a6be107c>Grub Setting</a></li></ul><li><a href=#pg-30fa633388e6692299f8b65f420a392e>Docker</a></li><ul><li><a href=#pg-6bf0f8307b827e76126deab3e06238d8>Docker使用</a></li></ul><li><a href=#pg-623e7f449e7aabdc71b88b6a227f5349>NFS(Net File System)</a></li><li><a href=#pg-73335b52801880d4ba79e3b3a43f291d>DevOps Definition</a></li></ul><li><a href=#pg-f4ac30641eb1e1b39472568df4b9bdbf>007_Grp_Quantum</a></li><ul><li><a href=#pg-4460a55fd3386afe69049cae20d1009b>Quantum</a></li></ul><li><a href=#pg-0856e343750cb09f85d1ca37f55d4fc4>008_Grp_Compiler_Linker</a></li><ul><li><a href=#pg-f38716843109fdbfba0dcc3c87688a3e>QtCreator下的MinGW和MSVC编译器</a></li></ul><li><a href=#pg-dab315c357b662cfb6579928147c649b>Linux</a></li><ul><li><a href=#pg-3c26aa984b30a1889c260accbceee96f>GMAC Bring Up Work Flow</a></li><li><a href=#pg-7b330209886be5de1eac30147d864443>GMAC Bring-Up Debug Strategies</a></li></ul><li><a href=#pg-1fe142e6ca7e208bad2dc22b5b234234>011_Grp_Windows</a></li><ul><li><a href=#pg-0fc815991af709e0d45b6ac0f2e0a676>IMMNotificationClient Callback Problem</a></li><li><a href=#pg-4b40b8f3a9fde137d7b53e3793fc482c>ASIO</a></li><li><a href=#pg-5637ca4afd986b1e0d9ae4793487f985>声卡项目</a></li></ul><li><a href=#pg-6533cdf711861891373657621c2bfba2>012_Grp_WebDevelopment</a></li><ul><li><a href=#pg-e289a02d1c759a7ed93bddc4a1eff40e>012_001_Grp_HTML+CSS+JAVASCRIPT</a></li><ul><li><a href=#pg-d170e1475e51b30f30182867ceb4bc16>html tricks</a></li></ul></ul><li><a href=#pg-aee71633b22472bd41c2206f788801b2>013_Grp_QtDevelopment</a></li><ul><li><a href=#pg-40f88ca10d40b511b5f9d5e78c3d1aca>013_001_Grp_QtDevelopment</a></li><ul><li><a href=#pg-5dce2128da9b609f1b4100af9b2e553c>CMake Key Points in Qt6</a></li></ul><li><a href=#pg-e00a1275a9ba43f29db6e2ef8531e2ad>013_002_Grp_QML</a></li><ul><li><a href=#pg-e5af19215d3827a953a9889366fcf185>QML downgrade from 6 to 5</a></li><li><a href=#pg-9efb5dc7a1b85e02cdbf88d9d17f7ef8>QML Poor Performance In different Qt SDK</a></li><li><a href=#pg-4c5d5f3d14b9544d1c72991e13b31cd5>QtQuick工程里的main函数解析</a></li><li><a href=#pg-ff55b258a9ddd7b3bc0daa01474d90d0>QML的Menu容器</a></li><li><a href=#pg-49d36b1405734a6bc5756f2bf5a35d44>qml notes</a></li><li><a href=#pg-f496d77e14cb6b42d6c47eb2588f6967>QML Options</a></li><li><a href=#pg-6d64a40926b8626398b8b59604338f3a>QML工程里的content文件夹</a></li></ul><li><a href=#pg-f02d194b13b1a2d2656235da09824efc>Q_PROPERTY</a></li><li><a href=#pg-c9394ea69451a3716d73cb761bd5ae03>Qt Deployment</a></li></ul><li><a href=#pg-1dc8f6e4d54fbeeab427031d937c73c8>014_Grp_CPU</a></li><ul><li><a href=#pg-41ae5e79d72cfcb320d4e419c371c607>014_01_SOC</a></li><ul><li><a href=#pg-99ce29909ab99f60c365dc239abd0dd5>Chroma Subsampling是什么</a></li><li><a href=#pg-ead88d652c7ae301b2ee35ca429a106d>HDR的标准</a></li><li><a href=#pg-1fded1403e2e2c59e1b7c946eada291f>音视频设备数据流分析</a></li></ul><li><a href=#pg-891a71f383854433046ce745fa980c6a>开发板选择</a></li></ul><li><a href=#pg-1b59f38bcee538bb840786f0e0b1e39b>微博</a></li><li><a href=#pg-f80954648540c39c42e8f6226a5b186d>基本的是非观</a></li><li><a href=#pg-834c791e06ef257b7fb3f137a85265fa>2024年高考余悸</a></li><li><a href=#pg-4db5c654bfa7c7a2725075dea74ef688>Roe v. Wade</a></li><li><a href=#pg-525fbcdeb51c74d87dae039c9ecd68f3>关于堕胎</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-2f127a5fd5d468c5eb86266daad62359>000_Grp_Collection</h1><div class="td-byline mb-4"><time datetime=2024-08-02 class=text-body-secondary>2024年08月02日</time></div></div><div class=td-content><h1 id=pg-1dd599fe13d18753bd7aeb49da0a34b8>celebrity quotes</h1><div class="td-byline mb-4"><time datetime=2024-08-02 class=text-body-secondary>2024年08月02日</time></div><h2 id=项目数量决定成长速度项目质量决定成长高度>项目数量决定成长速度，项目质量决定成长高度。</h2><p>Date: Aug02.2024</p><p><a href=https://www.eet-china.com/mp/a310091.html target=_blank rel=noopener>URL: 读研三年和工作三年，究竟哪个更值？</a></p><h2 id=精于基础广于工具>精于基础，广于工具</h2><p>Date: Aug02.2024</p><p><a href=https://www.eet-china.com/mp/a304642.html target=_blank rel=noopener>URL: 对于嵌入式工程师，需要掌握的知识是广还是精？</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-1cad4fe27a93cf79ee04fc118800f0e8>Reading List</h1><div class="td-byline mb-4"><time datetime=2024-08-02 class=text-body-secondary>2024年08月02日</time></div><p><a href=/books/Hayek_The_Road_to_Serfdom.pdf>Hayek_The_Road_to_Serfdom.pdf</a></p><p><a href=/books/%e7%a8%8b%e5%ba%8f%e5%91%98%e4%bf%ae%e7%82%bc%e4%b9%8b%e9%81%93%ef%bc%9a%e4%bb%8e%e5%b0%8f%e5%b7%a5%e5%88%b0%e4%b8%93%e5%ae%b6.pdf>程序员修炼之道：从小工到专家.pdf</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-43788e033bd545562c0fc053b8c79a3b>002_Grp_HugoDocsy</h1><div class="td-byline mb-4"><time datetime=2024-08-30 class=text-body-secondary>2024年08月30日</time></div></div><div class=td-content><h1 id=pg-729590ae559a675d7c26a76baa5cb942>Docsy 设置教程</h1><div class="td-byline mb-4"><time datetime=2024-08-30 class=text-body-secondary>2024年08月30日</time></div><p><a href=https://before80.github.io/docsy_docs_with_hugo/docs/ContentAndCustomization/AddingContent/ target=_blank rel=noopener>docsy中文设置教程</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-75fcd2944b879dcf7eda743b34bd537e>Docsy`s Interesting Tricks</h1><div class="td-byline mb-4"><time datetime=2024-07-18 class=text-body-secondary>2024年07月18日</time></div><h2 id=001-if-date-is-in-the-future-this-markdown-file-will-not-be-shown-right-now><strong>001. if date is in the future, this markdown file will not be shown right now</strong></h2><div style=padding-left:2em><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>---
</span></span><span style=display:flex><span>title: &#34;Docker使用&#34;
</span></span><span style=display:flex><span>date: 2024-07-19
</span></span><span style=display:flex><span>categories:
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>-</span> blog
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>-</span> DevOps
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>-</span> Docker
</span></span><span style=display:flex><span>noindex: true
</span></span><span style=display:flex><span>---
</span></span></code></pre></div><p>and today is 2024-07-18, so that no blog will be shown within this section.</p></div><h2 id=002-hugo-server-change-detection-does-not-work-how-to-fix-it><strong>002. hugo server change detection does not work? How to fix it.</strong></h2><p>Date: Aug07.2024</p><p><a href=https://gohugo.io/commands/hugo_server/ target=_blank rel=noopener>LNK: hugo server intro page</a></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>By default hugo will also watch your files for any changes you make and automatically rebuild the site. It will then live reload any open browser pages and push the latest content to them. As most Hugo sites are built in a fraction of a second, you will be able to save and see your changes nearly instantly.
</span></span></code></pre></div><h4 id=problem><code>Problem</code></h4><p>but when i edited my files via volume of docker which shared from host to guest os and the host os is windows 10 and the guest os is ubuntu 22.04, nothing will happen anyway.</p><h4 id=the-solution-which-comes-from-chatgpt-4o>``the solution which comes from ChatGPT-4o`</h4><p>The issue you are encountering with Hugo not detecting file changes in a Docker volume shared directory could be related to how Docker and WSL handle file system notifications. Here are some steps you can try to troubleshoot and resolve the issue:</p><ol><li><p><strong>Check File System Notifications</strong>: Ensure that file system notifications are correctly set up in your Docker container. Sometimes, the way Docker handles file changes in volumes can cause issues with live reload.</p></li><li><p><strong>Use Polling for File Changes</strong>: You can configure Hugo to use polling instead of relying on file system notifications. This can be done by setting the <code>--poll</code> flag when running the Hugo server. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>hugo server --poll 300ms
</span></span></code></pre></div><p>This will make Hugo poll for changes every 300 milliseconds.</p></li><li><p><strong>Verify Volume Mount Options</strong>: Ensure that your Docker volume mount options are set correctly. You can specify the <code>:cached</code> option to improve performance:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>docker run -v /path/to/your/hugo/project:/src:cached -p 1313:1313 klakegg/hugo server
</span></span></code></pre></div></li><li><p><strong>Check Docker and WSL Versions</strong>: Make sure you are using the latest versions of Docker Desktop and WSL. Updates often include bug fixes and performance improvements.</p></li><li><p><strong>Restart Docker and WSL</strong>: Sometimes, simply restarting Docker and WSL can resolve issues with file change detection.</p></li><li><p><strong>Check Docker Logs</strong>: Look at the Docker container logs to see if there are any errors or warnings related to file system notifications or Hugo server.</p></li><li><p><strong>Test Outside Docker</strong>: As a troubleshooting step, try running Hugo directly on your Windows machine or in a native Ubuntu installation (not within Docker) to see if the issue persists.</p></li></ol><p>Here is an example Docker command with the polling option:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>docker run --rm -it -v /path/to/your/hugo/project:/src -p 1313:1313 klakegg/hugo server --poll 300ms
</span></span></code></pre></div><p>By trying these steps, you should be able to determine whether the issue is with Docker&rsquo;s handling of file changes or something else in your setup. If you need further assistance, feel free to ask!</p><h4 id=final><code>final</code></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>... 
</span></span><span style=display:flex><span>hugo server --bind 0.0.0.0 --port <span style=color:#0000cf;font-weight:700>1313</span> --disableFastRender --poll 1000ms
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>this fixed my problem!</p><h2 id=003-how-to-disableenable-the-message-of-current-blogs-last-modify-date->003. How to disable/enable the message of current blog`s last modify date ?</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim hugo.yaml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>enableGitInfo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>showLastUpdated</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>choose false will turn every message off
and true will on</p></div><div class=td-content style=page-break-before:always><h1 id=pg-1e267fd76ccbbfa541d293d05506d372>Docsy主题的设置技巧</h1><div class="td-byline mb-4"><time datetime=2024-06-10 class=text-body-secondary>2024年06月10日</time></div><details><summary>001. categories如何增加子类呢？</summary><h4 id=例如categories-blogerp>例如：categories: [&ldquo;blog&rdquo;][&ldquo;ERP&rdquo;]</h4><h5 id=错误提示>错误提示：</h5><pre><code>    Error: error building site: process: readAndProcessContent: &quot;...content/zh-cn/blog/005_ERP/005_001_ERPNext/与ERPNext的初次见面.md:3:1&quot;: failed to unmarshal YAML: yaml: line 3: did not find expected key
</code></pre><h5 id=正确做法>正确做法：</h5><pre><code>    categories:
        - blog
        - ERP
        - ERPNext
</code></pre></details><details><summary>002. 如何制造块缩进</summary><div style=padding-left:2em><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>style</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;padding-left: 2em;&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><p>now the contents included by this div section will be indented 2em.</p></div></details><details><summary>003. 如何嵌入Merimaid流程图</summary><h2 id=第一种是不需要加入折叠功能的显示>第一种是不需要加入折叠功能的显示</h2><p><img src=/2024/July/11/mermaid.png alt=mermaid演示></br><strong>被注释掉的这两句代码是必须的</strong></br>取消掉注释的那两句，就可以正常显示了</br></p><h2 id=第二种是加入了折叠功能的显示>第二种是加入了折叠功能的显示</h2><p><a href=https://mermaid.js.org/config/usage.html target=_blank rel=noopener>Mermaid的参考资料</a></br>在要显示mermaid流程图的md文档中加入如下代码
<script type=module>
import mermaid from &lsquo;<a href="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs%27;" target="_blank" rel="noopener">https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';</a>
</script></p><p>然后还是在这一份md文档中，需要显示流程图的位置，如下格式写：</p><pre><code>&lt;details&gt;
    &lt;summary&gt;流程图x&lt;/summary&gt;
&lt;pre class=&quot;mermaid&quot;&gt;
    graph TD
    A[开始]
    ...
    ...
&lt;/pre&gt;
&lt;/details&gt;
</code></pre><p><img src=/2024/July/11/mermaid_success_in_fold.png alt=mermaid成功在html5提供的折叠功能区域>
<strong>这里有一个无法忽略的BUG</strong></br>清空网页cookie之后，该流程图就正常显示，但是一旦按下F5刷新网页之后，流程图就显示出错了</br><img src=/2024/July/11/mermaid_error_1.png alt=mermaid出错>
<strong>所以这种方法其实不行</strong></p><h2 id=第三种是直接把流程图转换成图片推荐>第三种是直接把流程图转换成图片【推荐】</h2><p>转换网站如下：</br><a href=https://mermaid-js.github.io/mermaid-live-editor target=_blank rel=noopener>Mermaid Live Editor</a></p><p>可以转成svg、png、复制到clipboard
还可以以svg、png形式在网页上直接预览
这种方式极好</p></details><details><summary>004. 如何设置颜色(背景色、粗体、斜体、下划线)</summary><pre tabindex=0><code>
&lt;span style=&#34;color: red;&#34;&gt;This is red color&lt;/span&gt;&lt;/br&gt;

&lt;span style=&#34;background-color: gray;&#34;&gt;This is gray bg color&lt;/span&gt;&lt;/br&gt;

&lt;span style=&#34;font-weight: bold;&#34;&gt;This is bold font&lt;/span&gt;&lt;/br&gt;

&lt;span style=&#34;font-style: italic;&#34;&gt;This is italic font&lt;/span&gt;&lt;/br&gt;

&lt;span style=&#34;text-decoration: underline;&#34;&gt;This is underline&lt;/span&gt;&lt;/br&gt;
</code></pre></details></div><div class=td-content style=page-break-before:always><h1 id=pg-d9064da9a31b2507c70cc07b8b8053c8>003_Grp_ERP</h1><div class="td-byline mb-4"><time datetime=2024-07-10 class=text-body-secondary>2024年07月10日</time></div></div><div class=td-content><h1 id=pg-175b68ce61a4576347995b42322c31a9>003_001_Grp_ERPNext</h1><div class="td-byline mb-4"><time datetime=2024-07-10 class=text-body-secondary>2024年07月10日</time></div></div><div class=td-content><h1 id=pg-78e0794667a90364d4d53ab6b241a48b>与ERPNext的初次见面</h1><div class="td-byline mb-4"><time datetime=2024-07-10 class=text-body-secondary>2024年07月10日</time></div><h1 id=一最后的结论><span class=CSS_First_color-title>一、最后的结论</span></h1><p>ERPNext的好处当然是开源（免费），但是操作习惯与我（未用过其他ERP系统，连摸过都没有）的想象差距较大。
但是不应该有但是了，因为人家免费，还想怎么样。</p><h1 id=二经过><span class=CSS_First_color-title>二、经过</span></h1><p>我负责项目管理已经17周了。</p><h2 id=21-痛点>2.1 痛点</h2><h3 id=a-文档的格式各种各样>a. 文档的格式各种各样</h3><p>每种产品在excel里是一个单独的tab。每一个tab里的列宽行高都可能各不相同。</p><h3 id=b-老板对于文档没有办法呈现时间进度>b. 老板对于文档没有办法呈现时间进度</h3><h3 id=c-对于员工每周的工作周报没有办法在开会时看见>c. 对于员工每周的工作周报没有办法在开会时看见</h3><h1 id=三优缺点><span class=CSS_First_color-title>三、优缺点</span></h1><h2 id=31-优点>3.1 优点</h2><h3 id=a-frappe-forum-非常活跃>a. frappe-forum 非常活跃。</h3><p>半个钟头内，三个人回复我。而且第一个回复我的人还是frappe的工程师。</p><h3 id=b-轻度使用性能稳定>b. 轻度使用，性能稳定</h3><h3 id=c-结合website可以实现企业的官方网站融合>c. 结合website，可以实现企业的官方网站融合</h3><p>估计要面对太庞大的官网，erpnext可能会反过来限制官网的功能，但是中小型企业（未查询标准之前，我认为300人以内）应该是可以使用它作为website。
<img src=/2024/July/10/enterprise_thresholds.png alt=中小型企业>
它里面给了很多框架。</p><h3 id=d-可以通过邮件与外部直接打通>d. 可以通过邮件与外部直接打通</h3><p>可以发送成功，但是耗时2~3分钟</br>gmail可以收到
<img src=/2024/July/11/email_sent_successfully.png alt=gmail成功收到erp的发送截图>
qqmail可以收到
<img src=/2024/July/11/qqmail_recv_successfully.jpg alt=qqmail成功收到erp的发送截图></p><h2 id=32-缺点>3.2 缺点</h2><h3 id=a-中文汉化得不完整>a. 中文汉化得不完整</h3><p>有时候，一段话有三行，其中只有标题被汉化了。其他三行内容全部都是英文出现。
在UOM（unity of measure）中，所有的测量单位全都是英文。
例如Nos，这谁知道它是啥单位。（当然，对于erp系统来说，我是彻头彻尾的门外汉）</p><hr><details><summary>附注1：企业规模的标准是什么？</summary><p>企业的规模通常依据员工数量、营业收入、资产规模等多方面的指标来划分，不同国家和组织对企业规模的定义和标准有所不同。以下是一些常见的标准和制定这些标准的主要组织：</p><h4 id=中国的企业规模标准>中国的企业规模标准</h4><p>在中国，企业规模的划分标准由国家统计局制定，主要依据《中小企业划型标准规定》。企业按行业类别和员工数量、营业收入、资产总额等指标划分为微型、小型、中型和大型企业。以下是部分行业的划分标准：</p><h5 id=工业企业>工业企业</h5><ul><li><strong>微型企业</strong>：从业人员少于20人，营业收入少于300万元。</li><li><strong>小型企业</strong>：从业人员20-300人，营业收入300万-2000万元。</li><li><strong>中型企业</strong>：从业人员300-1000人，营业收入2000万-4亿元。</li><li><strong>大型企业</strong>：从业人员超过1000人，营业收入超过4亿元。</li></ul><h5 id=建筑业>建筑业</h5><ul><li><strong>微型企业</strong>：从业人员少于50人，营业收入少于300万元。</li><li><strong>小型企业</strong>：从业人员50-300人，营业收入300万-3000万元。</li><li><strong>中型企业</strong>：从业人员300-3000人，营业收入3000万-2亿元。</li><li><strong>大型企业</strong>：从业人员超过3000人，营业收入超过2亿元。</li></ul><h4 id=国际标准>国际标准</h4><p>国际上，企业规模的划分也有不同的标准。例如：</p><h5 id=欧盟标准>欧盟标准</h5><p>欧盟对中小企业的定义主要依据<a href=https://ec.europa.eu/docsroom/documents/42903/attachments/1/translations/en/renditions/pdf target=_blank rel=noopener>《中小企业定义指南》</a>：</p><ul><li><strong>微型企业</strong>：员工少于10人，年营业额或资产总额不超过200万欧元。</li><li><strong>小型企业</strong>：员工少于50人，年营业额或资产总额不超过1000万欧元。</li><li><strong>中型企业</strong>：员工少于250人，年营业额不超过5000万欧元或资产总额不超过4300万欧元。</li></ul><h5 id=美国标准>美国标准</h5><p>美国小企业管理局（SBA）根据《小企业法》制定了中小企业的定义标准，通常依据行业、员工数量或年营业额。以下是几个例子：</p><ul><li><strong>制造业和矿业</strong>：员工少于500人。</li><li><strong>批发业</strong>：员工少于100人。</li><li><strong>零售业和服务业</strong>：年营业额不超过750万美元（根据行业不同而有所不同）。</li></ul><h4 id=总结>总结</h4><p>不同国家和组织根据自身经济结构和实际情况制定了不同的企业规模标准。通常，政府机构和统计部门会根据企业的员工数量、营业收入、资产规模等多个指标综合考量，并制定相应的划分标准。</p><p>对于中国的具体标准，可以参考国家统计局发布的《中小企业划型标准规定》。国际上，欧盟和美国也有各自的标准，具体情况会因行业和地区而异。</p></details></div><div class=td-content style=page-break-before:always><h1 id=pg-2296f0b9e92e9ca1ededd12dca4664d0>004_Grp_AI</h1><div class="td-byline mb-4"><time datetime=2024-08-01 class=text-body-secondary>2024年08月01日</time></div></div><div class=td-content><h1 id=pg-ee3a471e85eecb11b85c3bb0c0f8b147>004_001_Grp_TTI</h1><div class="td-byline mb-4"><time datetime=2024-06-14 class=text-body-secondary>2024年06月14日</time></div></div><div class=td-content><h1 id=pg-4b6d62a5294b24da3340bc4c4f2b10e7>初体验-stable diffusion</h1><div class=lead>本地搭建stable diffusion全过程</div><div class="td-byline mb-4"><time datetime=2024-06-14 class=text-body-secondary>2024年06月14日</time></div><style>.copy-btn{margin-left:5px;cursor:pointer}</style><script>document.querySelectorAll(".copyable-code").forEach(function(e){var t=document.querySelector('.copy-btn[data-target="'+e.id+'"]');t&&t.addEventListener("click",function(){copyCode(e.innerText)})});function copyCode(e){navigator.clipboard.writeText(e).then(function(){alert("代码已复制到剪贴板")},function(){alert("复制失败，请手动复制")})}</script><p>[tableOfContents]</p><p>[TOC]</p><h1 id=一画图测试1><strong>一、画图测试1</strong></h1><h2 id=11-声音按钮><strong>1.1 声音按钮</strong></h2><h3 id=111-阿里通义万相作品>1.1.1 [阿里]通义万相作品</h3><ul><li><p>提示词</p><pre tabindex=0><code>赛博朋克，“声音”，按键，图标，背景透明。简约一点，能一眼就看出是这个按键按下去会有声音相关的设置出现，而不是画一个声音。
</code></pre></li><li><p>效果图</p><p><img src=/2024/June/1/12e0d40fa6404e1894129cd6d70ad92d_2.png alt=12e0d40fa6404e1894129cd6d70ad92d_2.png></p><p><img src=/2024/June/1/12e0d40fa6404e1894129cd6d70ad92d_1.png alt=12e0d40fa6404e1894129cd6d70ad92d_1.png></p><p><img src=/2024/June/1/12e0d40fa6404e1894129cd6d70ad92d_0.png alt=12e0d40fa6404e1894129cd6d70ad92d_0.png></p><p><img src=/2024/June/1/12e0d40fa6404e1894129cd6d70ad92d_3.png alt=12e0d40fa6404e1894129cd6d70ad92d_3.png></p><p><img src=/2024/June/1/9b5c830f6d0f49c186d2cd74ec0b7dfb_1.png alt=9b5c830f6d0f49c186d2cd74ec0b7dfb_1.png></p><p><img src=/2024/June/1/c3ae169c39204702a7245bc2afd301db_0.png alt=c3ae169c39204702a7245bc2afd301db_0.png></p><p><img src=/2024/June/1/c3ae169c39204702a7245bc2afd301db_2.png alt=c3ae169c39204702a7245bc2afd301db_2.png></p></li></ul><h3 id=112--pixco>1.1.2 pixco</h3><ul><li><p>提示词</p><pre tabindex=0><code>赛博朋克，“声音”，按键，图标，背景透明。简约一点，能一眼就看出是这个按键按下去会有声音相关的设置出现，而不是画一个声音。
</code></pre></li><li><p>效果图</p><p>![Untitled 11.png](/2024/June/1/Untitled 11.png)</p><p><img src=/2024/June/1/ai-image%281%29.png alt=ai-image(1).png></p></li></ul><h3 id=113-腾讯>1.1.3 腾讯</h3><ul><li><p>提示词</p><pre tabindex=0><code>赛博朋克，“声音”，按键，图标，背景透明。简约一点，能一眼就看出是这个按键按下去会有声音相关的设置出现，而不是画一个声音。
</code></pre></li><li><p>效果图</p><p><img src=/2024/June/1/Untitled.jpeg alt=Untitled.jpeg></p></li></ul><h3 id=114-谷歌>1.1.4 谷歌</h3><ul><li><p>提示词</p><pre tabindex=0><code>赛博朋克，“声音”，按键，图标，背景透明。简约一点，能一眼就看出是这个按键按下去会有声音相关的设置出现，而不是画一个声音。
</code></pre></li><li><p>效果图</p><p><img src=/2024/June/1/image_fx_generate_a_highdetail_11_ratio_transparen%283%29.jpg alt=image_fx_generate_a_highdetail_11_ratio_transparen(3).jpg></p><p><img src=/2024/June/1/image_fx_generate_a_highdetail_11_ratio_transparen%282%29.jpg alt=image_fx_generate_a_highdetail_11_ratio_transparen(2).jpg></p><p><img src=/2024/June/1/image_fx_generate_a_highdetail_11_ratio_transparen%281%29.jpg alt=image_fx_generate_a_highdetail_11_ratio_transparen(1).jpg></p><p><img src=/2024/June/1/image_fx_generate_a_highdetail_11_ratio_transparen.jpg alt=image_fx_generate_a_highdetail_11_ratio_transparen.jpg></p></li></ul><h3 id=115-sd3>1.1.5 sd3</h3><ul><li><p>提示词</p><pre tabindex=0><code>Generate a high-detail, 1:1 ratio, transparent background UI icon for a sound-related function. The icon should be instantly recognizable as a sound button, and clicking it should reveal sound-related content. Use a primarily black color scheme for the icon, with bold and vibrant accents to represent sound waves or audio elements. Incorporate geometric shapes and clean lines to create a modern and sleek design. The icon should be detailed enough to be zoomed in without losing clarity. The design should convey the idea of sound, music, or audio playback.
Example elements to include:
    Sound waves or audio signals
    Music notes or treble clef
    Speaker or headphone icons
    Audio equalizer or waveform patterns
The icon should be easily recognizable and visually appealing, with a clear indication that it relates to sound or audio functionality.
</code></pre></li><li><p>seed</p><pre tabindex=0><code>253541084640741
</code></pre></li><li><p>模型</p><pre tabindex=0><code>sd3_medium_incl_clips_t5xxlfp8.safetensors
</code></pre></li><li><p>截图</p><p><img src=/2024/June/1/ComfyUI_00005_.png alt=ComfyUI_00005_.png></p></li></ul><hr><h2 id=12-相册按钮><strong>1.2 相册按钮</strong></h2><h3 id=121-pixso>1.2.1 pixso</h3><ul><li><p>prompt提示词</p><pre tabindex=0><code>“相册”按键，这个按键的图标，背景透明。简约一点，能一眼就看出是这个按键的功能。不要花里胡哨。
</code></pre></li><li><p>效果图</p><p><img src=/2024/June/1/ai-image.png alt=ai-image.png></p></li></ul><h3 id=122-leonardoai>1.2.2 Leonardo.ai</h3><ul><li><p>prompt</p><pre tabindex=0><code>A sleek, minimalist &#34;Album&#34; button, its icon instantly recognizable against a transparent background. This image is a digital graphic, meant to be clear and precise in its functionality. The button is elegantly designed, with a modern feel and a user-friendly interface. The detailing is impeccable, from the crisp lines to the subtle shading, showcasing the designer&#39;s attention to quality and precision. It exudes a sense of sophistication and professionalism, making it a standout feature of any interface.
</code></pre></li><li><p>效果图</p><p><img src=/2024/June/1/Default_A_sleek_minimalist_Album_button_its_icon_instantly_rec_2.png alt=Default_A_sleek_minimalist_Album_button_its_icon_instantly_rec_2.png></p><p><img src=/2024/June/1/Default_A_sleek_minimalist_Album_button_its_icon_instantly_rec_3.png alt=Default_A_sleek_minimalist_Album_button_its_icon_instantly_rec_3.png></p><p><img src=/2024/June/1/Default_A_sleek_minimalist_Album_button_its_icon_instantly_rec_0.png alt=Default_A_sleek_minimalist_Album_button_its_icon_instantly_rec_0.png></p></li></ul><h3 id=123-mj>1.2.3 mj</h3><ul><li><p>prompt提示词1</p><pre tabindex=0><code>A sleek, minimalist &#34;Album&#34; button, its icon instantly recognizable against a transparent background. This image is a digital graphic, meant to be clear and precise in its functionality. The button is elegantly designed, with a modern feel and a user-friendly interface. The detailing is impeccable, from the crisp lines to the subtle shading, showcasing the designer&#39;s attention to quality and precision. It exudes a sense of sophistication and professionalism, making it a standout feature of any interface.
</code></pre><pre><code class=copyable-code>
// 这里是您的代码
A sleek, minimalist "Album" button, its icon instantly recognizable against a transparent background. This image is a digital graphic, meant to be clear and precise in its functionality. The button is elegantly designed, with a modern feel and a user-friendly interface. The detailing is impeccable, from the crisp lines to the subtle shading, showcasing the designer's attention to quality and precision. It exudes a sense of sophistication and professionalism, making it a standout feature of any interface.
</code></pre><p><button class=copy-btn data-target=code1>复制</button></p></li><li><p>效果图1</p><p><img src=/2024/June/1/baytto_e_High-detail_icon_design_black_background_album_entranc_dba2db32-0cfe-4ffc-b68a-6b55a90139d1.png alt=baytto_e_High-detail_icon_design_black_background_album_entranc_dba2db32-0cfe-4ffc-b68a-6b55a90139d1.png></p><p><img src=/2024/June/1/baytto_e_High-detail_icon_design_black_background_album_entranc_2da5cc2c-d3f5-4fe4-ad7f-5053a4756b39.png alt=baytto_e_High-detail_icon_design_black_background_album_entranc_2da5cc2c-d3f5-4fe4-ad7f-5053a4756b39.png></p><p><img src=/2024/June/1/baytto_e_High-detail_icon_design_black_background_album_entranc_fd5aa576-b2b5-4aea-9aab-4181d8c48b55.png alt=baytto_e_High-detail_icon_design_black_background_album_entranc_fd5aa576-b2b5-4aea-9aab-4181d8c48b55.png></p></li><li><p>提示词2</p><pre tabindex=0><code>High-detail icon design, black background, representing a photo album entrance, simple and clear, not fancy.
The icon should feature recognizable elements of a photo album, such as a stylized open album or a stack of overlapping photographs.
Avoid any musical or maze-like elements. The icon should be modern, easily recognizable at a glance, and immediately convey that pressing this icon will take the user to a photo album. Use high contrast to make the icon stand out on the black background. Suitable for use as an application icon, with a focus on clarity and visual appeal. Ensure that the icon has a photographic theme with clear, distinct photo elements, such as a camera or photo frame, integrated into the design. --v 6.0
</code></pre></li><li><p>效果图1</p><p><img src=/2024/June/1/baytto_e_High-detail_icon_design_black_background_representing__ea94935c-f6ca-4abf-98fa-472d7a8e00bd.png alt=baytto_e_High-detail_icon_design_black_background_representing__ea94935c-f6ca-4abf-98fa-472d7a8e00bd.png></p><p><img src=/2024/June/1/baytto_e_High-detail_icon_design_black_background_representing__304ea5bb-acb0-40b5-91d4-9f83c2417b51.png alt=baytto_e_High-detail_icon_design_black_background_representing__304ea5bb-acb0-40b5-91d4-9f83c2417b51.png></p><p><img src=/2024/June/1/baytto_e_High-detail_icon_design_black_background_representing__e299ce21-e059-4de3-909a-2d5d2324bbd0.png alt=baytto_e_High-detail_icon_design_black_background_representing__e299ce21-e059-4de3-909a-2d5d2324bbd0.png></p></li></ul><h3 id=124-sd3>1.2.4 sd3</h3><ul><li><p>模型</p><pre tabindex=0><code>sd3_medium_incl_clips_t5xxlfp8.safetensors
</code></pre></li><li><p>提示词</p><pre tabindex=0><code>A sleek, minimalist &#34;Album&#34; button, its icon instantly recognizable against a transparent background. This image is a digital graphic, meant to be clear and precise in its functionality. The button is elegantly designed, with a modern feel and a user-friendly interface. The detailing is impeccable, from the crisp lines to the subtle shading, showcasing the designer&#39;s attention to quality and precision. It exudes a sense of sophistication and professionalism, making it a standout feature of any interface.
</code></pre></li><li><p>反向提示词</p><pre tabindex=0><code>text, watermark
</code></pre></li><li><p>seed值</p><pre tabindex=0><code>900744638987173
</code></pre></li><li><p>配置截图</p><p>![Untitled 12.png](/2024/June/1/Untitled 12.png)</p></li><li><p>终端日志</p><p>![Untitled 13.png](/2024/June/1/Untitled 13.png)</p></li><li><p>耗时</p><pre tabindex=0><code></code></pre></li><li><p>效果图</p><p><img src=/2024/June/1/ComfyUI_00007_.png alt=ComfyUI_00007_.png></p></li></ul><h2 id=13-推流信息配置按钮><strong>1.3 推流信息配置按钮</strong></h2><h3 id=131-mj>1.3.1 mj</h3><ul><li><p>提示词</p><pre tabindex=0><code>High-detail icon design, black background, representing a streaming settings configuration entrance. The icon should clearly indicate that pressing it will take the user to a streaming configuration settings menu. Include elements such as a streaming signal, a gear or settings symbol, and visual indicators of streaming options like frame rate, bitrate, streaming address, recording storage, and recording time settings. Ensure the icon is simple, clear, and not overly decorative. It should immediately convey the purpose of configuring streaming settings at a glance, with a focus on clarity and direct visual communication. Modern design style, high contrast to make it stand out on the black background, suitable for use as an application icon.
</code></pre></li><li><p>图像1</p><p><img src=/2024/June/1/baytto_e_High-detail_icon_design_black_background_representing__199adc6a-564e-4f38-9b98-f620c50a76ec.png alt=baytto_e_High-detail_icon_design_black_background_representing__199adc6a-564e-4f38-9b98-f620c50a76ec.png></p></li></ul><h3 id=132-sd3>1.3.2 sd3</h3><ul><li>模型</li></ul><pre tabindex=0><code>sd3_medium_incl_clips_t5xxlfp8.safetensors
</code></pre><ul><li><p>提示词</p><pre tabindex=0><code>High-detail icon design, black background, representing a streaming settings configuration entrance. The icon should clearly indicate that pressing it will take the user to a streaming configuration settings menu. Include elements such as a streaming signal, a gear or settings symbol, and visual indicators of streaming options like frame rate, bitrate, streaming address, recording storage, and recording time settings. Ensure the icon is simple, clear, and not overly decorative. It should immediately convey the purpose of configuring streaming settings at a glance, with a focus on clarity and direct visual communication. Modern design style, high contrast to make it stand out on the black background, suitable for use as an application icon.
</code></pre></li><li><p>反向提示词</p><pre tabindex=0><code>text, watermark
</code></pre></li><li><p>seed值</p><pre tabindex=0><code>900744638987173
</code></pre></li><li><p>配置截图</p></li><li><p>终端日志</p></li><li><p>耗时</p><pre tabindex=0><code></code></pre></li><li><p>效果图</p><p><img src=/2024/June/1/ComfyUI_00008_.png alt=ComfyUI_00008_.png></p><p><img src=/2024/June/1/ComfyUI_00009_.png alt=ComfyUI_00009_.png></p></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-6be463e23b8efec9938e7dfb13d0f373>选择文生图工具之路</h1><div class=lead>记录自己选择文生图工具之路</div><div class="td-byline mb-4"><time datetime=2024-06-14 class=text-body-secondary>2024年06月14日</time></div><h1 id=一最后的结论>一、最后的结论</h1><pre><code>选择stable diffusion。
</code></pre><h1 id=二起因>二、起因</h1><pre><code>公司在招美工的道路上一直不顺利，好的美工本来就不容易找到。
而美工的主要诉求之一就是做素材。
其次，我猜公司对美工的诉求也远不止如此。
所以我就大力建议，先玩起来文生图。
</code></pre><h1 id=三求知的过程>三、求知的过程</h1><h2 id=产品候选清单>产品候选清单</h2><h2 id=01-midjourney>01. MidJourney</h2><h3 id=快问快答>快问快答：</h3><pre><code>    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/391b1061-106d-444f-a6c6-c6affaddda76/266b12e9-31b8-457e-b4b3-20d533571be4/Untitled.png)
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/391b1061-106d-444f-a6c6-c6affaddda76/20ef8ca6-9114-4d59-9182-1282651b66a7/Untitled.png)
    
    https://prod-files-secure.s3.us-west-2.amazonaws.com/391b1061-106d-444f-a6c6-c6affaddda76/7f993077-a6a3-4d06-a125-acddf87db51a/Untitled.png
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/391b1061-106d-444f-a6c6-c6affaddda76/68cc58f6-750e-435e-be74-95e624bdac78/Untitled.png)
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/391b1061-106d-444f-a6c6-c6affaddda76/77c5c57e-b1b1-4c71-a43f-64e9f7519ee7/Untitled.png)
    
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/391b1061-106d-444f-a6c6-c6affaddda76/721e766e-b1c0-4c34-a3ee-b489e9101040/Untitled.png)
</code></pre><h3 id=--痛点1-关于隐私>- 痛点1-关于隐私</h3><pre><code>    - midjourney 的Subscription有一段话：we are building an open by default community focused on collective exploration and fun. if you have a need to opt-out of this and be private-by-default you can subscribe to the 60 dollor per month pro plan and activate stealth generation with the /stealth command.请你帮我翻译这段话，并且帮我搜索mj的官方资料，确认：是否我们生成的图像都会被公开出来呢？
        
        这段话的翻译如下：
        
        我们正在建立一个默认开放的社区，专注于集体探索和乐趣。如果您需要选择退出并默认保持隐私，您可以订阅每月60美元的专业计划，并通过/stealth命令激活隐秘生成。
        
        接下来我会帮您搜索MidJourney的官方资料，确认生成的图像是否都会被公开。稍等片刻。
        
        MidJourney operates an open-by-default community, which means that by default, all images generated are publicly visible on their website, including those created in private Discord servers, direct messages, and through the MidJourney web app. This approach encourages a community-focused environment aimed at collective exploration and enjoyment.
        
        However, if you prefer your creations to remain private, you can opt for the Pro plan ($60 per month) or the Mega plan ($120 per month). These plans offer a feature called Stealth Mode, which allows you to keep your generated images private by using the `/stealth` command. This feature ensures that your images will not be visible to others on the MidJourney website as long as you generate them in private Discord channels or direct messages.
        
        It's important to note that even in Stealth Mode, images generated in public Discord channels will still be visible to other users in those channels. To fully utilise Stealth Mode, you should generate images in private settings. Furthermore, if you cancel or downgrade your subscription, any previously created Stealth Mode images will remain unpublished and private【7†source】【8†source】【9†source】.
</code></pre><h3 id=--痛点2-关于共享>- 痛点2-关于共享</h3><pre><code>    - 你再帮我查询mj的官方资料，如果我建立一个私人的server，我的subscription可否供给整个群友使用。
        
        根据MidJourney的官方资料，如果你建立一个私人服务器，并将MidJourney机器人添加到该服务器上，你的订阅仍然是个人使用的，并不能直接共享给整个群友使用。每位用户在你的服务器中使用MidJourney机器人时，都需要有自己单独的订阅【16†source】【17†source】。
        
        不过，MidJourney确实提供了一种**“房间”功能**，允许你创建一个私密的房间，并与朋友分享这个房间的链接和密码。在这个房间内，你和你的朋友可以一起创建图像【19†source】。尽管如此，每个参与的用户仍需要有自己的MidJourney订阅，才能在这个私密房间中使用MidJourney机器人。
        
        另外，MidJourney的图像生成默认是公开的，包括在私人服务器中生成的图像。如果你想要保持图像的私密性，只有订阅Pro计划（每月60美元）或Mega计划（每月120美元），并使用/stealth命令，才能开启隐身模式，确保图像不被公开【15†source】【16†source】。
        
        总结：
        
        1. 你无法通过建立私人服务器将你的MidJourney订阅分享给整个群友使用。
        2. 每位用户都需要拥有自己的MidJourney订阅。
        3. 默认情况下，所有生成的图像都是公开的，除非你使用Pro或Mega订阅并启用隐身模式。
        
        更多信息可以访问MidJourney的官方文档和帮助页面：[MidJourney帮助中心](https://help.midjourney.com/en/)。
</code></pre><h3 id=--痛点3-关于api接入>- 痛点3-关于API接入</h3><pre><code>    - gpt4o-jun13.2024
        
        MidJourney currently does not offer API access for external integration. Users interact with MidJourney through Discord, either within the MidJourney official server or on private servers where the MidJourney Bot has been added.MidJourney 目前不提供用于外部集成的 API 访问。用户通过 Discord 与 MidJourney 进行交互，无论是在 MidJourney 官方服务器内还是在添加了 MidJourney Bot 的私人服务器上。
        
        Regarding creating private rooms or servers for collaborative image generation:关于创建用于协作图像生成的私人房间或服务器：
        
        1. **Private Rooms:** MidJourney allows users to create private rooms where they can invite friends to collaborate. However, each participant must have their own MidJourney subscription to use the bot in these rooms.
            
            私人房间：MidJourney 允许用户创建私人房间，他们可以邀请朋友进行协作。但是，每个参与者必须拥有自己的 MidJourney 订阅才能在这些房间中使用机器人。
            
        2. **Private Servers:** If you create a private Discord server and invite the MidJourney Bot, the images generated there will still be visible on MidJourney's website unless generated in Stealth Mode, which requires a Pro subscription. Each user on the private server must also have their own subscription to generate images.
            
            私人服务器：如果您创建私人 Discord 服务器并邀请 MidJourney 机器人，则那里生成的图像仍将在 MidJourney 的网站上可见，除非在隐身模式下生成，这需要 Pro 订阅。专用服务器上的每个用户还必须有自己的订阅才能生成图像。
            
        
        Free plan users do not count as having a subscription; they have limited capabilities and cannot access some features available to paid subscribers, such as the Stealth Mode.免费计划用户不算作订阅；他们的功能有限，无法访问付费订阅者可用的某些功能，例如隐形模式。
        
        To manage or add the MidJourney Bot to a server:要管理 MidJourney 机器人或将 MidJourney 机器人添加到服务器：
        
        - Invite the MidJourney Bot from the [MidJourney website](https://www.midjourney.com/) or through Discord's app directory.
            
            从 MidJourney 网站或通过 Discord 的应用程序目录邀请 MidJourney 机器人。
            
        - Follow the instructions to authorize and add the bot to your desired server.
            
            按照说明授权机器人并将其添加到您所需的服务器。
            
        - You can restrict the bot’s usage to specific channels by modifying channel permissions.
            
            您可以通过修改频道权限来限制机器人对特定频道的使用。
            
        
        For direct messages with the MidJourney Bot:对于使用 MidJourney 机器人的直接消息：
        
        - Direct message the bot within Discord to generate images. These images are also publicly visible unless generated in Stealth Mode.
            
            直接向 Discord 中的机器人发送消息以生成图像。除非以隐身模式生成，否则这些图像也是公开可见的。
            
        
        For detailed information, you can refer to the [MidJourney Quick Start Guide](https://docs.midjourney.com/docs/quick-start) and the [MidJourney Bot Management](https://docs.midjourney.com/docs/add-the-bot) pages.有关详细信息，您可以参阅 MidJourney 快速入门指南和 MidJourney 机器人管理页面。
</code></pre><h2 id=--02-leonardoai>- 02. Leonardo.ai</h2><pre><code>- 对比mj
    
    [Midjourney为什么无法留住用户？](https://m.huxiu.com/article/2785233.html)
    

[AI Image Generator - Create Art, Images &amp; Video | Leonardo AI](https://leonardo.ai/)

Leo是可以做API接入的，而且应该是有150个credit可以使用（每天）。
这些都是强项。
</code></pre><h2 id=--03-开源腾讯混元>- 03. [开源][腾讯]混元</h2><pre><code>**机器学习框架方面**，腾讯采用的是自主研发的**机器学习框架Angel**，训练速度相比业界主流框架提升1倍，推理速度比业界主流框架提升1.3倍。

[腾讯和OpenAI盯上了同一条赛道](https://wallstreetcn.com/articles/3714968)

[后发而先至的腾讯混元大模型，到底有哪些技术亮点？-电子工程专辑](https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;opi=89978449&amp;url=https://www.eet-china.com/mp/a250911.html&amp;ved=2ahUKEwiIzcDhw9eGAxUmzDgGHXpMDRQQFnoECBMQAQ&amp;usg=AOvVaw0bdpdrKYA_6L5QzeOKQCQh)
</code></pre><h2 id=--04-阿里通义万相>- 04. [阿里]通义万相</h2><pre><code>- 1
    
    通义万相-文本生成图像是基于自研的**Composer组合生成框架**的AI绘画创作大模型，能够根据用户输入的文字内容，生成符合语义描述的多样化风格的图像。通过知识重组与可变维度扩散模型，加速收敛并提升最终生成图片的效果，布局自然、细节丰富、画面细腻、结果逼真。AI深度理解中英文文本语义，让文字秒变精致AI画作。
</code></pre><h2 id=--05-谷歌ai-test-kitchen>- 05. [谷歌]AI Test Kitchen</h2><h2 id=--06-sora>- 06. Sora</h2><pre><code>Sora is still in the research phase; therefore, this text-to-video AI tool is not yet available to the public. Currently, Sora can only be used by a limited group of AI researchers and machine learning experts.

[Exploring OpenAI's Sora: An In-Depth Look at the Next-Generation AI System](https://litslink.com/blog/sora-a-cutting-edge-ai-system)

[OpenAI Sora and Open Source Efforts to Catch Up](https://ranko-mosic.medium.com/the-anatomy-of-openai-sora-a3c4780753f2)
</code></pre><h2 id=--07cogvideo>- 07.CogVideo</h2><h1 id=阶段性总结>阶段性总结</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-cd68161f0e991eaccf10a25a0d190c4c>004_010_Grp_ESP32</h1><div class="td-byline mb-4"></div></div><div class=td-content style=page-break-before:always><h1 id=pg-1499ff69b052c9e5aaa6c92f8e495717>ChatGPT</h1><div class="td-byline mb-4"><time datetime=2024-08-01 class=text-body-secondary>2024年08月01日</time></div><h2 id=plus用户的权益><a href=https://help.openai.com/en/articles/6950777-what-is-chatgpt-plus#h_d78bb59065 target=_blank rel=noopener><strong>Plus用户的权益</strong>（<em>2024年5月13号以后</em>）</a></h2><div style=padding-left:2em><p>这里说的是plus，3小时80条</p><table><thead><tr><th>Type</th><th>Free</th><th>Plus</th><th>Team</th></tr></thead><tbody><tr><td>[GPT-4o]Msg_limit</td><td>16条/3小时</td><td>80条/3小时</td><td>160条/3小时</td></tr><tr><td>[GPT-4] Msg_limit</td><td>8条/3小时</td><td>40条/3小时</td><td>80条/3小时</td></tr></tbody></table></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5a6fdbeef0fe89b66429f606fd501ffc>005_Grp_Tools</h1><div class="td-byline mb-4"><time datetime=2024-08-12 class=text-body-secondary>2024年08月12日</time></div></div><div class=td-content><h1 id=pg-02c62d6f18bd9d10b96de85fbc51b5f1>005_001_Grp_VSCode</h1><div class="td-byline mb-4"><time datetime=2024-07-12 class=text-body-secondary>2024年07月12日</time></div></div><div class=td-content><h1 id=pg-91861bb406795d359f38d14dd15a44ec>VSCode使用技巧</h1><div class="td-byline mb-4"><time datetime=2024-07-12 class=text-body-secondary>2024年07月12日</time></div><h5 id=001>001.</h5></div><div class=td-content style=page-break-before:always><h1 id=pg-13b61fc80e0e1f82565712fb4d68732a>005_002_Grp_Mermaid</h1><div class="td-byline mb-4"><time datetime=2024-07-17 class=text-body-secondary>2024年07月17日</time></div></div><div class=td-content><h1 id=pg-591916c0250e708137178f5f6ab4e225>Mermaid使用技巧</h1><div class="td-byline mb-4"><time datetime=2024-07-17 class=text-body-secondary>2024年07月17日</time></div><details><summary>001.how to set style patter(color etc.,) in mermaid</summary><h6 id=a-single-node-setting-method><strong>a. single node setting method</strong></h6><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#204a87;font-weight:700>style</span> <span style=color:#204a87;font-weight:700>d</span> <span style=color:#204a87;font-weight:700>fill</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#000;font-weight:700>#</span><span style=color:#000>6a0035</span><span style=color:#ce5c00;font-weight:700>,</span><span style=color:#204a87;font-weight:700>stroke</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#000;font-weight:700>#</span><span style=color:#000>333</span><span style=color:#ce5c00;font-weight:700>,</span><span style=color:#204a87;font-weight:700>stroke-width</span><span style=color:#000;font-weight:700>:</span><span style=color:#5c35cc;font-weight:700>1px</span>
</span></span></code></pre></div><p>  like the css code above, the &ldquo;d&rdquo; node will be set to the following pattern as u said</p><h6 id=b-multi-nodes-setting-method><strong>b. multi nodes setting method</strong></h6><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#000;font-weight:700>#</span><span style=color:#000>anything</span> <span style=color:#204a87;font-weight:700>above</span><span style=color:#a40000>#</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>c</span> <span style=color:#204a87;font-weight:700>--</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>d</span><span style=color:#000;font-weight:700>{</span><span style=color:#a40000>&#34;1st_Key\nIMMDeviceEnumerator.\nEnumAudioEndpoints()&#34;</span><span style=color:#000;font-weight:700>}</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#000;font-weight:700>::</span><span style=color:#5c35cc;font-weight:700>css_keypoint</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>d</span> <span style=color:#204a87;font-weight:700>--</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>|</span><span style=color:#4e9a06>&#34;((HRESULT)(hr)) &lt; 0&#34;</span><span style=color:#ce5c00;font-weight:700>|</span> <span style=color:#204a87;font-weight:700>e</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>Release</span> <span style=color:#204a87;font-weight:700>Object</span> <span style=color:#204a87;font-weight:700>of</span><span style=color:#a40000>\</span><span style=color:#204a87;font-weight:700>nIMMDeviceEnumerator</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>e</span> <span style=color:#204a87;font-weight:700>--</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>z</span><span style=color:#ce5c00;font-weight:700>[</span><span style=color:#204a87;font-weight:700>end</span><span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>d</span> <span style=color:#204a87;font-weight:700>--</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>|</span><span style=color:#4e9a06>&#34;((HRESULT)(hr)) &gt;= 0&#34;</span><span style=color:#ce5c00;font-weight:700>|</span><span style=color:#204a87;font-weight:700>f</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>Return</span> <span style=color:#a40000>\</span><span style=color:#204a87;font-weight:700>nIMMDeviceCollection</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>f</span> <span style=color:#204a87;font-weight:700>--</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>g</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;2nd_Key\nIMMDeviceCollection.\nGetCount()&#34;</span><span style=color:#ce5c00;font-weight:700>):</span><span style=color:#000;font-weight:700>::</span><span style=color:#5c35cc;font-weight:700>css_keypoint</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>classDef</span> <span style=color:#204a87;font-weight:700>css_keypoint</span> <span style=color:#204a87;font-weight:700>fill</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#000;font-weight:700>#</span><span style=color:#000>6a0035</span><span style=color:#ce5c00;font-weight:700>,</span><span style=color:#204a87;font-weight:700>stroke</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#000;font-weight:700>#</span><span style=color:#000>333</span><span style=color:#ce5c00;font-weight:700>,</span><span style=color:#204a87;font-weight:700>stroke-width</span><span style=color:#000;font-weight:700>:</span><span style=color:#5c35cc;font-weight:700>1px</span>
</span></span></code></pre></div><p>  now node &ldquo;d&rdquo; & &ldquo;g&rdquo; will be set to special css pattern</p></details><details><summary>002. summary of all kinds of shapes in mermaid</summary><h5 id=a-方形square><strong>a. 方形（Square）</strong></h5><p>Represents ordinary nodes or process steps.</br>Denoted by &ldquo;[]&rdquo;.</br></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>A[Ordinary node or process]
</span></span></code></pre></div><h5 id=b-圆形round><strong>b. 圆形（Round）</strong></h5><p>Represents start or end points.</br>Denoted by &ldquo;()&rdquo; .</br></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>A((Start or end))
</span></span></code></pre></div><h5 id=c-菱形diamond><strong>c. 菱形（Diamond）</strong></h5><p>Represents decision points or conditions.</br>Denoted by &ldquo;{}&rdquo;.</br></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>A{Decision or condition}
</span></span></code></pre></div><h5 id=d-流程flowchart><strong>d. 流程（Flowchart）</strong></h5><p>Represents general flowchart nodes with specific shapes.</br></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>A&gt;Flowchart node]
</span></span></code></pre></div><h5 id=e-矩形rectangle><strong>e. 矩形（Rectangle）</strong></h5><p>Represents emphasized nodes or specific operation steps.</br>Denoted by &ldquo;()&rdquo; .</br></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>A(Rectangle node)
</span></span></code></pre></div></details><details><summary>003.how to show parentheses in mermaid</summary><p>use <code>quotes</code> to embrace the parentheses</p><pre tabindex=0><code>A0((start)) --&gt; A{&#34;CoCreateInstance()&#34;\nCreate COM Object}
</code></pre></details><details><summary>004.</summary></details><details><summary>005.</summary></details></div><div class=td-content style=page-break-before:always><h1 id=pg-105e49fe3e617dd43df432c820b4c853>005_003_Grp_Markdown</h1><div class="td-byline mb-4"><time datetime=2024-07-17 class=text-body-secondary>2024年07月17日</time></div></div><div class=td-content><h1 id=pg-647c6c0cb1d84553bc784d7939287457>Markdown使用技巧</h1><div class="td-byline mb-4"><time datetime=2024-07-17 class=text-body-secondary>2024年07月17日</time></div><details><summary>001.how to collapse a piece of code</summary><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>details</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>summary</span><span style=color:#000;font-weight:700>&gt;</span>The title you wanna fill in<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>summary</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  the content you wanna put it in
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>details</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div></details><details><summary>002. how to show svg (legally and fix method)</summary><h5 id=normal-way>normal way</h5><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>![<span style=color:#204a87;font-weight:700>_EnumerateAudioEndpoints</span>](<span style=color:#c4a000>/2024/July/17/flowchart_of_EnumerateEndpoint.svg</span>)
</span></span></code></pre></div><h5 id=abnormal-way>abnormal way</h5><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>iframe</span> <span style=color:#c4a000>src</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;/2024/July/17/flow_no_zoom.svg&#34;</span> <span style=color:#c4a000>width</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;900&#34;</span> <span style=color:#c4a000>height</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;2000&#34;</span> <span style=color:#c4a000>style</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;border:none; overflow:scroll; background: #333333;&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>iframe</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><p>now this method is not very good because when we scroll or zoom in and out the page, the svg shows not sync with the mother page.</p></details><h2 id=003无线电功率单位dbm和w的转换公式><code>003.无线电功率单位dBm和W的转换公式</code></h2><h3 id=理解这两个公式>理解这两个公式</h3><p>这两个公式是用于在dBm（分贝毫瓦）和mW（毫瓦）之间进行功率转换的。</p><ul><li><strong>dBm</strong> 是一个对数单位，表示功率相对于1毫瓦的比值，经过分贝转换。</li><li><strong>mW</strong> 是一个线性单位，直接表示功率的大小。</li></ul><h3 id=公式的专业化表达>公式的专业化表达</h3><p>我们可以通过以下方式来使这两个公式看起来更加专业：</p><p><strong>1. 使用更正式的符号表示:</strong></p><ul><li><strong>功率</strong> 一般用大写字母P表示。</li><li><strong>dBm</strong> 可以直接写成dBm，或者用符号PdBm表示。</li><li><strong>mW</strong> 可以直接写成mW，或者用符号PmW表示。</li></ul><p><strong>2. 加入单位:</strong></p><ul><li>在公式中明确标出单位，可以使公式更加严谨。</li><li>功率的单位可以是瓦特（W）或毫瓦（mW）。</li></ul><p><strong>3. 使用更规范的数学符号:</strong></p><ul><li>对数函数可以用log₁₀表示，表示以10为底的对数。</li></ul><h3 id=改进后的公式>改进后的公式</h3><p>根据上述建议，我们可以将这两个公式改写为以下形式：</p><ul><li><strong>dBm转mW:</strong><pre tabindex=0><code>P_{mW} = 10^{(P_{dBm} / 10)} mW
</code></pre></li><li><strong>mW转dBm:</strong><pre tabindex=0><code>P_{dBm} = 10 \log_{10}(P_{mW}/1mW) dBm
</code></pre></li></ul><h3 id=进一步的专业化处理>进一步的专业化处理</h3><ul><li><strong>公式的解释:</strong> 可以为这两个公式添加简短的文字说明，解释它们的作用和物理意义。</li><li><strong>公式的推导:</strong> 如果需要，可以给出这两个公式的推导过程，以帮助读者更好地理解。</li><li><strong>公式的应用场景:</strong> 可以列举一些这两个公式在实际工程中的应用场景，以增加公式的实用性。</li></ul><h3 id=示例>示例：</h3><pre tabindex=0><code>**功率转换公式**

在电子工程中，功率常用dBm和mW两种单位来表示。为了在两种单位之间进行转换，可以使用以下公式：

* **dBm转mW:**
</code></pre><p>P_{mW} = 10^{(P_{dBm} / 10)} mW</p><pre tabindex=0><code>其中，PdBm表示以dBm为单位的功率，PmW表示以mW为单位的功率。

* **mW转dBm:**
</code></pre><p>P_{dBm} = 10 \log_{10}(P_{mW}/1mW) dBm</p><pre tabindex=0><code>
**公式解释:**

* dBm是一个对数单位，表示功率相对于1毫瓦的比值，经过分贝转换。
* mW是一个线性单位，直接表示功率的大小。

**应用场景:**

* 无线通信系统中，用于计算发射功率、接收功率和信号强度。
* 音频系统中，用于测量音频设备的输出功率。
* 射频电路设计中，用于分析信号的功率增益和衰减。
</code></pre><h2 id=004-set-svg-file-as-preview><code>004. Set SVG file as preview</code></h2><p>correct form:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>![<span style=color:#204a87;font-weight:700>TimeZoneMap</span>](<span style=color:#c4a000>/2024/August/12/TimeZoneOfTheWorld.svg</span>)
</span></span></code></pre></div><p>if without &lsquo;!&rsquo; like below, the svg will be displayed as a url</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>[<span style=color:#204a87;font-weight:700>TimeZoneMap</span>](<span style=color:#c4a000>/2024/August/12/TimeZoneOfTheWorld.svg</span>)
</span></span></code></pre></div><details><summary>004.</summary></details></div><div class=td-content style=page-break-before:always><h1 id=pg-1731944405ae14ffc155b48875593724>Time Zone Map</h1><div class="td-byline mb-4"><time datetime=2024-08-12 class=text-body-secondary>2024年08月12日</time></div><p><img src=/2024/August/12/TimeZoneOfTheWorld.svg alt=TimeZoneMap></p></div><div class=td-content style=page-break-before:always><h1 id=pg-1f5e41c2a6e8da01fe68a0105f93761f>DevOps</h1><div class="td-byline mb-4"><time datetime=2025-07-29 class=text-body-secondary>2025年07月29日</time></div></div><div class=td-content><h1 id=pg-24bca13ef08aff7367527ad565e07f5a>Ubuntu</h1><div class="td-byline mb-4"><time datetime=2024-07-19 class=text-body-secondary>2024年07月19日</time></div></div><div class=td-content><h1 id=pg-56b418746454a34b9183df21a6be107c>Grub Setting</h1><div class="td-byline mb-4"><time datetime=2024-07-19 class=text-body-secondary>2024年07月19日</time></div><h2 id=001-grub-set-bakcground><strong><code>001. Grub set Bakcground</code></strong></h2><div style=padding-left:2em><h3 id=a-确认背景图片路径和格式>a. 确认背景图片路径和格式</h3><ol><li><p><strong>检查图片路径和权限</strong>：
确保图片路径正确且具有正确的权限。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls -l /boot/grub/xxx.JPG
</span></span></code></pre></div><p>输出应类似于：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>-rw-r--r-- 1 root root 123456 Jul 16 12:34 /boot/grub/xxx.JPG
</span></span></code></pre></div><p>如果权限不正确，可以运行以下命令进行修改：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo chmod <span style=color:#0000cf;font-weight:700>644</span> /boot/grub/xxx.JPG
</span></span><span style=display:flex><span>sudo chown root:root /boot/grub/xxx.JPG
</span></span></code></pre></div></li><li><p><strong>legal format</strong>:
图片应该是 JPG、PNG 或 TGA 格式。</p></li><li><p><strong>确认 GRUB 支持的分辨率</strong>：
在 GRUB 命令行界面（启动时按 <code>c</code> 键进入）运行 <code>vbeinfo</code> 命令以查看支持的分辨率。选择一个适合你屏幕的分辨率。</p></li></ol><h3 id=b-更新-grub-配置文件>b. 更新 GRUB 配置文件</h3><ol start=4><li><p><strong>编辑 GRUB 配置文件</strong>：
打开 <code>/etc/default/grub</code> 文件进行编辑：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano /etc/default/grub
</span></span></code></pre></div><p>确保以下配置行存在，并且取消注释（去掉行首的 <code>#</code>）：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#c4a000>GRUB_BACKGROUND</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>/boot/grub/xxx.JPG</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>GRUB_TERMINAL</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>gfxterm</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>GRUB_GFXMODE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>1024x768       # 修改为你希望的分辨率</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>GRUB_GFXPAYLOAD_LINUX</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>keep</span>
</span></span></code></pre></div></li><li><p><strong>更新 GRUB 配置</strong>：
保存并关闭文件后，运行以下命令以应用更改：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo update-grub
</span></span></code></pre></div></li><li><p><strong>重启系统</strong>：
重启系统，查看 GRUB 菜单是否显示背景图片，并且文本大小是否合适。</p></li></ol><h3 id=c-调整字体大小>c. 调整字体大小</h3><p>如果分辨率设置后仍然觉得字体太小，可以调整 GRUB 字体大小。</p><ol><li><p><strong>生成自定义字体</strong>：
下载并安装 <code>grub2-common</code> 包（如果尚未安装）：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install grub2-common
</span></span></code></pre></div><p>生成适合的字体文件：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo grub-mkfont --output<span style=color:#ce5c00;font-weight:700>=</span>/boot/grub/custom_font.pf2 --size<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>24</span> /usr/share/fonts/truetype/dejavu/DejaVuSansMono.ttf
</span></span></code></pre></div></li><li><p><strong>配置 GRUB 使用自定义字体</strong>：
编辑 <code>/etc/default/grub</code> 文件，添加以下行：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#c4a000>GRUB_FONT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>/boot/grub/custom_font.pf2</span>
</span></span></code></pre></div></li><li><p><strong>更新 GRUB 配置</strong>：
保存并关闭文件后，运行以下命令以应用更改：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo update-grub
</span></span></code></pre></div></li><li><p><strong>重启系统</strong>：
重启系统后，GRUB 菜单应该显示使用自定义字体和背景图片。</p></li></ol><p>通过以上步骤，你应该能够配置 GRUB 菜单使用自定义背景图片和适当的分辨率/字体大小。如果你有任何进一步的问题，请随时提问。</p></div><h2 id=001-grub-set-bakcground-1><strong><code>001. Grub set Bakcground</code></strong></h2></div><div class=td-content style=page-break-before:always><h1 id=pg-30fa633388e6692299f8b65f420a392e>Docker</h1><div class="td-byline mb-4"><time datetime=2024-07-19 class=text-body-secondary>2024年07月19日</time></div></div><div class=td-content><h1 id=pg-6bf0f8307b827e76126deab3e06238d8>Docker使用</h1><div class="td-byline mb-4"><time datetime=2024-07-10 class=text-body-secondary>2024年07月10日</time></div></div><div class=td-content style=page-break-before:always><h1 id=pg-623e7f449e7aabdc71b88b6a227f5349>NFS(Net File System)</h1><div class="td-byline mb-4"><time datetime=2025-07-29 class=text-body-secondary>2025年07月29日</time></div><h1 id=nfs-挂载问题深度复盘与标准工作流建立>NFS 挂载问题深度复盘与标准工作流建立</h1><h2 id=前言>前言</h2><p>本文档旨在复盘一次在嵌入式 BusyBox 系统 (<code>david</code> 主机) 挂载 Ubuntu NFS 服务器 (<code>Anastasia-Ubuntu</code>) 时，反复出现 <code>Connection refused</code> 错误的排查过程。最终，通过添加 <code>-o nolock</code> 挂载选项成功解决了问题。本文将详细分析失败的根本原因，并建立一套标准的 NFS 服务端与客户端配置工作流，为未来的部署提供可靠参考。</p><hr><h2 id=part-1-connection-refused-问题深度复盘>Part 1: <code>Connection refused</code> 问题深度复盘</h2><h3 id=11-问题现象>1.1 问题现象</h3><p>在嵌入式客户端 (<code>david</code>) 上，尝试使用标准命令挂载 NFS 服务器 (<code>192.168.3.164</code>) 上的共享目录，始终遭遇 <code>Connection refused</code> 错误，即便是修正了多次语法错误之后。</p><p><strong>关键日志复现：</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>root@david:/mnt<span style=color:#ce5c00;font-weight:700>]</span><span style=color:#8f5902;font-style:italic># mount -t nfs 192.168.3.164:/mnt/nfs/rv1126 /mnt/nfs</span>
</span></span><span style=display:flex><span>mount: mounting 192.168.3.164:/mnt/nfs/rv1126 on /mnt/nfs failed: Connection refused
</span></span></code></pre></div><p>然而，当添加 <code>-o nolock</code> 选项后，挂载立即成功。</p><p><strong>成功挂载日志：</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>root@david:/mnt<span style=color:#ce5c00;font-weight:700>]</span><span style=color:#8f5902;font-style:italic># mount -t nfs 192.168.3.164:/mnt/nfs/rv1126 -o nolock /mnt/nfs</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>root@david:/mnt<span style=color:#ce5c00;font-weight:700>]</span><span style=color:#8f5902;font-style:italic># df -h</span>
</span></span><span style=display:flex><span>Filesystem                Size      Used Available Use% Mounted on
</span></span><span style=display:flex><span>/dev/root                 2.9G    751.8M      2.1G  26% /
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>192.168.3.164:/mnt/nfs/rv1126
</span></span><span style=display:flex><span>                        453.2G    236.4G    193.8G  55% /mnt/nfs
</span></span></code></pre></div><h3 id=12-排查之路排除所有常规嫌犯>1.2 排查之路：排除所有“常规嫌犯”</h3><p>在定位到 <code>-o nolock</code> 之前，我们进行了地毯式的排查，逐步排除了所有常见的 NFS 故障原因。</p><ul><li><strong>服务器NFS服务</strong>: 通过在服务器上执行 <code>rpcinfo -p localhost</code>，确认了 NFS v3 和 v4 服务，以及 <code>mountd</code> 服务均在正常运行并监听网络端口。
<strong>关键日志证据</strong>:<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>james@Anastasia-Ubuntu:~$ rpcinfo -p localhost
</span></span><span style=display:flex><span>   program vers proto   port  service
</span></span><span style=display:flex><span>   ...
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>100005</span>    <span style=color:#0000cf;font-weight:700>3</span>   tcp  <span style=color:#0000cf;font-weight:700>13025</span>  mountd
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>100003</span>    <span style=color:#0000cf;font-weight:700>3</span>   tcp   <span style=color:#0000cf;font-weight:700>2049</span>  nfs
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>100003</span>    <span style=color:#0000cf;font-weight:700>4</span>   tcp   <span style=color:#0000cf;font-weight:700>2049</span>  nfs
</span></span><span style=display:flex><span>   ...
</span></span></code></pre></div></li><li><strong>服务器防火墙</strong>: 通过 <code>sudo ufw status</code> 确认防火墙处于 <code>inactive</code> 状态，不存在网络拦截。</li><li><strong>服务器导出配置 (<code>/etc/exports</code>)</strong>: 确认了共享目录已正确导出给所有客户端 (<code>*</code>)，并为兼容嵌入式设备添加了 <code>insecure</code> 选项。</li><li><strong>客户端内核支持</strong>: 通过在客户端执行 <code>cat /proc/filesystems</code>，确认了内核已编译 <code>nfs</code> 文件系统支持。
<strong>关键日志证据</strong>:<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>root@david:/root<span style=color:#ce5c00;font-weight:700>]</span><span style=color:#8f5902;font-style:italic># cat /proc/filesystems</span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>nodev   nfs
</span></span><span style=display:flex><span>...
</span></span></code></pre></div></li><li><strong>客户端功能完好性</strong>: 一个决定性的线索是“客户端 <code>david</code> 可以成功挂载其他PC的NFS共享”，这证明了客户端的 NFS 功能本身没有问题。</li></ul><p>所有常规检查都显示“一切正常”，但问题依旧，这迫使我们将问题焦点转向 NFS 协议的更深层次细节。</p><h3 id=13-核心原因解析-o-nolock-为何是关键>1.3 核心原因解析：<code>-o nolock</code> 为何是关键？</h3><p><strong>根本原因在于客户端与服务器之间关于“文件锁”功能的通信失败。</strong></p><ol><li><p><strong>文件锁 (File Locking) 机制</strong>:
NFS 协议为了保证多客户端访问同一文件时的数据一致性，实现了一套文件锁机制。这个机制依赖于一个独立的协议——<strong>NLM (Network Lock Manager)</strong>。一个标准的 NFS 挂载流程，除了建立数据传输通道，还需要客户端与服务器的“锁管理器”服务（<code>nlockmgr</code>）进行“握手”，以便后续处理文件锁请求。</p></li><li><p><strong>客户端的功能缺失</strong>:
我们的客户端 <code>david</code> 是一个高度精简的 BusyBox 系统。为了极致地压缩体积，它的 NFS 客户端实现很可能<strong>只包含了核心的数据读写功能，而阉割了完整的 NLM 文件锁客户端模块</strong>。</p></li><li><p><strong>失败的“握手”</strong>:
当 <code>david</code> 尝试挂载时，它遵循标准流程。在数据通道建立后，它尝试与服务器的 <code>nlockmgr</code> 服务进行通信。但由于自身功能不完整，它发送的请求可能是服务器无法理解的畸形请求。服务器的 RPC 系统在收到这个无效的请求后，无法处理，因此<strong>主动拒绝了这次连接 (<code>Connection refused</code>)</strong>，导致整个挂载操作失败。</p></li><li><p><strong><code>-o nolock</code> 的作用</strong>:
这个选项是一个指令，它告诉客户端内核：“<strong>在本次挂载中，完全禁用 NLM 文件锁协议。</strong>” 内核在收到这个指令后，会<strong>跳过</strong>与服务器 <code>nlockmgr</code> 服务进行通信的步骤。由于这个必然失败的步骤被绕过了，挂载流程的其他部分得以顺利完成，最终挂载成功。</p></li></ol><p><strong>结论</strong>: <code>Connection refused</code> 并非源于网络不通或权限不足，而是由于精简的嵌入式客户端无法完成标准 NFS 挂载流程中的“文件锁协商”步骤，从而被功能完善的服务器所拒绝。<code>-o nolock</code> 选项是解决此类因客户端功能不完整而导致挂载失败问题的关键。</p><hr><h2 id=part-2-标准-nfs-搭建工作流-workflow>Part 2: 标准 NFS 搭建工作流 (Workflow)</h2><p>以下工作流旨在提供一个可靠、可复现的 NFS 环境搭建流程，特别考虑了将嵌入式设备作为客户端的场景。</p><h3 id=21-服务端-server-配置---ubuntudebian-示例>2.1 服务端 (Server) 配置 - Ubuntu/Debian 示例</h3><h4 id=步骤-1-安装-nfs-服务>步骤 1: 安装 NFS 服务</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install nfs-kernel-server
</span></span></code></pre></div><h4 id=步骤-2-创建并准备共享目录>步骤 2: 创建并准备共享目录</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 示例：创建一个名为 nfs_share 的共享目录</span>
</span></span><span style=display:flex><span>sudo mkdir -p /mnt/nfs_share
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 赋予宽松的权限，确保客户端有权访问</span>
</span></span><span style=display:flex><span>sudo chown nobody:nogroup /mnt/nfs_share
</span></span><span style=display:flex><span>sudo chmod <span style=color:#0000cf;font-weight:700>777</span> /mnt/nfs_share
</span></span></code></pre></div><h4 id=步骤-3-配置导出文件-etcexports-核心>步骤 3: 配置导出文件 <code>/etc/exports</code> (核心)</h4><p>使用文本编辑器打开 <code>/etc/exports</code>：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano /etc/exports
</span></span></code></pre></div><p>添加一行来定义共享规则。以下是推荐的配置，兼容性强且适合开发环境：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/mnt/nfs_share   *<span style=color:#ce5c00;font-weight:700>(</span>rw,sync,no_subtree_check,no_root_squash,insecure<span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p><strong>选项解析与备注:</strong></p><ul><li><code>/mnt/nfs_share</code>: 要共享的目录的<strong>绝对路径</strong>。</li><li><code>*</code>: 允许来自任何 IP 地址的客户端访问。为提高安全性，可替换为特定网段，如 <code>192.168.3.0/24</code>。</li><li><code>rw</code>: 允许读写操作。</li><li><code>sync</code>: 同步写入数据（而不是异步 <code>async</code>），数据更安全，不易丢失。</li><li><code>no_subtree_check</code>: 禁用子树检查，可以提高性能和稳定性。</li><li><code>no_root_squash</code>: 允许客户端的 <code>root</code> 用户在挂载点上拥有 <code>root</code> 权限。<strong>对于嵌入式开发和调试至关重要。</strong></li><li><strong><code>insecure</code></strong>: <strong>【备注1: 嵌入式设备兼容性关键】</strong> 允许来自非特权端口（>1024）的客户端连接。许多精简的嵌入式 NFS 客户端无法使用特权端口，<strong>缺少此选项是导致 <code>Connection refused</code> 的常见原因</strong>。</li></ul><h4 id=步骤-4-使配置生效>步骤 4: 使配置生效</h4><p>每次修改 <code>/etc/exports</code> 后，必须执行此命令刷新配置：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo exportfs -ra
</span></span></code></pre></div><p>为确保所有服务都已更新，可以重启 NFS 服务：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl restart nfs-kernel-server
</span></span></code></pre></div><h4 id=步骤-5-检查防火墙-如果开启>步骤 5: 检查防火墙 (如果开启)</h4><p>如果服务器防火墙 <code>ufw</code> 处于激活状态，需要添加入站规则：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 查看状态</span>
</span></span><span style=display:flex><span>sudo ufw status
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 允许整个局域网的 NFS 连接 (推荐)</span>
</span></span><span style=display:flex><span>sudo ufw allow from 192.168.3.0/24 to any port nfs
</span></span></code></pre></div><h3 id=22-客户端-client-配置---以嵌入式-david-为例>2.2 客户端 (Client) 配置 - 以嵌入式 <code>david</code> 为例</h3><h4 id=步骤-1-确认客户端基础能力>步骤 1: 确认客户端基础能力</h4><p>在执行挂载前，进行快速诊断，确保基本条件满足。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 1. 检查内核是否支持 NFS</span>
</span></span><span style=display:flex><span>cat /proc/filesystems <span style=color:#000;font-weight:700>|</span> grep nfs
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 预期输出应包含 &#34;nfs&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 2. 检查网络连通性</span>
</span></span><span style=display:flex><span>ping &lt;服务器IP地址&gt;
</span></span></code></pre></div><h4 id=步骤-2-创建本地挂载点>步骤 2: 创建本地挂载点</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p /mnt/server_share
</span></span></code></pre></div><h4 id=步骤-3-执行挂载命令-核心>步骤 3: 执行挂载命令 (核心)</h4><p>使用包含兼容性选项的完整命令进行挂载：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount -t nfs -o <span style=color:#000>nfsvers</span><span style=color:#ce5c00;font-weight:700>=</span>3,nolock &lt;服务器IP&gt;:&lt;服务器共享目录绝对路径&gt; &lt;本地挂载点&gt;
</span></span></code></pre></div><p><strong>具体示例:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount -t nfs -o <span style=color:#000>nfsvers</span><span style=color:#ce5c00;font-weight:700>=</span>3,nolock 192.168.3.164:/mnt/nfs_share /mnt/server_share
</span></span></code></pre></div><p><strong>选项解析与备注:</strong></p><ul><li><code>-t nfs</code>: 明确指定文件系统类型为 NFS。</li><li><code>-o nfsvers=3</code>: <strong>【备注2: 嵌入式设备兼容性关键】</strong> 明确指定使用 NFSv3 协议。嵌入式客户端对更复杂的 NFSv4 协议支持可能不完善，强制使用 v3 可以避免很多认证和协议协商问题。</li><li><code>-o nolock</code>: <strong>【备注3: 嵌入式设备兼容性关键】</strong> 禁用文件锁（NLM）协议。如本次复盘所示，精简的客户端可能缺少 NLM 功能，<strong>此选项是解决因锁协商失败而导致 <code>Connection refused</code> 的终极手段</strong>。</li></ul><h4 id=步骤-4-验证挂载>步骤 4: 验证挂载</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 1. 检查挂载列表</span>
</span></span><span style=display:flex><span>df -h
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 或</span>
</span></span><span style=display:flex><span>mount
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 2. 检查是否能读写文件</span>
</span></span><span style=display:flex><span>ls /mnt/server_share
</span></span><span style=display:flex><span>touch /mnt/server_share/test_file_from_david
</span></span></code></pre></div><h4 id=步骤-5-设置开机自动挂载-可选>步骤 5: 设置开机自动挂载 (可选)</h4><p>如果需要设备开机后自动挂载，编辑 <code>/etc/fstab</code> 文件。
<strong>注意</strong>: 嵌入式系统的 <code>/etc/fstab</code> 可能不存在或位于只读分区，需谨慎操作。</p><pre tabindex=0><code># &lt;服务器IP&gt;:&lt;共享目录&gt;  &lt;本地挂载点&gt;  nfs  &lt;选项&gt;  0  0
192.168.3.164:/mnt/nfs_share  /mnt/server_share  nfs  nfsvers=3,nolock,auto,bg  0  0
</code></pre><ul><li><code>auto</code>: 系统启动时自动挂载。</li><li><code>bg</code>: 如果首次挂载失败（如网络未就绪），则在后台继续尝试。对嵌入式设备非常有用。</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-73335b52801880d4ba79e3b3a43f291d>DevOps Definition</h1><div class="td-byline mb-4"><time datetime=2024-07-19 class=text-body-secondary>2024年07月19日</time></div><h3 id=devops的定义><a href="https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;opi=89978449&amp;url=https://aws.amazon.com/devops/what-is-devops/&amp;ved=2ahUKEwiOs9yZ-7GHAxUTsFYBHeRCBgcQFnoECBoQAw&amp;usg=AOvVaw2hGSM1UgKYzZ4WqCEEg1ET" target=_blank rel=noopener>DevOps的定义</a></h3><p>您所说的 &ldquo;开发和操作环境达到一致&rdquo; 是对DevOps的一个简单理解，但DevOps的概念要比这广泛和深入得多。最权威的定义之一来自DevOps研究和评估（DORA，DevOps Research and Assessment）和一些行业权威机构，如亚马逊AWS、谷歌云和微软Azure。</p><p><strong>DevOps</strong> 是一种结合软件开发（Dev）和IT运营（Ops）的方法，其目标是通过自动化、持续集成和持续交付（CI/CD）等手段，加速软件开发和发布的速度，提高软件质量和稳定性。DevOps强调跨职能团队之间的协作和沟通，包括开发人员、质量保证人员、运营人员和其他相关人员。</p><p>一个较为权威的定义来自于亚马逊AWS：</p><blockquote><p>&ldquo;DevOps is the combination of cultural philosophies, practices, and tools that increases an organization’s ability to deliver applications and services at high velocity: evolving and improving products at a faster pace than organizations using traditional software development and infrastructure management processes.&rdquo;</p></blockquote><p>翻译成中文：</p><blockquote><p>“DevOps 是一种结合了文化理念、实践和工具的方法，能够提高组织以高速度交付应用程序和服务的能力：以比采用传统软件开发和基础设施管理流程的组织更快的速度演变和改进产品。”</p></blockquote><h3 id=grub的配置是否属于devops范围>GRUB的配置是否属于DevOps范围</h3><p>严格来说，GRUB（GRand Unified Bootloader）的配置可以算作系统运维（Operations）的一部分，而运维是DevOps的一部分。因此，GRUB的配置是涵盖在DevOps范围内的。</p><p>在具体的DevOps实践中，涉及系统配置和管理的任务，比如GRUB配置、系统引导加载程序配置、内核参数调整等，通常属于运维团队的职责。这些任务在DevOps环境下可能会通过基础设施即代码（Infrastructure as Code, IaC）工具来自动化，以确保环境的一致性和可重复性。例如，使用Ansible、Puppet或Chef等工具可以自动化配置GRUB等系统设置。</p><p>总结：</p><ul><li><strong>DevOps的定义</strong>更广泛，包括文化、实践和工具的结合，旨在加快软件交付和提高质量。</li><li><strong>GRUB的配置</strong>属于系统运维的一部分，因此可以算作DevOps范围的一部分，尤其是在自动化和基础设施管理的上下文中。</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-f4ac30641eb1e1b39472568df4b9bdbf>007_Grp_Quantum</h1><div class="td-byline mb-4"><time datetime=2024-07-19 class=text-body-secondary>2024年07月19日</time></div></div><div class=td-content><h1 id=pg-4460a55fd3386afe69049cae20d1009b>Quantum</h1><div class="td-byline mb-4"><time datetime=2024-07-19 class=text-body-secondary>2024年07月19日</time></div><p><a href="https://youtu.be/rBm73zxSL8U?si=3Q7FuuCCgTLttpom" target=_blank rel=noopener>视频链接所在</a></p><h3 id=1-terms>1. Terms</h3><h4 id=quantum-supermacy>Quantum Supermacy</h4><p>量子计算机在该领域实现对传统计算机的碾压</p><h4 id=superposition>Superposition</h4><p>中文翻译作“量子叠加”
粒子在量子叠加态下，可以同时有多个值</p><h4 id=entanglement>Entanglement</h4><p>中文翻译作“量子纠缠”
两个粒子，其中一个的状态被改变，另一个例子的状态也立刻被改变。
也会称为“相干性”
2020年7月20日，日本东北大学&悉尼威尔士大学，把相干性（量子比特维持量子态的时间）延长到10ms（毫秒）
已经比过去提升1000倍</p><p>需要同时处理N（上万遍或更多）遍同一个问题，最后统计结果得出数值
因此，一个53qubit的计算机，实际有效的量子比特可能是12qubit，因为还有大量的qubits需要进行冗余的计算，以防止某一个qubit因为波函数坍缩而失去计算能力</p><p>波函数坍塌的现象就叫做“退相干”
技术奇点：
因为宇宙射线无法在地表被屏蔽，所以宇宙射线会造成退相干问题。</p><h4 id=波函数坍缩>波函数坍缩</h4><p>薛定谔的猫
受到探测或宇宙射线的干扰，就立刻会让粒子产生波函数坍缩，得到一个固定的结果，即，不是1就是0.</p><h3 id=2-方案>2. 方案</h3><div style=padding-left:2em><h4 id=超导量子计算机>超导量子计算机</h4><p>a. 需要：
需要超低温
b. 公司
google & ibm</p><h4 id=拓扑>拓扑</h4><h4 id=离子阱电子计算机>离子阱电子计算机</h4><h4 id=光量子计算机>光量子计算机</h4><p>中国大陆潘建伟团队</p></div><h3 id=3-未来的可能>3. 未来的可能</h3><h4 id=a-太空制造量子计算机>a. 太空制造量子计算机</h4><h4 id=b-密码学>b. 密码学</h4><pre><code>需要全新的密码算法
</code></pre><h4 id=c-ai人工智能>c. AI人工智能</h4><pre><code>计算力的蓬勃发展，
</code></pre><h4 id=d-短期天气预报>d. 短期天气预报</h4><pre><code>极其精准
</code></pre><h4 id=e-生物医疗>e. 生物医疗</h4></div><div class=td-content style=page-break-before:always><h1 id=pg-0856e343750cb09f85d1ca37f55d4fc4>008_Grp_Compiler_Linker</h1><div class="td-byline mb-4"><time datetime=2024-08-01 class=text-body-secondary>2024年08月01日</time></div></div><div class=td-content><h1 id=pg-f38716843109fdbfba0dcc3c87688a3e>QtCreator下的MinGW和MSVC编译器</h1><div class="td-byline mb-4"><time datetime=2024-08-01 class=text-body-secondary>2024年08月01日</time></div><h2 id=problem><strong>Problem</strong></h2><p>My project is running at the kit of MSVC When it was switched to MinGW Everything weired</p><p>call the dll, but no correct response happens. I tried to delete dllls all, then my Qt binary exe returns error that &ldquo;&mldr;dlls not found..&rdquo;</p><p><img src=/2024/August/1/dlls_not_found.png alt=错误提示1></p><p>so it told me implicitly that Qt exe did not call wrong dlls or buffers potentially.</p><p>and i inserted many debug std::count msgs in dll, but i could not even find them one at Qt exe console screen.</p><h2 id=reason><strong>Reason</strong></h2><p>I checked as many as possible aspect of my project, but nothing appeared in front of me. Until i realized that i changed this project`s kit from MSVC original to MinGW used to be for the reason of debugging other modules.</p><p><img src=/2024/August/1/kits.png alt="my qt kits"></p><p><img src=/2024/August/1/compilers_mingw.png alt=mingw></p><p><img src=/2024/August/1/compilers_msvc++.png alt=msvc></p><h2 id=solution><strong>Solution</strong></h2><h2 id=conclusion><strong>Conclusion</strong></h2></div><div class=td-content style=page-break-before:always><h1 id=pg-dab315c357b662cfb6579928147c649b>Linux</h1><div class="td-byline mb-4"><time datetime=2025-07-25 class=text-body-secondary>2025年07月25日</time></div></div><div class=td-content><h1 id=pg-3c26aa984b30a1889c260accbceee96f>GMAC Bring Up Work Flow</h1><div class="td-byline mb-4"><time datetime=2025-07-25 class=text-body-secondary>2025年07月25日</time></div><h2 id=1-从原理图判断是哪一个gmac>1. 从原理图判断是哪一个GMAC</h2><ul><li>从sdk提供的默认dts里就能够发现, gmac有两个, gmac0和gmac1.</li></ul><h3 id=11-此刻去找硬件工程师给的原理图搜索一下gmac-看看他用的是gmac1还是gmac0>1.1 <strong>此刻去找硬件工程师给的原理图,搜索一下gmac, 看看他用的是gmac1还是gmac0</strong></h3><p>具体如何确定,还得看原理图里使用的引脚, 跟dts里的哪一个gmac node的配置比较相似.</p><p>具体文件是在kernel/arch/arm64/boot/dts/rockchip/rk3568-pinctrl.dtsi.</p><p>在制作bsp(上一流程)的时候,就有分层了,这份dtsi属于最底下的chip-level.
这份文件里定义了gmac1的具体子节点, 每一个子节点对应的pins是哪些,例如</p><p><img src=/2025/gmac-rk3568-bring-up/dts-gmac1m1_miim.png alt></p><p>具体到gmac1的时候,又分成m0和m1,我所截取的图片就是m1的部分.为何知道要用m1呢?
可以参考原理图的cpu部分:</p><p><img src=/2025/gmac-rk3568-bring-up/rk3568-gmac-pins-top-view.png alt></p><p>我特别截取的就是这次使用到的gmac模块, 硬件同事在每一个引脚名字的后面都加了M1, 也在提醒我们,这次用到的就是GMAC1的M1.</p><h3 id=12-其实为什么硬件这边能够和dts对应上呢>1.2 <strong>其实,为什么硬件这边能够和dts对应上呢?</strong></h3><p>应该是硬件同事在画图的时候,就是直接参考了Chip Manufacture给的用法. 分成GMAC1和GMAC0, GMAC1又分成M0和M1. 我盲猜, 如果我们硬是要修改, 用一个hybrid version的GMAC2, 也不是完全不可能, 但是dts这边就得完全重新做.一个一个引脚自己写好,就像kernel/arch/arm64/boot/dts/rockchip/rk3568-pinctrl.dtsi所作的那样.</p><h3 id=13-总结一下>1.3 <strong>总结一下:</strong></h3><p>看原理图的symbols, 只是一个tips, 并不能最终确定.
确定的方式是对比dts中chip-level的dts include中的pins configs. 它们必须是对应的才行.</p><h2 id=2-从原理图判断是时钟模式-25m和125m分别是谁给的如何给的>2. 从原理图判断是时钟模式, 25M和125M分别是谁给的,如何给的</h2><h3 id=21-先看原理图的phy部分><strong>2.1 先看原理图的PHY部分</strong></h3><p><img src=/2025/gmac-rk3568-bring-up/yt8521sc-clock-related-three-pins.png alt></p><p>这里能看见它是XTAL_I接地了, XTAL_O和CLKOUT还不知道接到哪里去</p><h3 id=22-看phy的datasheet><strong>2.2 看PHY的DataSheet</strong></h3><p><img src=/2025/gmac-rk3568-bring-up/yt8521sc-clock-pins-in-datasheet.png alt></p><h4 id=221-先看no44>2.2.1 先看No.44</h4><p>这里特别写, CLKOUT是output类型的, 而且如果不需要输出时钟给MAC的话,这个pin需要float.</p><p>而此处并没有float, 因此刚才原理图上一定是输出到MAC提供125MHZ时钟了.</p><h4 id=222-再看no45>2.2.2 再看No.45</h4><p>这里介绍, 如果XTAL_O有外部时钟提供25MHZ, 那XTAL_I就要保持接地.
所以从原理图里XTAL_I接地来看, 应该是外部有25MHZ提供给PHY了.</p><p>因此,更进一步去跟进到底接入了什么引脚, 就可以了.</p><h2 id=3-进入dts目录-找到入口的那个dts-屏蔽多余的设备-enable目标设备>3. 进入dts目录, 找到入口的那个dts, 屏蔽多余的设备, enable目标设备</h2><p>因为在我的这个板子上, 是用了GMAC1M1的,所以GMAC0就可以关闭了.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span>/*
</span></span><span style=display:flex><span>* 2nd: Configure the active GMAC0 interface.
</span></span><span style=display:flex><span>*
</span></span><span style=display:flex><span>* NOTE:   The properties below are overrides <span style=color:#204a87;font-weight:700>for</span> the <span style=color:#000;font-weight:700>&amp;</span>gmac0 node,
</span></span><span style=display:flex><span>*         which inherits its base configuration from <span style=color:#4e9a06>&#34;rk3568-evb1-ddr4-v10.dtsi&#34;</span>.
</span></span><span style=display:flex><span>*
</span></span><span style=display:flex><span>* ACTION: Review these settings against your schematic.
</span></span><span style=display:flex><span>*/
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&amp;</span>gmac0 <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>	// there is more ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	//status <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;okay&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#000>status</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;disabled&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&amp;</span>mdio0 <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>status</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;disabled&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>	// there is more ...
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>我一开始的判断并不是用gmac0, 所以我做了很多调试, 直到最后才都改写成status = &ldquo;disabled&rdquo;;</p><h2 id=4-打开rockchip_developer_guide_linux_gmac_mode_configuration_cnpdf>4. 打开Rockchip_Developer_Guide_Linux_GMAC_Mode_Configuration_CN.pdf</h2><p>按照判断的时钟模式,直接抄节点配置.其他dtsi都不要修改(它们只是做库)</p><p>打开这份rk给的手册:
<img src=/2025/gmac-rk3568-bring-up/mode-config-rk3568-part.png alt></p><p>这里有这么多种模式,SGMII,全称是Serial Gigabit Media Independent Interface.这个是作为桥接使用的,因此SGMII 和 QSGMII都不属于我关心的范围.</p><p>RMII Clock Input和Output,似乎也不属于当前板子的情况, 因为我有25MHZ和125MHZ两种时钟, 因此先看其他4种.</p><p>在这里,我参考了一位叫Baron的工程师的文章:</p><p><img src=/2025/gmac-rk3568-bring-up/phy-clk-mode-from-baron.png alt></p><p><a href=https://baron-z.cn/2023/05/25/rk3566%E4%BB%A5%E5%A4%AA%E7%BD%91%E8%B0%83%E8%AF%95/ target=_blank rel=noopener>参考链接: 很好的一篇文章</a></p><p>按着这里的归纳总结, 我们此刻正应该选择<strong>RGMII PLL output 25M for PHY, RGMII_CLK input 125M for TX_CLK</strong>.</p><h2 id=5-总结>5. 总结</h2><ul><li><p>以上只是正常的移植流程,在bring up的过程中, 很可能硬件是不ok的. 所以确认了正确的移植流程, 就可以有确据去往硬件去找bug了.</p></li><li><p>关于调试的思路, 我的个人笔记整理在这里, 提供一个思考的起点:<a href=/blog/2025/07/25/gmac-bring-up-debug-strategies>GMAC Bring-Up Debug Strategies</a></p></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-7b330209886be5de1eac30147d864443>GMAC Bring-Up Debug Strategies</h1><div class="td-byline mb-4"><time datetime=2025-07-25 class=text-body-secondary>2025年07月25日</time></div><p>最重要的就是这三个部分,缺一不可</p><h2 id=a-电源><strong>a. 电源</strong></h2><h3 id=电路图><strong>电路图</strong></h3><p><img src=/2025/gmac-rk3568-bring-up/product-power-part-schema.png alt></p><h3 id=说明><strong>说明</strong></h3><p>电源得先有,而且正常
&ldquo;正常"的定义在手册里
<img src=/2025/gmac-rk3568-bring-up/yt8521sc-datasheet-power-part.png alt></p><h3 id=第一类-avddl和dvddl><strong>第一类: AVDDL和DVDDL</strong></h3><ul><li>要求1.2V左右</li><li>R209和R210的电压要求是1.2V左右</li></ul><h3 id=第二类-dvdd33和vdd33和avdd33><strong>第二类: DVDD33和VDD33和AVDD33</strong></h3><ul><li>要求3.3V左右</li></ul><h3 id=第三类-><strong>第三类: [特殊][小心]DVDD_RGMII</strong></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Digital RGMII I/O, MDC/MDIO power, adjusted by CFG_LDO<span style=color:#ce5c00;font-weight:700>[</span>1:0<span style=color:#ce5c00;font-weight:700>]</span>.
</span></span><span style=display:flex><span>	Note: When CFG_LDO<span style=color:#ce5c00;font-weight:700>[</span>1:0<span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> 00, the I/O pad power is supplied from
</span></span><span style=display:flex><span>	the external 3.3V power connected to DVDD_RGMII pin. Otherwise,
</span></span><span style=display:flex><span>	it is supplied from the internal LDO.
</span></span></code></pre></div><ul><li>测试方法<ul><li>透过测试PHY的36和37脚
测试后发现, 都是低电平</li><li>测试R212
万用表测试后发现, 两端都是3.3V</li></ul></li></ul><h2 id=b-晶振时钟><strong>b. 晶振(时钟)</strong></h2><h3 id=1-xtal_><strong>1. XTAL_I(跟晶振有关的Input脚)</strong></h3><ul><li>这跟脚接地了,所以没有东西</li><li>这是PHY的47脚</li></ul><h3 id=2-xtal_><strong>2. XTAL_O(跟晶振有关系的Output脚)</strong></h3><ul><li>25MHZ从这里测出来</li><li>怎么测试呢?<ul><li>直接测试YT8521SC的46脚</li></ul></li></ul><p>这两个得先来, 这两个关乎晶振有没有</p><p>有了之后, 再看MDIO, 这俩是关乎MAC(inside RK3568)控制PHY(YT8521SC)的电路.他俩一个是时钟一个是数据.都得有</p><h3 id=3-mdcmdio的时钟><strong>3. MDC(MDIO的时钟)</strong></h3><ul><li><p>测试方法</p><ul><li>直接测试PHY的14脚,除此之外没办法了</li></ul></li><li><p>正确结果</p><ul><li>3.3V或接近</li></ul></li><li><p>错误结果</p><ul><li>低于3.3V比较多,例如1V以下</li></ul></li></ul><h3 id=4-mdiomidio的数据><strong>4. MDIO(MIDIO的数据)</strong></h3><ul><li><p>测试方法</p><ul><li>测试PHY的15脚</li></ul></li><li><p>正确结果</p><ul><li>3.3V或接近</li></ul></li><li><p>错误结果</p><ul><li>低于3.3V比较多,例如1V以下</li></ul></li></ul><h2 id=c-复位><strong>c. 复位</strong></h2><ul><li><p>RESET_N(复位脚)</p></li><li><p>dts里是:</p><ul><li>snps,reset-gpio这句话</li></ul></li><li><p>测试方法</p><ul><li>可以测试R205<ul><li><img src=/2025/gmac-rk3568-bring-up/yt8521sc-reset-resistor.png alt></li></ul></li><li>也可以直接测试PHY的13脚<ul><li><img src=/2025/gmac-rk3568-bring-up/yt8521sc-reset-pin.png alt></li></ul></li></ul></li><li><p>正确结果</p><ul><li>开机有一个拉低,然后就拉高了<ul><li><img src=/2025/gmac-rk3568-bring-up/yt8521sc-reset-in-datasheet.png alt></li></ul></li></ul></li><li><p>错误结果</p><ul><li>没有拉低,或一直低</li></ul></li><li><p>很重要是分清楚, 时钟是谁给谁, 谁倍频,一般是两组, 25MHZ原始是谁给的, 倍频是谁做的, 倍频后有给到谁吗?</p></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-1fe142e6ca7e208bad2dc22b5b234234>011_Grp_Windows</h1><div class="td-byline mb-4"><time datetime=2024-10-10 class=text-body-secondary>2024年10月10日</time></div></div><div class=td-content><h1 id=pg-0fc815991af709e0d45b6ac0f2e0a676>IMMNotificationClient Callback Problem</h1><div class="td-byline mb-4"><time datetime=2024-10-10 class=text-body-secondary>2024年10月10日</time></div><p><a href=https://mermaid.live/edit#pako:eNqVVm1T2lgU_ivZfHTQIYhgcdoZi6i03fq225ltcDIBAmQbEhZuutaXGbS-gFCx6jpWq67bWt3uFnWcWsUXfsxyE_jkX9iTBFlEd9mSGYbce85znjz3nCeMkD7Jz5EOMiBIP_tCbBQR33V4RAI-MdkbjLKREKFsTJbiv-KZc-WX_fYBJxKYngiKeUQP0q77tLuJcEY5FnFEmIm0y35eckoiikoCcZdwDSHG2KzeuDxbw4k1fJrrbn-EDybU1Um8d1I82BrUQLXa94nGxnuEk3YDdoyJuMUYYkUfB4AoxMcuz9Kl9TdKfFxJzOPXKzizUprJFPLr-NMKPl_EyVe9OurB6U1gpw7cAcCAzAduMP7mLiHKghBB0TYCJ94ry59qKCore3j-g8FeKz-7WcHu0LBHH48SXdT1pR9GCRftftJUW63xniaPW-QRM8AhxiX6eyVeRMxjCfEB3sciXhIZJysIXtb3TNdsHe-kcHoZOIEGxeyFep4txVfVzW2N39pGcf-lcUyF45yhhCHCNbX0gBjjeg5VBQnFKnUHEIvkmDPEikHO_1d8oqFBOdxVJjPqxAmllcu_KRx_vAmF9w9AFKBUOJ7rfVTMrxW30kCqkN_SSE1t48w7QGhoqOjk0s-gkwZBivkNZW4bQnHmC15IKzvnl2er__SYw-Ed4IO3E-yMSmEoSgBUdUKdx6qQ6NRJdNFPoA-Y7yN-6NCrBLcYkNqUZArP7hbnvuDM8tVGDB4IuCrjexWYLop2CwIXZAWCG-JReZ0T_cYMtdOVMyutHCnZz4N62X-bKC3l9j2DrYVWPyXxxZS69Wfh9KiQS8H3oJHWZdFDuunqPZx5rS5tXp4lChcp_GFCO8T4ofI2p2QW4GAuz5Ll5G49101reirv4srnFE7sX4N36xEP9AjoMnVpF3oDT6dr-o6oL7-G9kBHe0hXH1zdjiRutl7xtz-U5A70Wxn3oY5bF6nG3_5HvGF1HuSiaMMVqkzJcITS-ob6e844_3KbU1d-MEzdXNY8wUJ7JfAcFI4wUSSCufV9yyG2x_sj50MOBy8-l55xsBKSqhjcdpWRcWYCNIFRXa1iZyK-ItcCuXUnzmTI998fA68Z8PrgUfpkTub84HoiPBmY2ldAWDUIpr2_i9C0MhF8rAzD-duqDMpSMahq2QxrgjdDcW9czeXV3RTOJvHUrm5Mh6WlrLL4qnD-FryucLKpnWP2pTI7W3HOsuMn48a7pcZIlfRMaSEB6ZrZ6lwN78PvJ9X56UJuWrfQ6o4YpmhwhlqPqN_4WlP30H2IKE_1xUd1bs8oQ9RKW56EHj2pl67vn4b5wiSBWeD9yXJ-r57fR9ejBo5dGUXDF8oAfTpAP_1TB-eVg0TxYhHP5NTZI5AP3tfghxUj1aL79eintMuQRyRNZJiLhlneD39NRrQYD4lCXJjzkA746ecCrCwgD-kRxyCUlZE08EL0kQ4UlTkTGZXkYIh0BFghBneybu4dPAvTHq6sRljxqSSFr1LglnSMkEOkw9baZG9pvUO12m0Wi9lubjaRL0hHI2WzN1ntVpvdbKXMVIvN0jJmIod1BKqp2XqHslFWq91sMTe32i1jfwO60Sce target=_blank rel=noopener><img src="https://mermaid.ink/img/pako:eNqVVm1T2lgU_ivZfHTQIYhgcdoZi6i03fq225ltcDIBAmQbEhZuutaXGbS-gFCx6jpWq67bWt3uFnWcWsUXfsxyE_jkX9iTBFlEd9mSGYbce85znjz3nCeMkD7Jz5EOMiBIP_tCbBQR33V4RAI-MdkbjLKREKFsTJbiv-KZc-WX_fYBJxKYngiKeUQP0q77tLuJcEY5FnFEmIm0y35eckoiikoCcZdwDSHG2KzeuDxbw4k1fJrrbn-EDybU1Um8d1I82BrUQLXa94nGxnuEk3YDdoyJuMUYYkUfB4AoxMcuz9Kl9TdKfFxJzOPXKzizUprJFPLr-NMKPl_EyVe9OurB6U1gpw7cAcCAzAduMP7mLiHKghBB0TYCJ94ry59qKCore3j-g8FeKz-7WcHu0LBHH48SXdT1pR9GCRftftJUW63xniaPW-QRM8AhxiX6eyVeRMxjCfEB3sciXhIZJysIXtb3TNdsHe-kcHoZOIEGxeyFep4txVfVzW2N39pGcf-lcUyF45yhhCHCNbX0gBjjeg5VBQnFKnUHEIvkmDPEikHO_1d8oqFBOdxVJjPqxAmllcu_KRx_vAmF9w9AFKBUOJ7rfVTMrxW30kCqkN_SSE1t48w7QGhoqOjk0s-gkwZBivkNZW4bQnHmC15IKzvnl2er__SYw-Ed4IO3E-yMSmEoSgBUdUKdx6qQ6NRJdNFPoA-Y7yN-6NCrBLcYkNqUZArP7hbnvuDM8tVGDB4IuCrjexWYLop2CwIXZAWCG-JReZ0T_cYMtdOVMyutHCnZz4N62X-bKC3l9j2DrYVWPyXxxZS69Wfh9KiQS8H3oJHWZdFDuunqPZx5rS5tXp4lChcp_GFCO8T4ofI2p2QW4GAuz5Ll5G49101reirv4srnFE7sX4N36xEP9AjoMnVpF3oDT6dr-o6oL7-G9kBHe0hXH1zdjiRutl7xtz-U5A70Wxn3oY5bF6nG3_5HvGF1HuSiaMMVqkzJcITS-ob6e844_3KbU1d-MEzdXNY8wUJ7JfAcFI4wUSSCufV9yyG2x_sj50MOBy8-l55xsBKSqhjcdpWRcWYCNIFRXa1iZyK-ItcCuXUnzmTI998fA68Z8PrgUfpkTub84HoiPBmY2ldAWDUIpr2_i9C0MhF8rAzD-duqDMpSMahq2QxrgjdDcW9czeXV3RTOJvHUrm5Mh6WlrLL4qnD-FryucLKpnWP2pTI7W3HOsuMn48a7pcZIlfRMaSEB6ZrZ6lwN78PvJ9X56UJuWrfQ6o4YpmhwhlqPqN_4WlP30H2IKE_1xUd1bs8oQ9RKW56EHj2pl67vn4b5wiSBWeD9yXJ-r57fR9ejBo5dGUXDF8oAfTpAP_1TB-eVg0TxYhHP5NTZI5AP3tfghxUj1aL79eintMuQRyRNZJiLhlneD39NRrQYD4lCXJjzkA746ecCrCwgD-kRxyCUlZE08EL0kQ4UlTkTGZXkYIh0BFghBneybu4dPAvTHq6sRljxqSSFr1LglnSMkEOkw9baZG9pvUO12m0Wi9lubjaRL0hHI2WzN1ntVpvdbKXMVIvN0jJmIod1BKqp2XqHslFWq91sMTe32i1jfwO60Sce?type=png" alt></a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-4b40b8f3a9fde137d7b53e3793fc482c>ASIO</h1><div class="td-byline mb-4"><time datetime=2024-07-31 class=text-body-secondary>2024年07月31日</time></div><h2 id=a-introduction><strong>A. Introduction</strong></h2><p>其实张佩的文章已经写得很详细了，但是如果没有任何概念的时候，还是会被众多的经典概念绕晕。 所以我的方法是：先去steinberg的forum去看一些英文原版的介绍， 然后去下载asio 的sdk下来看文档，看代码，跑代码 下载cubase下来，验证asio驱动。</p><h2 id=b-concepts><strong>B. Concepts</strong></h2><h3 id=a-structure-各层的结构>a. Structure 各层的结构</h3><h4 id=1应用程序>1.应用程序</h4><p>（cubase、dorico、nuendo、wavelab等都是被明确指出需要ASIO driver的）</p><h4 id=2操作系统-用户空间-windows>2.操作系统-用户空间-windows</h4><p>windows驱动</p><p>Steinberg built-in ASIO Driver（win10 x64 & win11 only）</p><p>早期是Generic Low Latency ASIO Driver</p><p>第三方的ASIO4ALL- from Michael Tippach</p><h4 id=3操作系统-内核空间-windows>3.操作系统-内核空间-windows</h4><h4 id=4硬件层>4.硬件层</h4><p>ASIO是需要声卡硬件支持的 其实关于这一点，暂时还没有确定的答案，硬件上做什么样特殊的处理吗？ 但是走到操作系统的内核空间层，windows内核需要为ASIO这样一个第三方的公司定制一些特殊的模块，就像Linux那样，驱动目录下有各个不同厂商单独的文件夹。 从理论上来看，当然是可能的。但是好像还没有看到ASIO有任何这方面的资料。 如果在内核空间，所有的驱动模块都是通用的，即与AC97、Realtek等声卡所调用的驱动模块是完全一致的，那么ASIO就并不需要硬件支持了。 用另一个方式来说，ASIO的特殊之处是在用户空间的驱动里，不论是WDM还是其他windows的库，ASIO推出一套标准，用不同的方法去调用内核空间给用户空间的API。 它只是在用不同的方式或逻辑调用相同的内核API，与内核通信而已。</p><h2 id=c-asio-sdk><strong>C. ASIO SDK</strong></h2><h3 id=a-asio-api试图提供的性能from-asio-sdk-23>a. ASIO API试图提供的性能(From ASIO SDK 2.3)</h3><h4 id=1high-data-throughput><code>1.High data throughput</code></h4><pre tabindex=0><code>PCI 

firewire
</code></pre><h4 id=2synchronization><code>2.synchronization</code></h4><h4 id=3low-latency><code>3.low latency</code></h4><h4 id=4extensibility-on-the-audio-hardware><code>4.extensibility on the audio hardware</code></h4><h4 id=5no-limitation-on-the-number-of-io-channels><code>5.no limitation on the number of i/o channels</code></h4><h4 id=6no-limitation-on-the-sample-rate><code>6.no limitation on the sample rate</code></h4><pre tabindex=0><code>32khz

96khz

higher
</code></pre><h4 id=7no-limitation-on-sample-format><code>7.no limitation on sample format</code></h4><pre tabindex=0><code>16

24

32 bit

32/64 bit floating point formats
</code></pre><h2 id=d-conclusion><strong>D. Conclusion</strong></h2><p>今天一天，到下午四点的时候，终于用cubase试验了自己修改过的asio driver。</p><p>虽然看起来很简单，但是其实是要仔细的去看asio sdk 2.3的整个包里面的文档。</p><p>市面上对于asio驱动、支持asio声卡、asio 硬件等概念的介绍并没有特别有针对性的。</p><p>asio应该理解为一种协议，cubase这类的软件都只识别这种协议的音频设备。</p><p>它并没有太神奇的地方，就是在软件层面的一种封装罢了。</p><h2 id=e-appendix><strong>E. Appendix</strong></h2><p><a href=https://zhuanlan.zhihu.com/p/518363836 target=_blank rel=noopener>01. [***]在逃技术百晓声-ASIO、WDM和MME驱动的区别(一个比较简练的介绍)</a></p><p><a href=https://potterwhite.github.io/blog/2024/07/31/asio/info@steinberg.de target=_blank rel=noopener>02. [**]Steinberg Email:info@steinberg.de</a></p><p><a href="https://forums.steinberg.net/c/developer/103/none?_gl=1*107pk2r*_gcl_au*MjI0MDkyMTc2LjE3MjE5ODY2MDQ." target=_blank rel=noopener>03. [***]Steinberg Forum</a></p><p><a href=https://debug.fanzheng.org/post/use-cubase-without-independent-sound-card.html target=_blank rel=noopener>04. [**]无独立声卡玩转Cubase</a></p><p><a href="https://blog.csdn.net/blog_index/article/details/2537080?spm=1001.2014.3001.5502" target=_blank rel=noopener>05. [仔细的介绍 *****]张佩的文章-ASIO音频驱动开发指南</a></p><p><a href="https://blog.csdn.net/blog_index/article/details/5411694?spm=1001.2014.3001.5502" target=_blank rel=noopener>06. [仔细的介绍 *****]张佩的文章-ASIO音频驱动开发指南 2.0</a></p><p><a href=https://helpcenter.steinberg.de/hc/en-us/articles/17863730844946-Steinberg-built-in-ASIO-Driver-information-download target=_blank rel=noopener>07. Steinberg built-in ASIO Driver: information & download</a></p><p><a href=https://helpcenter.steinberg.de/hc/en-us/articles/206111444-Audio-card-latency target=_blank rel=noopener>08. Audio card latency</a></p><p><a href=https://www.buckhorn.com.cn/index.php/support-zh/tech-doc-zh/43-asio-infrastructure-zh target=_blank rel=noopener>09. 跳羚科技 - Buckhorn之音频asio驱动开发</a></p><p><a href="http://www.cymount.com/news/shownews.php?id=66" target=_blank rel=noopener>10. 什么是 ASIO 声卡驱动？</a></p><p><a href="http://www.cymount.com/news/shownews.php?id=80" target=_blank rel=noopener>11. WASAPI介绍</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-5637ca4afd986b1e0d9ae4793487f985>声卡项目</h1><div class="td-byline mb-4"><time datetime=2024-07-11 class=text-body-secondary>2024年07月11日</time></div><h1 id=一介绍>一、介绍</h1><p>这本身是一个跨操作系统的项目，但是windows是客户群体最多的一个平台，所以主力是开发win下</p><h1 id=二主要的函数>二、主要的函数</h1><details><summary>流程图1 _EnumerateAudioEndpoints</summary><p>this is the first operation of our process</br>A. and it start with CoCreateInstance() to create object of <code>IMMDeviceEnumerator</code></br>B. then if success, use <code>IMMDeviceEnumerator.EnumAudioEndpoint()</code> to enumerate all endpoints(actually include all input & output devices, but API can choose i or o or both devices) in this machine.</br>C. if there exist endpoint, to check the number of endpoints with <code>IMMDeviceCollection.GetCount()</code>.</br>D. use for loop to enum every endpoint, retrieve its data with <code>IMMDeviceCollection.Item()</code></br>E. finally, if retrieving process runs smoothly and there is data who came with Item() operation, push it into endpoint global data pool.</br></p><iframe src=/2024/July/17/flow_no_zoom.svg width=900 height=2000 style=border:none;overflow:scroll;background:#333></iframe></details><details><summary>001. 创建com的对象 CoCreateInstance</summary><div style=padding-left:2em></br><pre tabindex=0><code>_Check_return_
WINOLEAPI
CoCreateInstance(
    _In_ REFCLSID rclsid,
    _In_opt_ LPUNKNOWN pUnkOuter,
    _In_ DWORD dwClsContext,
    _In_ REFIID riid,
    _COM_Outptr_ _At_(*ppv, _Post_readable_size_(_Inexpressible_(varies))) LPVOID  FAR * ppv
);
</code></pre></br><h3 id=refrence><strong>Refrence</strong></h3><p><a href=https://learn.microsoft.com/en-us/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance target=_blank rel=noopener>1. CoCreateInstance MS Learning</a></br><a href=https://developer.aliyun.com/article/48371 target=_blank rel=noopener>2. COM basic tutorial</a></br></p></br><h3 id=introduce><strong>Introduce</strong></h3><p><strong>CoCreateInstance</strong> is used for instance of object creating in local machine.
<strong>CoCreateInstanceEx</strong> is used for instance of object creating in REMOTE machine.
<strong>CoGetClassObject</strong> is used for MULTI instances of object creating in local machine.
CoCreateInstance encapsulates the CoGetClassObject in the low-level.
CoCreateInstance connects the object with the ID.</br></br></p><h3 id=requirement><strong>Requirement</strong></h3><table><thead><tr><th>Type</th><th>Name</th><th>Usage</th></tr></thead><tbody><tr><td>Library</td><td>Ole32.lib</td><td></td></tr><tr><td>Dynamic Link Library</td><td>Ole32.dll</td><td></td></tr><tr><td>Header file</td><td>combaseapi.h</td><td></td></tr><tr><td></td><td>&mldr;\Windows Kits\10\Include\10.0.22621.0\shared\guiddef.h</td><td>REFCLSID & IID definition</td></tr><tr><td></td><td>&mldr;\Windows Kits\10\Include\10.0.22621.0\um\mmdeviceapi.h</td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td>Minimum System Version</td><td>Windows 2000 and above</td><td></td></tr></tbody></table><p></br></br></p><h3 id=parameters><strong>Parameters</strong></h3><p><span style=background-color:gray>(1/5)[in] rclsid</span></br></br></p><div style=padding-left:2em>The CLSID associated with the data and code that will be used to create the object.</br><p>REFCLSID:</br>REF=Reference</br>CLS=Class</br>ID=Identifier</br>REFCLSID rclsid：是 const CLSID& 的别名，表示对 CLSID 的引用。这样传递参数时，不需要复制整个 CLSID 对象，只需要传递它的引用，从而提高效率。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#8f5902;font-style:italic>/*mmdeviceapi.h
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> * here is the definition of MMDevice Enumerator
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> * we are using &#34;__uuidof(MMDeviceEnumerator)&#34;
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> */</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#ifdef __cplusplus
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>class</span> <span style=color:#000>DECLSPEC_UUID</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;BCDE0395-E52F-467C-8E3D-C4579291692E&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>MMDeviceEnumerator</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#endif
</span></span></span></code></pre></div><details><summary>UUID为什么有中间的“-”连字符</summary>UUID（Universally Unique Identifier）或 GUID（Globally Unique Identifier）中使用连字符（`-`）是为了增加可读性和标准化。虽然连字符没有任何技术上的必要性，但它们有助于分隔和识别 UUID 的不同部分。<h3 id=uuid-格式>UUID 格式</h3><p>一个标准的 UUID 格式为 8-4-4-4-12，即总共 32 个十六进制字符分为五个部分，每个部分用连字符分隔。这种格式定义在 RFC 4122 中。</p><p>例如：</p><pre tabindex=0><code>BCDE0395-E52F-467C-8E3D-C4579291692E
</code></pre><h3 id=格式的分隔意义>格式的分隔意义</h3><ol><li><strong>时间戳部分（8个字符）</strong>：UUID 的前 8 个字符通常表示时间戳的高位部分。</li><li><strong>时间戳的中间部分（4个字符）</strong>：接下来的 4 个字符表示时间戳的中间部分。</li><li><strong>时间戳的低位部分和版本号（4个字符）</strong>：接下来的 4 个字符表示时间戳的低位部分和版本号。</li><li><strong>时钟序列（4个字符）</strong>：接下来的 4 个字符表示时钟序列。</li><li><strong>节点（12个字符）</strong>：最后的 12 个字符表示节点信息（通常是基于网络地址）。</li></ol><p>这种分隔方式有助于解析和理解 UUID 的不同部分，并确保它们的唯一性。</p><h3 id=使用连字符的好处>使用连字符的好处</h3><ol><li><strong>可读性</strong>：连字符使得 UUID 更加可读，更容易分辨和检查。</li><li><strong>标准化</strong>：按照 RFC 4122 标准定义的格式，有助于在不同系统和平台之间保持一致性。</li><li><strong>解析和验证</strong>：连字符分隔使得解析和验证 UUID 更加简单和明确。</li></ol><h3 id=无连字符表示>无连字符表示</h3><p>在一些情况下，可以去掉连字符并连续地写下所有字符。例如：</p><pre tabindex=0><code>BCDE0395E52F467C8E3DC4579291692E
</code></pre><p>这种形式在某些编程语言和库中也是支持的，但为了确保一致性和标准化，通常还是建议使用带有连字符的格式。</p><h3 id=总结>总结</h3><ul><li><strong>连字符的作用</strong>：主要是增加可读性和标准化。</li><li><strong>UUID 格式</strong>：8-4-4-4-12 的格式有助于分隔和识别不同的部分。</li><li><strong>使用连字符的好处</strong>：使得 UUID 更加可读、标准化，便于解析和验证。</li></ul><p>尽管技术上可以省略连字符，但使用标准格式带来的可读性和一致性优势使得它成为惯用的做法。</p></details><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#8f5902;font-style:italic>/*
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> * guiddef.h
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic> */</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#define REFCLSID const IID &amp;
</span></span></span></code></pre></div></div></br><p><span style=background-color:gray>(2/5)[in] pUnkOuter</span></br></br></p><div style=padding-left:2em>If NULL, indicates that the object is not being created as part of an aggregate.</br>If non-NULL, pointer to the aggregate object's IUnknown interface (the controlling IUnknown).</br><details><summary>关于Aggregate，更详尽的解释-FromGpt4o</summary>在 `CoCreateInstance` 函数中，第二个参数 `pUnkOuter` 是一个指向 `IUnknown` 接口的指针，通常用于支持 COM 对象的聚合。聚合是 COM 中的一种技术，允许一个对象（外部对象）包含另一个对象（内部对象），并使内部对象的接口看起来像是外部对象的一部分。<h3 id=参数详细解释>参数详细解释</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>HRESULT</span> <span style=color:#000>CoCreateInstance</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>  <span style=color:#000>REFCLSID</span> <span style=color:#000>rclsid</span><span style=color:#000;font-weight:700>,</span>     <span style=color:#ce5c00;font-weight:700>//</span> <span style=color:#000>Class</span> <span style=color:#000>identifier</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>CLSID</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>of</span> <span style=color:#000>the</span> <span style=color:#000>object</span> <span style=color:#000>to</span> <span style=color:#000>be</span> <span style=color:#000>created</span>
</span></span><span style=display:flex><span>  <span style=color:#000>LPUNKNOWN</span> <span style=color:#000>pUnkOuter</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>// Pointer to controlling IUnknown (for aggregation)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>DWORD</span> <span style=color:#000>dwClsContext</span><span style=color:#000;font-weight:700>,</span>  <span style=color:#8f5902;font-style:italic>// Context in which the code that manages the newly created object will run
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>REFIID</span> <span style=color:#000>riid</span><span style=color:#000;font-weight:700>,</span>         <span style=color:#8f5902;font-style:italic>// Interface identifier (IID) of the interface to be used to communicate with the object
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>LPVOID</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>ppv</span>          <span style=color:#8f5902;font-style:italic>// Address of pointer variable that receives the interface pointer requested in riid
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h3 id=punkouter-参数><code>pUnkOuter</code> 参数</h3><ul><li><strong><code>pUnkOuter</code></strong>：指向控制未知接口（<code>IUnknown</code>）的指针。如果不使用聚合，则传递 <code>NULL</code>。在聚合的情况下，<code>pUnkOuter</code> 应该是外部对象的 <code>IUnknown</code> 指针。</li></ul><h3 id=聚合aggregation>聚合（Aggregation）</h3><p>聚合是一种将一个对象嵌入到另一个对象中的机制，使得内部对象的接口对外部对象的客户端透明。聚合在以下情况下有用：</p><ol><li><strong>对象组合</strong>：允许组合对象共享一个公共的 <code>IUnknown</code> 接口，从而表现为一个单一对象。</li><li><strong>对象封装</strong>：允许一个对象封装另一个对象，并公开其接口，而不暴露内部实现细节。</li></ol><h3 id=聚合的使用>聚合的使用</h3><p>当你使用聚合时，外部对象将包含内部对象，并通过内部对象的接口来实现外部对象的部分功能。在这种情况下，<code>CoCreateInstance</code> 的第二个参数 <code>pUnkOuter</code> 将指向外部对象的 <code>IUnknown</code> 接口，以便内部对象可以调用外部对象的接口。</p><p>如果你不使用聚合，则将 <code>pUnkOuter</code> 设置为 <code>NULL</code>，表示不进行聚合。</p><h3 id=示例代码>示例代码</h3><h4 id=不使用聚合>不使用聚合</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>IMMDeviceEnumerator</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>deviceEnumerator</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87>NULL</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>HRESULT</span> <span style=color:#000>hr</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>CoCreateInstance</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>__uuidof</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>MMDeviceEnumerator</span><span style=color:#000;font-weight:700>),</span>  <span style=color:#8f5902;font-style:italic>// CLSID
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87>NULL</span><span style=color:#000;font-weight:700>,</span>                          <span style=color:#8f5902;font-style:italic>// pUnkOuter (no aggregation)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>CLSCTX_ALL</span><span style=color:#000;font-weight:700>,</span>                    <span style=color:#8f5902;font-style:italic>// Context
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>__uuidof</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>IMMDeviceEnumerator</span><span style=color:#000;font-weight:700>),</span> <span style=color:#8f5902;font-style:italic>// IID
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#ce5c00;font-weight:700>**</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>deviceEnumerator</span>      <span style=color:#8f5902;font-style:italic>// Interface pointer
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>在这个例子中，<code>pUnkOuter</code> 被设置为 <code>NULL</code>，表示不使用聚合。</p><h4 id=使用聚合>使用聚合</h4><p>假设你有一个类 <code>COuter</code>，它希望包含一个内部对象 <code>CInner</code>：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>COuter</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>IUnknown</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span><span style=color:#ce5c00;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Implement IUnknown methods
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>HRESULT</span> <span style=color:#000>QueryInterface</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>REFIID</span> <span style=color:#000>riid</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>void</span><span style=color:#ce5c00;font-weight:700>**</span> <span style=color:#000>ppv</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>riid</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>IID_IUnknown</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>ppv</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>static_cast</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>IUnknown</span><span style=color:#ce5c00;font-weight:700>*&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#000>AddRef</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>S_OK</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// Handle other interfaces
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>E_NOINTERFACE</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>ULONG</span> <span style=color:#000>AddRef</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>InterlockedIncrement</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>m_refCount</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>ULONG</span> <span style=color:#000>Release</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>ULONG</span> <span style=color:#000>count</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>InterlockedDecrement</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>m_refCount</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>count</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>delete</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span><span style=color:#ce5c00;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#000>ULONG</span> <span style=color:#000>m_refCount</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Create an instance of COuter and aggregate CInner
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>COuter</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>pOuter</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>COuter</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>IUnknown</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>pUnkOuter</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>static_cast</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>IUnknown</span><span style=color:#ce5c00;font-weight:700>*&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>pOuter</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>CInner</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>pInner</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87>NULL</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>HRESULT</span> <span style=color:#000>hr</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>CoCreateInstance</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>CLSID_CInner</span><span style=color:#000;font-weight:700>,</span>         <span style=color:#8f5902;font-style:italic>// CLSID of the inner object
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>pUnkOuter</span><span style=color:#000;font-weight:700>,</span>            <span style=color:#8f5902;font-style:italic>// pUnkOuter (aggregation)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>CLSCTX_INPROC_SERVER</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>// Context
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>IID_IUnknown</span><span style=color:#000;font-weight:700>,</span>         <span style=color:#8f5902;font-style:italic>// IID of the interface
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#ce5c00;font-weight:700>**</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>pInner</span>       <span style=color:#8f5902;font-style:italic>// Interface pointer
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>SUCCEEDED</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hr</span><span style=color:#000;font-weight:700>))</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Use pInner
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>在这个例子中，<code>pUnkOuter</code> 被设置为外部对象的 <code>IUnknown</code> 指针，以便内部对象可以进行聚合。</p><h3 id=总结-1>总结</h3><ul><li><strong><code>pUnkOuter</code></strong> 是一个指向 <code>IUnknown</code> 接口的指针，用于支持聚合。</li><li><strong>聚合</strong> 允许一个对象包含另一个对象，并使内部对象的接口对外部对象的客户端透明。</li><li>如果不使用聚合，则将 <code>pUnkOuter</code> 设置为 <code>NULL</code>。</li></ul><p>通过理解 <code>pUnkOuter</code> 参数的用途和聚合的概念，可以更好地理解和使用 COM 编程模型中的聚合特性。</p></details></div></br><p><span style=background-color:gray>(3/5)[in] dwClsContext</span></br></p><div style=padding-left:2em>Context in which the code that manages the newly created object will run.</br>The values are taken from the enumeration CLSCTX.</br><p><code>dwClsContext</code>:</br> <code>dw</code>=double world;(microsoft<code>s naming style)&lt;/br>
&amp;emsp;</code>Cls<code>=Class; (Class of COM object)&lt;/br>
&amp;emsp;</code>Context` means the environment which the object running</br></p><pre class=c>
    <code>
#...\Windows Kits\10\Include\10.0.22621.0\um\combaseapi.h

#define CLSCTX_ALL              (CLSCTX_INPROC_SERVER| \
                                CLSCTX_INPROC_HANDLER| \
                                CLSCTX_LOCAL_SERVER| \
                                CLSCTX_REMOTE_SERVER)
    </code>
</pre><p>and these macros are found in</p><pre class=c>
    <code>
#...\Windows Kits\10\Include\10.0.22621.0\shared\WTypesbase.h
typedef
enum tagCLSCTX
{
    CLSCTX_INPROC_SERVER	= 0x1,
    CLSCTX_INPROC_HANDLER	= 0x2,
    CLSCTX_LOCAL_SERVER	= 0x4,
    CLSCTX_INPROC_SERVER16	= 0x8,
    CLSCTX_REMOTE_SERVER	= 0x10,
    CLSCTX_INPROC_HANDLER16	= 0x20,
    CLSCTX_RESERVED1	= 0x40,
    CLSCTX_RESERVED2	= 0x80,
    CLSCTX_RESERVED3	= 0x100,
    CLSCTX_RESERVED4	= 0x200,
    CLSCTX_NO_CODE_DOWNLOAD	= 0x400,
    CLSCTX_RESERVED5	= 0x800,
    CLSCTX_NO_CUSTOM_MARSHAL	= 0x1000,
    CLSCTX_ENABLE_CODE_DOWNLOAD	= 0x2000,
    CLSCTX_NO_FAILURE_LOG	= 0x4000,
    CLSCTX_DISABLE_AAA	= 0x8000,
    CLSCTX_ENABLE_AAA	= 0x10000,
    CLSCTX_FROM_DEFAULT_CONTEXT	= 0x20000,
    CLSCTX_ACTIVATE_X86_SERVER	= 0x40000,
    CLSCTX_ACTIVATE_32_BIT_SERVER	= CLSCTX_ACTIVATE_X86_SERVER,
    CLSCTX_ACTIVATE_64_BIT_SERVER	= 0x80000,
    CLSCTX_ENABLE_CLOAKING	= 0x100000,
    CLSCTX_APPCONTAINER	= 0x400000,
    CLSCTX_ACTIVATE_AAA_AS_IU	= 0x800000,
    CLSCTX_RESERVED6	= 0x1000000,
    CLSCTX_ACTIVATE_ARM32_SERVER	= 0x2000000,
    CLSCTX_ALLOW_LOWER_TRUST_REGISTRATION	= 0x4000000,
    CLSCTX_PS_DLL	= 0x80000000
} 	CLSCTX;

    </code>
</pre></div></br><p><span style=background-color:gray>(4/5)[in] riid</span></br></br></p><div style=padding-left:2em>A reference to the identifier of the interface to be used to communicate with the object.</br></br><p><em>In</em> REFIID riid</br><code>REFIID riid</code>：</br>是 const IID& 的别名，表示对 IID 的引用。它的作用与 REFCLSID 类似。</br></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#define REFIID const IID &amp;
</span></span></span></code></pre></div></div></br><p><span style=background-color:gray>(5/5)[out] ppv</span></br></br></p><div style=padding-left:2em>Address of pointer variable that receives the interface pointer requested in riid.</br>Upon successful return, *ppv contains the requested interface pointer.</br>Upon failure, *ppv contains NULL.</br></div></br><p><code>ppv</code>: Pointer to Pointer to Void</p></details></div><h2 id=002-immdeviceactivate><strong>002. IMMDevice::Activate</strong></h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#000>HRESULT</span> <span style=color:#000>Activate</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>[</span><span style=color:#000>in</span><span style=color:#000;font-weight:700>]</span>  <span style=color:#000>REFIID</span>      <span style=color:#000>iid</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>[</span><span style=color:#000>in</span><span style=color:#000;font-weight:700>]</span>  <span style=color:#000>DWORD</span>       <span style=color:#000>dwClsCtx</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>[</span><span style=color:#000>in</span><span style=color:#000;font-weight:700>]</span>  <span style=color:#000>PROPVARIANT</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>pActivationParams</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>[</span><span style=color:#000>out</span><span style=color:#000;font-weight:700>]</span> <span style=color:#204a87;font-weight:700>void</span>        <span style=color:#ce5c00;font-weight:700>**</span><span style=color:#000>ppInterface</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p><strong>Parameters Description</strong></p><p><code>iid</code>: interface identifier</p><p>Exp:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>IID</span> <span style=color:#000>IID_IAudioSessionControl2</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>__uuidof</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>IAudioSessionControl2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>1.</span> <span style=color:#000>IID_IAudioClient</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>2.</span> <span style=color:#000>IID_IAudioEndpointVolume</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>3.</span> <span style=color:#000>IID_IAudioMeterInformation</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>4.</span> <span style=color:#000>IID_IAudioSessionManager</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>5.</span> <span style=color:#000>IID_IAudioSessionManager2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>6.</span> <span style=color:#000>IID_IBaseFilter</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>7.</span> <span style=color:#000>IID_IDeviceTopology</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>8.</span> <span style=color:#000>IID_IDirectSound</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>9.</span> <span style=color:#000>IID_IDirectSound8</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>10.</span> <span style=color:#000>IID_IDirectSoundCapture</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>11.</span> <span style=color:#000>IID_IDirectSoundCapture8</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>12.</span> <span style=color:#000>IID_IMFTrustedOutput</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>13.</span> <span style=color:#000>IID_ISpatialAudioClient</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>14.</span> <span style=color:#000>IID_ISpatialAudioMetadataClient</span>
</span></span></code></pre></div><p><code>dwClsCtx</code>: double word Class Context</p><p><code>pActivationParams</code>:</p><p><code>ppInterface</code></p></div><div class=td-content style=page-break-before:always><h1 id=pg-6533cdf711861891373657621c2bfba2>012_Grp_WebDevelopment</h1><div class="td-byline mb-4"><time datetime=2024-07-18 class=text-body-secondary>2024年07月18日</time></div></div><div class=td-content><h1 id=pg-e289a02d1c759a7ed93bddc4a1eff40e>012_001_Grp_HTML+CSS+JAVASCRIPT</h1><div class="td-byline mb-4"><time datetime=2024-07-18 class=text-body-secondary>2024年07月18日</time></div></div><div class=td-content><h1 id=pg-d170e1475e51b30f30182867ceb4bc16>html tricks</h1><div class="td-byline mb-4"><time datetime=2024-07-18 class=text-body-secondary>2024年07月18日</time></div><details><summary><strong>001. what is the unit of "em"?<strong></summary><div style=padding-left:2em><p><code>em</code> does not have its full-name.
it standed for the width of alphabet &ldquo;M&rdquo;
now it always stands for the unit of with of font.</p></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-aee71633b22472bd41c2206f788801b2>013_Grp_QtDevelopment</h1><div class="td-byline mb-4"><time datetime=2024-09-06 class=text-body-secondary>2024年09月06日</time></div></div><div class=td-content><h1 id=pg-40f88ca10d40b511b5f9d5e78c3d1aca>013_001_Grp_QtDevelopment</h1><div class="td-byline mb-4"><time datetime=2024-07-18 class=text-body-secondary>2024年07月18日</time></div></div><div class=td-content><h1 id=pg-5dce2128da9b609f1b4100af9b2e553c>CMake Key Points in Qt6</h1><div class="td-byline mb-4"><time datetime=2024-07-18 class=text-body-secondary>2024年07月18日</time></div><details><summary><strong>001.</br>find_package(QT NAMES Qt6 Qt5 REQUIRED COMPONENTS Core Widgets)</br>find_package(Qt${QT_VERSION_MAJOR} REQUIRED COMPONENTS Core Widgets) Usages<strong></summary><div style=padding-left:2em><p><code>find_package(QT NAMES Qt6 Qt5 REQUIRED COMPONENTS Core)</code>：</p><p>这行代码试图找到名为 Qt6 或 Qt5 的 Qt 版本，并且要求找到其中的 Core 组件。
如果系统上安装了 Qt6，这行代码会找到 Qt6；如果没有找到 Qt6，会尝试找到 Qt5。</p><p><code>find_package(Qt${QT_VERSION_MAJOR} REQUIRED COMPONENTS Core)</code>：</p><p>这行代码利用第一个 find_package 结果中设置的 QT_VERSION_MAJOR 变量来找到具体的 Qt 版本及其 Core 组件。</p></div></details><h4 id=cmake_minimum_requiredversion-314><code>cmake_minimum_required(VERSION 3.14)</code></h4><h4 id=projectlibdiytoolswrapper-languages-cxx><code>project(LibDiyToolsWrapper LANGUAGES CXX)</code></h4><h4 id=setcmake_autouic-on><code>set(CMAKE_AUTOUIC ON)</code></h4><h4 id=setcmake_cxx_standard-17><code>set(CMAKE_CXX_STANDARD 17)</code></h4><h4 id=setcmake_cxx_standard_required-on><code>set(CMAKE_CXX_STANDARD_REQUIRED ON)</code></h4><h4 id=add_library-libdiytoolswrapper-shared--libdiytoolswrapper_globalh--><code>add_library( LibDiyToolsWrapper SHARED LibDiyToolsWrapper_global.h )</code></h4><h4 id=include_directories--inc-><code>include_directories( .. ../inc )</code></h4><h4 id=target_link_libraries-libdiytoolswrapper-private-qtqt_version_majorwidgets-><code>target_link_libraries( LibDiyToolsWrapper PRIVATE Qt${QT_VERSION_MAJOR}::Widgets )</code></h4><h4 id=target_compile_definitionslibdiytoolswrapper-private-libdiytoolswrapper_library><code>target_compile_definitions(LibDiyToolsWrapper PRIVATE LIBDIYTOOLSWRAPPER_LIBRARY)</code></h4><h2 id=set-destination_dir-ifconfigdebugcmake_binary_dirfinaldllsdebug-嵌套><code>set( DESTINATION_DIR $&lt;IF:$&lt;CONFIG:Debug>,${CMAKE_BINARY_DIR}/finalDLLs/Debug,) 嵌套</code></h2><div style=padding-left:2em><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#204a87>set</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>DESTINATION_DIR</span> <span style=color:#ce5c00;font-weight:700>$&lt;</span><span style=color:#000>IF:$&lt;CONFIG:Debug</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#4e9a06>,</span><span style=color:#ce5c00;font-weight:700>${</span><span style=color:#000>CMAKE_BINARY_DIR</span><span style=color:#ce5c00;font-weight:700>}</span><span style=color:#4e9a06>/finalDLLs/Debug,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>DESTINATION_DIR</span> <span style=color:#ce5c00;font-weight:700>$&lt;</span><span style=color:#000>IF:$&lt;CONFIG:Debug</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#4e9a06>,</span><span style=color:#ce5c00;font-weight:700>${</span><span style=color:#000>CMAKE_BINARY_DIR</span><span style=color:#ce5c00;font-weight:700>}</span><span style=color:#4e9a06>/finalDLLs/Release,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>DESTINATION_DIR</span> <span style=color:#ce5c00;font-weight:700>$&lt;</span><span style=color:#000>IF:$&lt;CONFIG:Debug</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#4e9a06>,</span><span style=color:#ce5c00;font-weight:700>${</span><span style=color:#000>CMAKE_BINARY_DIR</span><span style=color:#ce5c00;font-weight:700>}</span><span style=color:#4e9a06>/finalDLLs/Profile,</span>    
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>${</span><span style=color:#000>CMAKE_BINARY_DIR</span><span style=color:#ce5c00;font-weight:700>}</span><span style=color:#4e9a06>/Unknown&gt;&gt;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span><span style=color:#a40000>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#a40000>$&lt;IF:</span>               <span style=color:#8f5902;font-style:italic># 第一层开始
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#a40000>$&lt;CONFIG:Debug&gt;,${CMAKE_BINARY_DIR}/Debug,</span>  <span style=color:#8f5902;font-style:italic># 第一层条件和结果
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#a40000>$&lt;IF:</span>           <span style=color:#8f5902;font-style:italic># 第二层开始
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#a40000>$&lt;CONFIG:Release&gt;,${CMAKE_BINARY_DIR}/Release,</span>  <span style=color:#8f5902;font-style:italic># 第二层条件和结果
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#a40000>$&lt;IF:</span>       <span style=color:#8f5902;font-style:italic># 第三层开始
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>            <span style=color:#a40000>$&lt;CONFIG:Profile&gt;,${CMAKE_BINARY_DIR}/Profile,</span>  <span style=color:#8f5902;font-style:italic># 第三层条件和结果
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>            <span style=color:#a40000>${CMAKE_BINARY_DIR}/Unknown</span>  <span style=color:#8f5902;font-style:italic># 默认值
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#a40000>&gt;</span>  <span style=color:#8f5902;font-style:italic># 第三层结束
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#a40000>&gt;</span>  <span style=color:#8f5902;font-style:italic># 第二层结束
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#a40000>&gt;</span>  <span style=color:#8f5902;font-style:italic># 第一层结束
</span></span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-e00a1275a9ba43f29db6e2ef8531e2ad>013_002_Grp_QML</h1><div class="td-byline mb-4"><time datetime=2024-09-06 class=text-body-secondary>2024年09月06日</time></div></div><div class=td-content><h1 id=pg-e5af19215d3827a953a9889366fcf185>QML downgrade from 6 to 5</h1><div class="td-byline mb-4"><time datetime=2024-09-06 class=text-body-secondary>2024年09月06日</time></div><p>so many weird tricks that matter in Qt5 QML</p><h3 id=1-the-keyword><strong>1. the keyword &ldquo;Window&rdquo; is unrecongnized</strong></h3><p>You must type this line in the top of your qml file</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Window</span> <span style=color:#0000cf;font-weight:700>2.3</span>
</span></span></code></pre></div><p>or the keyword &ldquo;Window&rdquo; will be unrecongnized</p><h3 id=2-all-imported-system-libs-will-have-their-versions><strong>2. all imported system libs will have their versions</strong></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//this is wrong
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Window</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//this is correct
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Window</span> <span style=color:#0000cf;font-weight:700>2.3</span>
</span></span></code></pre></div><h3 id=3-the-way-of-the-organization-of-qml-in-each-project><strong>3. the way of the organization of qml in each project</strong></h3><p>qt5 use <code>qmldir</code> way to organize every qml module.</p><p>in qt6 qmldir is not created by coder
it utlizes CMakelists.txt way to manage all qml files</p><h3 id=4-qml-individual-module-utilizes-the-folder-name-as-its-module-name><strong>4. qml individual module utilizes the folder name as its module name</strong></h3><p>e.g.,
module folder: folder_A
folder content:
a.qml
b.qml
qmldir
the content of the qmldir:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>module</span> <span style=color:#000>moduleA</span>
</span></span><span style=display:flex><span><span style=color:#000>a</span> <span style=color:#0000cf;font-weight:700>1.0</span> <span style=color:#000>a</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>qml</span>
</span></span><span style=display:flex><span><span style=color:#000>b</span> <span style=color:#0000cf;font-weight:700>1.0</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>qml</span>
</span></span></code></pre></div><p>now how to import in another certain c.qml file?
the answer is</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>folder_A</span> <span style=color:#0000cf;font-weight:700>1.0</span>
</span></span></code></pre></div><p>OMG, in qt6 everything has been organized in sub CMakelists.txt</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a40000>###</span> <span style=color:#000>This</span> <span style=color:#000>file</span> <span style=color:#000>is</span> <span style=color:#000>automatically</span> <span style=color:#000>generated</span> <span style=color:#000>by</span> <span style=color:#000>Qt</span> <span style=color:#000>Design</span> <span style=color:#000>Studio</span><span style=color:#000;font-weight:700>.</span>
</span></span><span style=display:flex><span><span style=color:#a40000>###</span> <span style=color:#000>Do</span> <span style=color:#000>not</span> <span style=color:#000>change</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a40000>###########################################################################################</span>
</span></span><span style=display:flex><span><span style=color:#a40000>#</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000>th</span>
</span></span><span style=display:flex><span><span style=color:#000>set_source_files_properties</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SingletonModule</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>Exposes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>qml</span> <span style=color:#000>PROPERTIES</span>
</span></span><span style=display:flex><span>    <span style=color:#000>QT_QML_SINGLETON_TYPE</span> <span style=color:#000>TRUE</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>qt6_add_qml_module</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SingletonModuleNamesssss</span>
</span></span><span style=display:flex><span>    <span style=color:#000>URI</span> <span style=color:#4e9a06>&#34;SingletonModuleName&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>VERSION</span> <span style=color:#0000cf;font-weight:700>1.0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>QML_FILES</span>
</span></span><span style=display:flex><span>        <span style=color:#000>SingletonFolder</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>qml</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>qt_add_library</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>content</span> <span style=color:#000>STATIC</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>qt6_add_qml_module</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>content</span>
</span></span><span style=display:flex><span>    <span style=color:#000>URI</span> <span style=color:#4e9a06>&#34;content&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>VERSION</span> <span style=color:#0000cf;font-weight:700>1.0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>RESOURCE_PREFIX</span> <span style=color:#4e9a06>&#34;/qt/qml&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>QML_FILES</span>
</span></span><span style=display:flex><span>        <span style=color:#000>main</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>qml</span>        
</span></span><span style=display:flex><span>    <span style=color:#000>RESOURCES</span>
</span></span><span style=display:flex><span>        <span style=color:#000>fonts</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>fonts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>txt</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>..</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>images</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>icons</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>g_icon</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>jpg</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>..</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>images</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>icons</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>h_svg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>svg</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>..</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>images</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>icons</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>k_svg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>svg</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>now how to import my singleton module which created by myself?</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>SingletonModuleName</span> <span style=color:#0000cf;font-weight:700>1.0</span>
</span></span></code></pre></div><p>the URI is the key string
so direct and simple without any confusion</p><p>but qt5, the mechanism is the import will cause engine to search the target folder with that exact name as we write with import keyword.</p><h3 id=5-all-qml-files-be-put-under-qrc-file-defaultly><strong>5. all qml files be put under qrc file defaultly</strong></h3><p>of course, you can choose not to manage them under qrc
but this way is the default option</p><h3 id=6-you-must-register-the-data-types-if-you-wanna-share-data-between-cpp-and-qml><strong>6. you must register the data type(s) if you wanna share data between cpp and qml</strong></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span> <span style=color:#000>qRegisterMetaType</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>data_type_a</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;data_type_a&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h3 id=-->** **</h3><h3 id=---1>** **</h3><h3 id=---2>** **</h3><h3 id=---3>** **</h3><h3 id=---4>** **</h3><h3 id=---5>** **</h3><h3 id=---6>** **</h3></div><div class=td-content style=page-break-before:always><h1 id=pg-9efb5dc7a1b85e02cdbf88d9d17f7ef8>QML Poor Performance In different Qt SDK</h1><div class="td-byline mb-4"><time datetime=2024-09-06 class=text-body-secondary>2024年09月06日</time></div><video controls width=800 height=500 muted loop autoplay>
<source src=https://github.com/potterwhite/potterwhite.github.io/blob/hugo_docsy/2024/September/qml_poor_performance_compare_5and6_h264.mp4 type=video/mp4;></video></div><div class=td-content style=page-break-before:always><h1 id=pg-4c5d5f3d14b9544d1c72991e13b31cd5>QtQuick工程里的main函数解析</h1><div class="td-byline mb-4"><time datetime=2024-08-20 class=text-body-secondary>2024年08月20日</time></div><p>当然！这是对 <code>main</code> 函数的详细解读，涵盖了各个部分的功能和目的。</p><h2 id=代码逐行解释><strong>代码逐行解释</strong></h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>argc</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>char</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>argv</span><span style=color:#000;font-weight:700>[])</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>QGuiApplication</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>setAttribute</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Qt</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>AA_UseSoftwareOpenGL</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><ul><li><strong><code>QGuiApplication::setAttribute(Qt::AA_UseSoftwareOpenGL);</code></strong>：设置 Qt 应用程序的属性，强制使用软件渲染 OpenGL。这在没有硬件加速的环境中（例如某些虚拟机或嵌入式系统）非常有用，确保 OpenGL 渲染功能的兼容性。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#000>set_qt_environment</span><span style=color:#000;font-weight:700>();</span>
</span></span></code></pre></div><ul><li><strong><code>set_qt_environment()</code></strong>：这似乎是一个自定义函数，用于设置 Qt 环境的其他参数或配置。具体内容取决于你的实际实现。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#000>QGuiApplication</span> <span style=color:#000>GUI_app</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>argc</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>argv</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><ul><li><strong><code>QGuiApplication</code></strong>：创建 Qt 的 GUI 应用程序对象，处理与用户界面相关的任务。<code>argc</code> 和 <code>argv</code> 用于传递命令行参数。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// 文件路径
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>QString</span> <span style=color:#000>iconPath</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;://images/icons/app_icon.svg&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><ul><li><strong><code>iconPath</code></strong>：指定应用程序图标的路径。路径使用 Qt 的资源系统（<code>://</code> 表示 Qt 资源路径）。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// 检查文件是否存在
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>QFile</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>exists</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>iconPath</span><span style=color:#000;font-weight:700>))</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// 文件存在，设置图标
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000>glb_GUI_app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setWindowIcon</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>QIcon</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>iconPath</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// qDebug() &lt;&lt; &#34;Icon found and set.&#34;;
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// 文件不存在，处理错误
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000>qDebug</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>&lt;&lt;</span> <span style=color:#4e9a06>&#34;main(): Icon file not found:&#34;</span> <span style=color:#ce5c00;font-weight:700>&lt;&lt;</span> <span style=color:#000>iconPath</span> <span style=color:#ce5c00;font-weight:700>&lt;&lt;</span><span style=color:#4e9a06>&#34;currentDir=&#34;</span><span style=color:#ce5c00;font-weight:700>&lt;&lt;</span> <span style=color:#000>QDir</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>currentPath</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><ul><li><strong><code>QFile::exists(iconPath)</code></strong>：检查指定路径的图标文件是否存在。</li><li><strong><code>glb_GUI_app.setWindowIcon(QIcon(iconPath))</code></strong>：如果图标文件存在，则设置应用程序的窗口图标。</li><li><strong><code>qDebug()</code></strong>：用于调试输出，显示图标文件的存在状态和当前工作目录。如果图标文件不存在，会输出相关错误信息。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// ********************** qml **********************************************
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>QQmlApplicationEngine</span> <span style=color:#000>engine</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// const QUrl url(u&#34;qrc:/qt/qml/Main/main.qml&#34;_qs);
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>QUrl</span> <span style=color:#000>url</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>u</span><span style=color:#4e9a06>&#34;qrc:/qt/qml/content/Entry.qml&#34;</span><span style=color:#000>_qs</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><ul><li><strong><code>QQmlApplicationEngine</code></strong>：创建 QML 引擎对象，用于加载和管理 QML 文件。</li><li><strong><code>url</code></strong>：指定要加载的 QML 文件的路径。这里加载的是 <code>Entry.qml</code> 文件。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#000>ASCtl_Opts</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>class_opts</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>Class_Opts</span><span style=color:#000;font-weight:700>();</span>    
</span></span></code></pre></div><ul><li><strong><code>Class_Opts</code></strong>：创建一个 C++ 自定义类的实例，这个对象将暴露给 QML 界面，以便在 QML 中访问和使用。</li><li><strong><code>QObject::connect(button, )</code></strong>：注释掉了的代码行，可能是用于连接某个按钮的信号和槽。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#000>QObject</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>connect</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>engine</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>QQmlApplicationEngine</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>objectCreated</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>GUI_app</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#000>url</span><span style=color:#000;font-weight:700>](</span><span style=color:#000>QObject</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>obj</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>QUrl</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>objUrl</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>obj</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>url</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>objUrl</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>                <span style=color:#000>QCoreApplication</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>exit</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        <span style=color:#000>Qt</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>QueuedConnection</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><ul><li><strong><code>QObject::connect</code></strong>：连接信号和槽。这里连接的是 <code>QQmlApplicationEngine</code> 的 <code>objectCreated</code> 信号到一个 lambda 函数。</li><li><strong><code>objectCreated</code></strong>：表示 QML 对象已经创建。</li><li><strong>lambda 函数</strong>：检查创建的对象是否为空，并且 URL 是否与预期的 URL 匹配。如果对象为空且 URL 匹配，则应用程序退出，返回错误码 <code>-1</code>。</li><li><strong><code>Qt::QueuedConnection</code></strong>：信号和槽的连接类型，表示槽函数将在接收线程的事件循环中执行。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#000>engine</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>addImportPath</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>QCoreApplication</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>applicationDirPath</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;/qml&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#000>engine</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>addImportPath</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;:/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><ul><li><strong><code>addImportPath</code></strong>：添加 QML 模块的导入路径。第一个路径是应用程序的工作目录下的 <code>qml</code> 子目录，第二个路径是 Qt 的资源系统路径。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#000>engine</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rootContext</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>setContextProperty</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;class_Opts&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>class_opts</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#000>engine</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>load</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><ul><li><strong><code>setContextProperty</code></strong>：将 C++ 对象 (<code>class_opts</code>) 设置为 QML 上下文属性，使 QML 可以访问这个对象。</li><li><strong><code>engine.load(url)</code></strong>：加载指定的 QML 文件并显示其界面。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rootObjects</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>isEmpty</span><span style=color:#000;font-weight:700>())</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><ul><li><strong><code>rootObjects()</code></strong>：获取 QML 引擎中加载的根对象。如果根对象为空，说明 QML 文件加载失败，程序返回 <code>-1</code> 退出。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>glb_GUI_app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>exec</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><ul><li><strong><code>GUI_app.exec()</code></strong>：启动应用程序的事件循环。这个方法会阻塞，直到应用程序退出。它处理所有的用户输入、定时器事件等。</li></ul><h3 id=总结>总结</h3><ol><li><strong>设置属性</strong>：设置 Qt 应用程序的属性来使用软件渲染 OpenGL。</li><li><strong>设置环境</strong>：调用自定义函数来配置 Qt 环境。</li><li><strong>创建应用程序对象</strong>：<code>QGuiApplication</code> 处理 GUI 相关任务。</li><li><strong>设置图标</strong>：检查并设置应用程序窗口图标。</li><li><strong>创建 QML 引擎</strong>：用于加载和管理 QML 文件。</li><li><strong>创建和设置 C++ 对象</strong>：将 C++ 对象暴露给 QML。</li><li><strong>连接信号和槽</strong>：确保 QML 文件正确加载。</li><li><strong>设置导入路径</strong>：为 QML 引擎添加模块导入路径。</li><li><strong>加载 QML 文件</strong>：实际加载并显示 QML 界面。</li><li><strong>启动事件循环</strong>：进入事件循环，处理应用程序事件。</li></ol><p>这个 <code>main</code> 函数展示了如何在 Qt 中设置应用程序图标、加载 QML 界面，并将 C++ 对象暴露给 QML，同时确保应用程序在启动时能够正确处理潜在的错误。</p><h2 id=暴露整个类对象给qml的意义何在><strong>暴露整个类对象给QML的意义何在？</strong></h2><p>暴露整个 C++ 类的对象给 QML 主要有以下几个目的和考虑，但这些目的在不同的场景下可能有不同的实现方式，因此也需要根据实际需求来选择是否采用 <code>Q_PROPERTY</code> 或其他方式。</p><h3 id=1-访问复杂逻辑或功能>1. <strong>访问复杂逻辑或功能</strong>：</h3><ul><li>如果你有一个复杂的 C++ 类，这个类封装了一些业务逻辑、算法或功能（例如网络请求、数据处理、硬件交互等），你可以通过暴露整个对象给 QML，让 QML 层能够调用这个对象的方法。这些方法可能不只是简单的数据访问，还包括一些逻辑操作，比如计算、状态管理等。</li><li>在这种情况下，QML 通过调用 C++ 对象的方法，可以利用 C++ 的强大功能，弥补 QML 本身的能力不足。例如，执行某些复杂的操作，然后将结果返回给 QML。</li></ul><h3 id=2-共享和管理状态>2. <strong>共享和管理状态</strong>：</h3><ul><li>如果你的 C++ 类管理了一些全局或共享状态（例如应用程序的配置、运行状态、数据缓存等），暴露这个对象给 QML 可以让 QML 访问和操作这些状态。在这种情况下，暴露整个对象可以简化在多个 QML 组件之间共享数据或状态的需求。</li></ul><h3 id=3-整合-c-和-qml-的开发>3. <strong>整合 C++ 和 QML 的开发</strong>：</h3><ul><li>在某些项目中，可能需要将 C++ 层的功能和 QML 层的 UI 进行紧密整合。暴露整个 C++ 类的对象可以减少接口设计的复杂性，使得 QML 可以直接利用 C++ 层的现有代码，不需要重复定义接口或桥接代码。</li></ul><h3 id=4-使用单例模式的好处>4. <strong>使用单例模式的好处</strong>：</h3><ul><li>如果你使用单例模式暴露 C++ 对象，那么这个对象在整个应用程序中只有一个实例。这在某些情况下很有用，比如你希望确保某些数据或状态在应用程序的所有部分中保持一致。这种方式常用于全局管理器类（如设置管理器、数据库连接管理器等），这些类的实例通常只有一个，且在应用程序的整个生命周期内都存在。</li></ul><h3 id=5-q_>5. <strong>Q_PROPERTY 的作用</strong>：</h3><ul><li>如果你仅仅暴露整个 C++ 对象而不使用 <code>Q_PROPERTY</code>，那么 QML 层可能无法直接访问对象的属性，尤其是私有或受保护的成员变量。<code>Q_PROPERTY</code> 的作用在于允许 QML 层将某些 C++ 属性作为 QML 属性来使用，使得这些属性可以直接在 QML 中绑定、显示，并在值变化时自动触发更新。</li><li>另一方面，如果你不使用 <code>Q_PROPERTY</code>，但仍然希望 QML 能访问到某些公有数据，你可能需要手动定义 getter 和 setter 方法，然后在 QML 中通过调用这些方法来获取或设置数据。然而，这种方式无法实现自动数据同步，且代码更为冗长。</li></ul><h3 id=总结-1>总结：</h3><p>暴露整个 C++ 对象给 QML 的意义在于允许 QML 层访问和调用这个对象所提供的功能和方法，而不仅仅是访问简单的数据。如果只是为了访问某个数据属性，<code>Q_PROPERTY</code> 是更好的选择，它不仅可以简化代码，还能实现数据的自动同步更新。</p><p>如果你发现暴露整个类对象对于你的需求并不合适或不方便，那么你可以选择只暴露必要的功能和属性（例如通过 <code>Q_PROPERTY</code>），这样可以确保代码的清晰性和维护性。选择合适的方式取决于你的具体应用场景和需求。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ff55b258a9ddd7b3bc0daa01474d90d0>QML的Menu容器</h1><div class="td-byline mb-4"><time datetime=2024-08-19 class=text-body-secondary>2024年08月19日</time></div><h2 id=qml-中的><strong>QML 中的 <code>Menu</code> 结构</strong></h2><p>在 QML 中，<code>Menu</code> 是一个复杂的控件，它通常用于创建上下文菜单或主菜单。在 QML 中，像 <code>Menu</code> 这样的控件可以通过 <code>background</code> 和 <code>contentItem</code> 等属性来自定义其外观和行为。这些属性通常用于更改控件的默认布局和样式。</p><h4 id=1-background>1. <strong><code>background</code> 属性</strong></h4><ul><li><code>background</code> 属性是一个 <code>Item</code> 或任何其他可以作为背景的元素。它定义了 <code>Menu</code> 背景的样式。通常，你会使用 <code>Rectangle</code> 或其他图形元素来定义背景的颜色、边框、圆角等。</li><li><strong>位置</strong>: <code>background</code> 位于 <code>Menu</code> 的最底层，用于显示菜单的背景。它通常覆盖整个 <code>Menu</code> 的区域。</li></ul><h4 id=2-contentitem>2. <strong><code>contentItem</code> 属性</strong></h4><ul><li><code>contentItem</code> 是一个 <code>Item</code>，定义了 <code>Menu</code> 的主要内容。通过自定义 <code>contentItem</code>，你可以完全控制 <code>Menu</code> 中菜单项的布局方式和样式。</li><li><strong>位置</strong>: <code>contentItem</code> 位于 <code>background</code> 之上，包含 <code>MenuItem</code> 和其他控件的布局。</li></ul><h3 id=menu-的基本结构>Menu 的基本结构</h3><p>可以将 <code>Menu</code> 看作一个容器，包含以下几个关键区域：</p><ol><li><p><strong><code>background</code></strong>:</p><ul><li><strong>功能</strong>: 负责绘制菜单的背景颜色、边框、阴影等样式。</li><li><strong>自定义</strong>: 可以使用任何 <code>Item</code> 来自定义背景（通常是 <code>Rectangle</code>）。</li><li><strong>默认行为</strong>: 如果不指定 <code>background</code>，菜单将使用系统默认的背景样式。</li></ul></li><li><p><strong><code>contentItem</code></strong>:</p><ul><li><strong>功能</strong>: 负责容纳并布局菜单项（<code>MenuItem</code>），可以是 <code>Column</code>、<code>Row</code>、<code>Grid</code> 等布局容器。</li><li><strong>自定义</strong>: 可以使用 <code>Column</code>、<code>Row</code>、<code>Grid</code> 等来控制 <code>MenuItem</code> 的排列方式。</li><li><strong>默认行为</strong>: 如果不指定 <code>contentItem</code>，<code>Menu</code> 将使用系统默认的布局来排列 <code>MenuItem</code>。</li></ul></li><li><p><strong><code>MenuItem</code></strong>:</p><ul><li><strong>功能</strong>: 表示菜单中的各个选项，用户可以点击这些选项来触发相应的操作。</li><li><strong>位置</strong>: <code>MenuItem</code> 通常放在 <code>contentItem</code> 中。</li></ul></li></ol><h3 id=menu-内置的容器和属性><code>Menu</code> 内置的容器和属性</h3><ol><li><p><strong><code>background</code></strong>: 定义菜单的背景，可以是 <code>Rectangle</code>、<code>Image</code> 或任何 <code>Item</code>。</p><ul><li><strong>位置</strong>: 背景在 <code>Menu</code> 的底层。</li><li><strong>用途</strong>: 设定菜单的背景颜色、边框、圆角等视觉效果。</li></ul></li><li><p><strong><code>contentItem</code></strong>: 定义菜单的内容区域，通常用 <code>Column</code> 来布局多个 <code>MenuItem</code>。</p><ul><li><strong>位置</strong>: <code>contentItem</code> 在 <code>background</code> 之上。</li><li><strong>用途</strong>: 用于布局和显示菜单中的项（<code>MenuItem</code>）。</li></ul></li><li><p><strong><code>MenuItem</code></strong>: 菜单项，可以是可点击的选项。</p><ul><li><strong>位置</strong>: <code>MenuItem</code> 放置在 <code>contentItem</code> 内。</li><li><strong>用途</strong>: 用户点击后会触发相应的操作。</li></ul></li></ol><h3 id=图示化-menu-结构>图示化 <code>Menu</code> 结构</h3><p>虽然我无法直接绘制图示，但可以描述如下：</p><pre tabindex=0><code>+--------------------------+
|         background        |  &lt;- background: Rectangle
|  +---------------------+  |
|  |     contentItem      |  |  &lt;- contentItem: Column
|  |  +---------------+   |  |
|  |  |  MenuItem 1    |   |  |
|  |  +---------------+   |  |  &lt;- MenuItem
|  |  |  MenuItem 2    |   |  |
|  |  +---------------+   |  |
|  |  |  MenuItem 3    |   |  |
|  |  +---------------+   |  |
|  +---------------------+  |
+--------------------------+
</code></pre><ul><li><strong>背景区域</strong>（<code>background</code>）覆盖整个菜单，并且通常在 <code>contentItem</code> 之下。</li><li><strong>内容区域</strong>（<code>contentItem</code>）包含菜单项，负责布局和排列 <code>MenuItem</code>。</li></ul><h3 id=自定义-menu-的用法>自定义 <code>Menu</code> 的用法</h3><p>在自定义 <code>Menu</code> 时，你可以控制 <code>background</code> 的样式，比如设置颜色、圆角、边框等。同时，通过定义 <code>contentItem</code>，你可以完全控制菜单项的布局。例如，可以使用 <code>Column</code> 来垂直排列菜单项，也可以使用 <code>Row</code> 或 <code>Grid</code> 来创建不同的布局。</p><h3 id=总结>总结</h3><ul><li><strong><code>background</code></strong>: 负责菜单的背景样式，通常用 <code>Rectangle</code> 作为背景。</li><li><strong><code>contentItem</code></strong>: 负责菜单的内容布局，通常用 <code>Column</code> 来垂直排列菜单项。</li><li><strong><code>MenuItem</code></strong>: 菜单中的选项，通常放在 <code>contentItem</code> 中。</li></ul><p>通过理解 <code>Menu</code> 的这些属性和结构，你可以更加灵活地自定义菜单的外观和行为，以符合你的应用需求。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-49d36b1405734a6bc5756f2bf5a35d44>qml notes</h1><div class="td-byline mb-4"><time datetime=2024-08-10 class=text-body-secondary>2024年08月10日</time></div><h2 id=001-expose-propertiesproperty-alias->001. **[Expose Properties]property alias **</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>property</span> <span style=color:#000>alias</span> <span style=color:#000>$</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>EXTERNAL_SHARED_ID</span><span style=color:#000;font-weight:700>}</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>$</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>INNER_ID</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>if we have this statement in sub-qml files, the qml file who invoke current sub-qml file could access these or this component whose id is ${EXTERNAL_SHARED_ID}</p><h2 id=002-qml的模块化>002. <strong>QML的模块化</strong></h2><p>case：<strong>我要如何在子文件a.qml里面去访问子文件b.qml里面的某一个属性，例如height？</strong></p><p><code>solutionA</code>:</p><p>透过父文件进行指定，父文件在创建a和b两个对象的实例的时候，就可以指定他们的height；
至于如果要指定的还不是height这种属性，而是比较难访问的属性，怎么办呢？就得看看其他办法。</p><p><code>solutionB</code>:
用信号槽的方式
这种方式是qt的原生自带的技术</p><p><code>solutionC</code>:
用property
在 QML 中，你可以在子文件（例如 Background.qml 和 Buttons.qml）中定义 property，用来暴露组件的某些属性，如 height，以便在父组件中访问这些属性。</p><h2 id=003-debug-qtguiimageio-libpng-warning-iccp-known-incorrect-srgb-profile>003. Debug: qt.gui.imageio: libpng warning: iCCP: known incorrect sRGB profile</h2><p><a href="https://bbs.archlinux.org/viewtopic.php?pid=1269845#p1269845" target=_blank rel=noopener>Post about the reason of this warning</a></p><pre tabindex=0><code>It&#39;s because libpng 1.6 does more checking of the pngs, and one or more of the png files used has an old sRGB profile. 
It&#39;s supposed to just be a warning, are you sure this is what&#39;s causing the build failure? 

If so, you may need to replace the sRGB profile yourself or get upstream to do it.
</code></pre><h2 id=004-取整怎么做>004. 取整怎么做？</h2><p>在 QML 中，你可以使用 Math.floor()、Math.ceil() 或 Math.round() 函数来对带小数的数值进行取整操作：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>    Math.floor(value): 返回不大于 value 的最大整数，即向下取整。
</span></span><span style=display:flex><span>    Math.ceil(value): 返回不小于 value 的最小整数，即向上取整。
</span></span><span style=display:flex><span>    Math.round(value): 返回四舍五入后的整数。
</span></span></code></pre></div><h2 id=005-要点>005. 要点</h2><p>函数不能以大写字母开头</p><h2 id=006-startsystemmove的逻辑><strong>006. startSystemMove()的逻辑</strong></h2><p><a href=https://doc.qt.io/qt-6/qwindow.html#startSystemMove target=_blank rel=noopener>startSystemMove</a> is designed to send a system signal to the entrance of window moving model</p><p>what gpt4o said:</p><pre tabindex=0><code>startSystemMove 是一个在某些框架或平台中使用的函数，通常用于启动窗口的移动操作。这个函数的具体实现和行为可能会因平台或框架的不同而有所差异。以下是一个典型的解释和行为描述，通常适用于 Windows 平台和基于 Qt 框架的环境：
startSystemMove 函数的详细解析

startSystemMove 通常是用来处理用户拖动窗口的情况。当用户按下鼠标左键并拖动窗口的非客户区（例如标题栏）时，系统会自动启动窗口的移动操作。startSystemMove 函数一般用于在自定义标题栏或无边框窗口中模拟这种行为。
</code></pre><h3 id=problem><strong>problem</strong></h3><p>when i clicked left button of my mouse, the code will trigger <em><strong>vp_window_id.startSystemMove()</strong></em> for supporting window`s moving function.</p><p>so i wrote it like below</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>onPressed</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SingletonModule</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IfOnlyMouseLeftButtonPressed</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>titleMouseArea</span><span style=color:#000;font-weight:700>)){</span>
</span></span><span style=display:flex><span>        <span style=color:#000>vp_window_id</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>startSystemMove</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span><span style=color:#204a87;font-weight:700>else</span> <span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SingletonModule</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IfOnlyMouseRightButtonPressed</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>titleMouseArea</span><span style=color:#000;font-weight:700>)){</span>
</span></span><span style=display:flex><span>        <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;right&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>but now met the problem:
when i clicked the left button of the mouse, and did not move the mouse (no position changed), the <em><strong>startSystemMove</strong></em> had been sent anyway. and now the <em><strong>titleMouseArea.pressedButtons</strong></em> always keep <em><strong>Qt.LeftButton</strong></em> actually equals <em><strong>1</strong></em>.Even i release the left button of my mouse quickly, the state did not change.
so now when i clicked left button, nothing happened.
when i clicked right button, illegal value of <em><strong>titleMouseArea.pressedButtons</strong></em> came with <em><strong>3</strong></em>, it is illegal actually like the pic below, it also means left button plus right button together.
<img src=/2024/August/16/QtMouseButtons.png alt=QtMouseButtons></p><h3 id=solution><strong>solution</strong></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>onPressed</span><span style=color:#ce5c00;font-weight:700>:</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>MouseArea</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>titleMouseArea</span>
</span></span><span style=display:flex><span>    <span style=color:#000>anchors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fill</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>parent</span>
</span></span><span style=display:flex><span>    <span style=color:#000>acceptedButtons</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>Qt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>LeftButton</span> <span style=color:#ce5c00;font-weight:700>|</span> <span style=color:#000>Qt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RightButton</span>
</span></span><span style=display:flex><span>    <span style=color:#000>preventStealing</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>    
</span></span><span style=display:flex><span>    <span style=color:#000>pressAndHoldInterval</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>property</span> <span style=color:#000>bool</span> <span style=color:#000>isDragging</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span>    <span style=color:#000>onPressed</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SingletonModule</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IfOnlyMouseLeftButtonPressed</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>titleMouseArea</span><span style=color:#000;font-weight:700>)){</span>
</span></span><span style=display:flex><span>            <span style=color:#000>isDragging</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span><span style=color:#204a87;font-weight:700>else</span> <span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SingletonModule</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IfOnlyMouseRightButtonPressed</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>titleMouseArea</span><span style=color:#000;font-weight:700>)){</span>
</span></span><span style=display:flex><span>            <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;right&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;\n&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>onPositionChanged</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;x=&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>mouse</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>x</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>&#34;y=&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>mouse</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>y</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>isDragging</span><span style=color:#000;font-weight:700>){</span>
</span></span><span style=display:flex><span>            <span style=color:#000>vp_window_id</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>startSystemMove</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>            <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;position changed: left&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>onReleased</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>isDragging</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span>        <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Button released. Current pressedButtons:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>titleMouseArea</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pressedButtons</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>the solution is a logic control that when i click left button, onPressed set the flag variable <em><strong>TRUE</strong></em>, and if i do not move the cursor away, the onRelease slot will set the flag variable to <em><strong>FALSE</strong></em>.
Until i click and at the same time move the cursor away(position changed), the <em><strong>onPositionChanged</strong></em> slot will send <em><strong>vp_window_id.startSystemMove()</strong></em> out to the system.</p><h3 id=conclusion><strong>conclusion</strong></h3><p>actually higher level language is boring because of that they could not control the low layer system at some times.
and personaly customize the titlebar of a window is such a heave job.</p><h2 id=007-mouseareamousexy-vs-container_><strong>007. MouseArea.mouseX(y) VS ${Container_ID}.x(y)</strong></h2><p>i have a sub module</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Controls</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>SingletonForVolumeMixer</span> <span style=color:#0000cf;font-weight:700>1.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Menu</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>bID_Private_contextualMenu</span>
</span></span><span style=display:flex><span>    <span style=color:#000>MenuItem</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>text</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>qsTr</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;最小化&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>onTriggered</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// 实现最小化逻辑
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>MenuItem</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>text</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>qsTr</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;最大化&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>onTriggered</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// 实现最大化逻辑
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>MenuItem</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>text</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>qsTr</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;关闭&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>onTriggered</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// 实现关闭逻辑
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>and when i try to instantiate this module as container of my main.qml
error method:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#000>CustomizedMenu</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>rightkeyMenu</span>
</span></span><span style=display:flex><span>        <span style=color:#000>x</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>MouseArea</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>mouseX</span>
</span></span><span style=display:flex><span>        <span style=color:#000>y</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>MouseArea</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>mouseY</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>onPressed</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>            
</span></span><span style=display:flex><span>                <span style=color:#000>rightkeyMenu</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>open</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>have a warning:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>qrc:/qt/qml/content/Title/xxx.qml:50:9: Unable to assign [undefined] to double
</span></span><span style=display:flex><span>qrc:/qt/qml/content/Title/xxx.qml:49:9: Unable to assign [undefined] to double
</span></span></code></pre></div><p>correct method:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#000>CustomizedMenu</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>rightkeyMenu</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// x: MouseArea.mouseX
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#8f5902;font-style:italic>// y: MouseArea.mouseY
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>onPressed</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>            
</span></span><span style=display:flex><span>        <span style=color:#000>rightkeyMenu</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>mouse</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>X</span>                
</span></span><span style=display:flex><span>        <span style=color:#000>rightkeyMenu</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>y</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>mouse</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>y</span>
</span></span><span style=display:flex><span>        <span style=color:#000>rightkeyMenu</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>open</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>why-from GPT4o:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>你遇到的问题主要与QML中的**属性绑定机制**以及**组件生命周期**有关。当你在`Menu`容器中直接尝试绑定 `x: mouseArea.mouseX` 和 `y: mouseArea.mouseY` 时，可能会遇到以下问题：
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>### 1. **属性未初始化**
</span></span><span style=display:flex><span>`mouseArea.mouseX` 和 `mouseArea.mouseY` 这类属性在`MouseArea`中表示相对坐标，但它们在某些情况下可能未初始化，特别是在组件刚刚加载时。这可能导致`Menu`组件在初始化时尝试访问这些属性，而它们尚未定义，导致出现`undefined`错误。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>### 2. **组件加载顺序**
</span></span><span style=display:flex><span>QML中，属性的绑定通常在组件加载和初始化时执行。如果在`Menu`的定义中试图直接访问这些属性，而`MouseArea`还没有触发任何事件，属性值可能未被设置。因此，在菜单加载时，这些属性可能仍然是`undefined`，这会导致无法将`undefined`分配给`Menu`的`x`或`y`属性。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>### 3. **绑定的时机**
</span></span><span style=display:flex><span>在 `Menu` 容器中直接绑定 `x: mouseArea.mouseX` 和 `y: mouseArea.mouseY` 是静态绑定，在QML的生命周期内，可能不会动态更新。只有当 `MouseArea` 触发点击事件时，`mouse.x` 和 `mouse.y` 才会有值，这意味着这些值只有在事件发生时才是有效的。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>### 为什么`mouse.x` 和 `mouse.y` 方式有效？
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>通过在 `MouseArea` 的 `onClicked` 处理器中动态设置 `Menu` 的 `x` 和 `y` 属性，你确保了在鼠标点击事件发生时，这些值是最新的、有效的。因为点击事件发生后，鼠标的坐标已经被正确捕获并可以使用，所以这种方式不会遇到属性未定义的问题。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>### 总结
</span></span><span style=display:flex><span>直接在`Menu`容器中绑定鼠标坐标可能会遇到初始化顺序和属性绑定的时机问题。而在`MouseArea`的点击事件中动态设置`Menu`的坐标确保了这些坐标是在事件发生后获取的，因此是有效的。这是两种方法表现不同的主要原因。
</span></span></code></pre></div><h2 id=008-属性property-vs-容器container>008: 属性property vs 容器container</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>属性（Property）：
</span></span><span style=display:flex><span>    属性在 QML 中是一种定义对象或元素特征的方式。属性可以是简单的值（如 color、width、height），也可以是更复杂的对象（如 Item、Rectangle）。
</span></span><span style=display:flex><span>    当属性持有复杂对象时，这些对象可以被视为容器，因为它们可以包含其他元素，并通过大括号 {} 来定义。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>容器（Container）：
</span></span><span style=display:flex><span>    容器通常是指那些能够包含其他 QML 元素的对象。例如，Rectangle、Item、Column 都是典型的容器元素，因为它们可以在大括号 {} 内定义其他元素。
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-f496d77e14cb6b42d6c47eb2588f6967>QML Options</h1><div class="td-byline mb-4"><time datetime=2024-08-02 class=text-body-secondary>2024年08月02日</time></div><p>理解你的需求，以下是 QML 中顶层容器的不同类型，以及它们适用于哪些场景：</p><h1 id=顶层容器类型><strong>顶层容器类型</strong></h1><pre tabindex=0><code>ApplicationWindow
    用途：适用于创建应用程序的主窗口，带有内置的菜单栏和状态栏。
    导入模块：QtQuick.Controls

Window
    用途：用于创建没有内置菜单栏和状态栏的窗口。可以手动添加所需的控件。
    导入模块：QtQuick.Window

Dialog
    用途：用于创建对话框窗口，通常用于提示用户进行某些操作或输入信息。
    导入模块：QtQuick.Controls

Popup
    用途：用于创建弹出窗口，可以用于上下文菜单、工具提示等。
    导入模块：QtQuick.Controls

Item
    用途：最基本的可视化对象容器，不创建窗口，但可以作为其他元素的父容器。
    导入模块：QtQuick

Rectangle
    用途：用于创建简单的矩形区域，常用于布局和装饰。
    导入模块：QtQuick

Application
    用途：通常作为 QML 应用程序的根对象，管理整个应用程序的生命周期。
    导入模块：QtQuick
</code></pre><p>示例代码</p><p>以下是每个顶层容器的简单示例：</p><h4 id=1-applicationwindow><code>1. ApplicationWindow</code></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Controls</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>ApplicationWindow</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>visible</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>800</span>
</span></span><span style=display:flex><span>    <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>600</span>
</span></span><span style=display:flex><span>    <span style=color:#000>title</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ApplicationWindow Example&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=2-window><code>2. Window</code></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Window</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Window</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>visible</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>800</span>
</span></span><span style=display:flex><span>    <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>600</span>
</span></span><span style=display:flex><span>    <span style=color:#000>title</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Window Example&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=3-dialog><code>3. Dialog</code></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Controls</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Dialog</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>visible</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>400</span>
</span></span><span style=display:flex><span>    <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>300</span>
</span></span><span style=display:flex><span>    <span style=color:#000>title</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Dialog Example&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>standardButtons</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>Dialog</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Ok</span> <span style=color:#ce5c00;font-weight:700>|</span> <span style=color:#000>Dialog</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Cancel</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=4-popup><code>4. Popup</code></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Controls</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Popup</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>visible</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>200</span>
</span></span><span style=display:flex><span>    <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Text</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>anchors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>centerIn</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>parent</span>
</span></span><span style=display:flex><span>        <span style=color:#000>text</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Popup Example&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=5-item><code>5. Item</code></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Item</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>800</span>
</span></span><span style=display:flex><span>    <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>600</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Rectangle</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>        <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>        <span style=color:#000>color</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;blue&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=6-rectangle><code>6. Rectangle</code></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Rectangle</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>800</span>
</span></span><span style=display:flex><span>    <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>600</span>
</span></span><span style=display:flex><span>    <span style=color:#000>color</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;lightgray&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Text</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>anchors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>centerIn</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>parent</span>
</span></span><span style=display:flex><span>        <span style=color:#000>text</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Rectangle Example&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=7-application><code>7. Application</code></h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>QtQuick</span> <span style=color:#0000cf;font-weight:700>6.2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Application</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>app</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Item</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>800</span>
</span></span><span style=display:flex><span>        <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>600</span>
</span></span><span style=display:flex><span>        <span style=color:#000>Rectangle</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>            <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>            <span style=color:#000>color</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;blue&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=顶层容器结构>顶层容器结构</h4><p>顶层容器的结构通常如下：</p><pre><code>Application 或 ApplicationWindow 或 Window 或 Dialog 或 Popup
    子元素：Item, Rectangle, Text, Button, ListView 等各种 UI 元素
</code></pre><h4 id=示例>示例：</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>ApplicationWindow</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>visible</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>800</span>
</span></span><span style=display:flex><span>    <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>600</span>
</span></span><span style=display:flex><span>    <span style=color:#000>title</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;App Structure Example&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>Rectangle</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>parent</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>width</span>
</span></span><span style=display:flex><span>        <span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>parent</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>height</span>
</span></span><span style=display:flex><span>        <span style=color:#000>color</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;lightgray&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>Text</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>anchors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>centerIn</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>parent</span>
</span></span><span style=display:flex><span>            <span style=color:#000>text</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Hello, World!&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>这些顶层容器类型及其结构可以根据具体需求选择和使用，从而满足不同类型的应用程序设计需求。</p><h1 id=关键字property><strong>关键字：Property</strong></h1><p>让我们深入探讨一下 QML 中 <code>property</code> 的作用、外部访问的机制，以及如何决定属性是否暴露给外部。</p><h3 id=1-qml-中的属性访问机制>1. <strong>QML 中的属性访问机制</strong></h3><h4 id=内置属性如><strong>内置属性（如 <code>height</code>、<code>width</code> 等）</strong></h4><ul><li><p><strong>内置属性</strong>：QML 中的某些属性，如 <code>height</code>、<code>width</code>、<code>color</code> 等，是组件自带的内置属性，这些属性默认是对外暴露的。因此，父组件可以直接访问和设置这些属性。</p></li><li><p><strong>访问方式</strong>：这些内置属性在定义组件时自动提供，可以直接通过组件的 <code>id</code> 在外部访问，例如：</p></li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-qml data-lang=qml><span style=display:flex><span><span style=color:#000>Rectangle</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>id: rect</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>width:</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>height:</span> <span style=color:#0000cf;font-weight:700>50</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Item</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>width:</span> <span style=color:#000>rect</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>width</span>  <span style=color:#8f5902;font-style:italic>// 直接访问 rect 的 width 属性
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=2-property>2. <strong><code>property</code> 的作用</strong></h3><h4 id=定义自定义属性><strong>定义自定义属性</strong></h4><ul><li><strong>扩展属性</strong>：通过 <code>property</code>，你可以定义组件的自定义属性，这些属性不是组件的内置属性。<code>property</code> 使得这些自定义属性能够被外部访问和修改。例如，你可能会定义一个 <code>property</code> 来跟踪某个状态：</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-qml data-lang=qml><span style=display:flex><span><span style=color:#000>Rectangle</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>id: rect</span>
</span></span><span style=display:flex><span>    <span style=color:#000>property</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#204a87;font-weight:700>myCustomHeight:</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Item</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>width:</span> <span style=color:#000>rect</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>myCustomHeight</span>  <span style=color:#8f5902;font-style:italic>// 访问自定义的 myCustomHeight 属性
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=绑定和初始值><strong>绑定和初始值</strong></h4><ul><li><strong>属性绑定</strong>：<code>property</code> 可以与其他属性或表达式绑定，这使得属性之间能够自动更新。例如：</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-qml data-lang=qml><span style=display:flex><span><span style=color:#000>Rectangle</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>id: rect</span>
</span></span><span style=display:flex><span>    <span style=color:#000>property</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#204a87;font-weight:700>myCustomHeight:</span> <span style=color:#000>width</span> <span style=color:#ce5c00;font-weight:700>/</span> <span style=color:#0000cf;font-weight:700>2</span>  <span style=color:#8f5902;font-style:italic>// myCustomHeight 随着 width 的变化而变化
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>width:</span> <span style=color:#0000cf;font-weight:700>200</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=暴露内部状态><strong>暴露内部状态</strong></h4><ul><li><strong>状态管理</strong>：你可以通过 <code>property</code> 把组件的内部状态暴露给外部，从而实现更好的封装和模块化设计。例如，定义一个 <code>property</code> 来暴露内部的计算结果：</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-qml data-lang=qml><span style=display:flex><span><span style=color:#000>Rectangle</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>id: rect</span>
</span></span><span style=display:flex><span>    <span style=color:#000>property</span> <span style=color:#000>real</span> <span style=color:#204a87;font-weight:700>area:</span> <span style=color:#000>width</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>height</span>  <span style=color:#8f5902;font-style:italic>// 暴露矩形的面积
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=3-内部变量与>3. <strong>内部变量与 <code>property</code> 的区别</strong></h3><ul><li><p><strong>局部变量</strong>：如果你只需要在组件内部使用某个值或状态，通常不会使用 <code>property</code>，而是使用局部变量或 JavaScript 变量。局部变量不会暴露给外部，也不会通过 <code>id</code> 访问到。</p><ul><li><strong>局部变量示例</strong>：<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-qml data-lang=qml><span style=display:flex><span><span style=color:#000>Rectangle</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>id: rect</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>width:</span> <span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>height:</span> <span style=color:#0000cf;font-weight:700>50</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>internalValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>200</span>  <span style=color:#8f5902;font-style:italic>// 只在这个组件内部可见的变量
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div></li></ul></li><li><p><strong><code>property</code> 的作用</strong>：<code>property</code> 主要用于定义和管理组件的外部可见状态或配置。通过 <code>property</code>，你可以把组件的某些内部状态暴露出来，供父组件或外部组件访问。</p></li></ul><h3 id=4-总结>4. <strong>总结：<code>property</code> 的功能与外部访问</strong></h3><ul><li><p><strong>外部访问</strong>：内置属性（如 <code>height</code>、<code>width</code>）默认是暴露给外部的，而通过 <code>property</code> 定义的属性也会暴露给外部。没有 <code>property</code> 修饰的局部变量则不会被外部访问到。</p></li><li><p><strong><code>property</code> 的用途</strong>：<code>property</code> 主要用于定义组件的自定义属性、管理属性绑定、或暴露内部状态给外部。<code>property</code> 还允许你为自定义属性设置初始值，并支持动态绑定。</p></li><li><p><strong>局部变量 vs <code>property</code></strong>：如果你不希望某个状态或值被外部访问，且只需要在组件内部使用，那么应使用局部变量或 JavaScript 变量，而不是 <code>property</code>。<code>property</code> 用于那些需要外部访问和管理的属性。</p></li></ul><p>通过理解这些概念，你可以更好地设计和组织 QML 代码，确保组件之间的低耦合性和良好的封装性。</p><h2 id=003singleton-单例对象>003.<strong>Singleton 单例对象</strong></h2><h3 id=使用场景><strong>使用场景</strong></h3><ol><li><p>可以是要在外部动态的设置某一个程序的属性，让整个程序的其他组件都因此做出改变，可以用singleton</p><p><a href=https://juejin.cn/post/6959740008240513037 target=_blank rel=noopener>QML Styling 及 Singleton 使用方法浅谈 - 掘金</a></p></li><li><p>希望精简，模块不要反复被创建</p></li></ol><h3 id=必要步骤在相应的qml文件的顶行写pragma-singleton><strong>【必要步骤】在相应的qml文件的顶行写pragma Singleton</strong></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>pragma</span> <span style=color:#000>Singleton</span>
</span></span></code></pre></div><p><code>注意这条语句要写在import 语句之前</code></p><h3 id=必要步骤需要在相应的cmakelisttxt里设置qt_><strong>【必要步骤】需要在相应的CMakeList.txt里设置QT_QML_SINGLETON_TYPE 为TRUE</strong></h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>set_source_files_properties</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>First_Color_Scheme</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>qml</span> <span style=color:#000>PROPERTIES</span>
</span></span><span style=display:flex><span>    <span style=color:#000>QT_QML_SINGLETON_TYPE</span> <span style=color:#000>TRUE</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><ul><li><p>在哪一个CMakeList.txt呢？</p><p>我的qml文件处在项目根目录下的一个叫content的文件夹中</p><p>这个文件夹是专门存放所有qml文件的</p><p>在content下有一个CMakeList.txt</p><p>（不要放到项目根目录下的CMakeList.txt里面-因为放进去也没用）</p></li><li><p>设置完会怎么样，请看build之后的目录下：</p><p>build\6_5_3_MSVC2019_x64-Debug\qml\content\qmldir</p><p><img src=https://prod-files-secure.s3.us-west-2.amazonaws.com/391b1061-106d-444f-a6c6-c6affaddda76/0516fb73-40ac-4ee0-bc2c-1fbf9ce55b9b/Untitled.png alt=Untitled></p></li><li><p>设置技巧</p><p>本语句的位置不能低于qt6_add_qml_module（或qt_add_qml_module）</p><p><img src=https://prod-files-secure.s3.us-west-2.amazonaws.com/391b1061-106d-444f-a6c6-c6affaddda76/bf1470a6-0401-44a7-b7f5-350f9312960d/Untitled.png alt=Untitled></p></li></ul><h3 id=必要步骤需要在相应的cmakelisttxt里创建单例模块singleton-module独立于其他qml模块><strong>【必要步骤】需要在相应的CMakeList.txt里创建单例模块Singleton Module（独立于其他QML模块）</strong></h3><ul><li>CMakeLists.txt的相关代码</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>qt6_add_qml_module</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>singleton</span>
</span></span><span style=display:flex><span>    <span style=color:#000>URI</span> <span style=color:#4e9a06>&#34;singleton&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>VERSION</span> <span style=color:#0000cf;font-weight:700>1.0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>QML_FILES</span>
</span></span><span style=display:flex><span>        <span style=color:#000>Color</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>First_Color_Scheme</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>qml</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p><code>这里的URI很重要，最后我们要调用的地方，都需要import，而import后面的模块名称就是看URI的。</code></p><h4 id=为什么一定要再这里创建单例模块呢><strong>为什么一定要再这里创建单例模块呢？</strong></h4><p>按照微软的文档：</p><p><img src=/2024/August/10/singleton.png alt=singleton.png></p><p>我们就是需要去把它做成一个模块的</p><h3 id=必要步骤调用singleton-object单例对象的办法><strong>【必要步骤】调用singleton object（单例对象）的办法</strong></h3><ul><li><p>不能用的办法1：创建它</p><ul><li><p>代码</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>Second_TitleBar</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>bID_Instance_Module_TitleBar</span>
</span></span><span style=display:flex><span>    <span style=color:#000>anchors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>top</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>parent</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>top</span>
</span></span><span style=display:flex><span>    <span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>parent</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>width</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div></li><li><p>例如这种方法，就是去创建一个单例对象，这样会提示错误</p><p><img src=https://prod-files-secure.s3.us-west-2.amazonaws.com/391b1061-106d-444f-a6c6-c6affaddda76/7cf70678-01e2-4d1d-a8c7-462045ac5e56/Untitled.png alt=Untitled></p></li><li><p>错误信息</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>11:00:01: Starting C:\Code\ASCtl\PL\QtProj\build\6_5_3_MSVC2019_x64-Debug\ASCtl_UIApp.exe...
</span></span><span style=display:flex><span>DLL_PROCESS_ATTACH: The DLL has been attached to the process at 00007FF902D40000
</span></span><span style=display:flex><span>QML debugging is enabled. Only use this in a safe environment.
</span></span><span style=display:flex><span>Ext_CreateAudioControl called.
</span></span><span style=display:flex><span>ASCtl_Impl constructor called.
</span></span><span style=display:flex><span>QQmlApplicationEngine failed to load component
</span></span><span style=display:flex><span>qrc:/qt/qml/Main/main.qml:7:1: Type App unavailable
</span></span><span style=display:flex><span>qrc:/qt/qml/content/App.qml:54:1: Type VolumeMixer unavailable
</span></span><span style=display:flex><span>qrc:/qt/qml/content/VolumeMixer.qml:20:5: Composite Singleton Type Second_TitleBar is not creatable.
</span></span><span style=display:flex><span>DLL_PROCESS_DETACH: The DLL has been detached from the process at 00007FF902D40000
</span></span><span style=display:flex><span>11:00:01: C:\Code\ASCtl\PL\QtProj\build\6_5_3_MSVC2019_x64-Debug\ASCtl_UIApp.exe exited with code -1
</span></span></code></pre></div></li></ul></li><li><p>可能可以用的办法：把某个要作为单例的qml封装成一个module</p><p>具体是在content/CMakeList.txt下，用qt6_add_qml_module去新建一个模块</p><p>然后去import这个模块，例如import titlebar 1.0 / import controlpanel 1.0这样</p><p>不过这个办法我也没有尝试过。</p></li><li><p>需要注意：调用时要加入<code>Component.onCompleted: {</code></p><p>已经在多处都看见这种做法了</p><p><a href="https://qt.0voice.com/?id=5269" target=_blank rel=noopener>QML中如何实现一个单例-QT开发中文网</a></p><p>可能谈到调用就是异步的。</p></li></ul><h3 id=相关的帖子><strong>相关的帖子</strong></h3><p><a href=https://doc.qt.io/qt-6/qml-singleton.html target=_blank rel=noopener>Singletons in QML | Qt QML 6.7.2</a></p><p><a href=https://forum.qt.io/topic/129738/singleton-qml-failed-to-load-as-module/2 target=_blank rel=noopener>Singleton QML failed to load as module</a></p><p><a href=http://imaginativethinking.ca/make-qml-component-singleton/ target=_blank rel=noopener>How to make a QML Component a Singleton?</a></p><p><a href=https://blog.csdn.net/HyEISN/article/details/130600566 target=_blank rel=noopener>Qt 创建 单例/Singleton qml 文件_pragma singleton-CSDN博客</a></p><h2 id=004-qml中的signal--slot>004. QML中的signal & slot</h2><p>要点：</p><ul><li>1.信号要在本qml文件中的<code>顶层容器</code>中进行定义
就算触发信号的位置是在本qml文件中嵌套的component里面，也都要在顶层容器中进行定义</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>rectangle</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>...</span>
</span></span><span style=display:flex><span>    <span style=color:#000>signal</span> <span style=color:#000>Sig_Name_XXX</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>...</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><ul><li>2.信号的使用必须加圆括号()，可以不必加分号；，否则会发不出去</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>signal</span> <span style=color:#000>Sig_Name_XXX</span><span style=color:#000;font-weight:700>()</span>
</span></span></code></pre></div><ul><li>3.信号的传递必须一层一层的传上去（若你是一层一层的封装好模块的话）
因为信号的接受者只能识别被它创建的那一个对象里面信号</li></ul><h2 id=container-image>container: Image</h2><p>Property:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000>sourceSize</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>width</span><span style=color:#ce5c00;font-weight:700>:</span> 
</span></span><span style=display:flex><span><span style=color:#000>sourceSize</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>height</span><span style=color:#ce5c00;font-weight:700>:</span> 
</span></span></code></pre></div><p>this property was used for recapture the source and made a new image internally.
if image.width & image.height are illegal value(e.g,. 0), the sourceSize will have the original size of this picture.</p><h2 id=005-enum-qtwindowtype--flags-qtwindowflags><strong>005. enum Qt::WindowType & flags Qt::WindowFlags</strong></h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// flags: Qt.Window | Qt.CustomizeWindowHint
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// flags: Qt.Window | Qt.FramelessWindowHint | Qt.WindowMinimizeButtonHint | Qt.WindowMaximizeButtonHint
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>//设置无框的窗口
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>flags</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>Qt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Window</span> <span style=color:#ce5c00;font-weight:700>|</span> <span style=color:#000>Qt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FramelessWindowHint</span> 
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// flags: Qt.Window | Qt.CustomizeWindowHint | Qt.WindowTitleHint
</span></span></span></code></pre></div><p><a href=https://doc.qt.io/qt-6/qt.html#WindowType-enum target=_blank rel=noopener>enum Qt::WindowType
flags Qt::WindowFlags</a></p><p>它的逻辑是首先判断是什么窗口类型，可选项有</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cxx data-lang=cxx><span style=display:flex><span><span style=color:#0000cf;font-weight:700>1.</span> <span style=color:#000>Widget</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>2.</span> <span style=color:#000>Window</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>3.</span> <span style=color:#000>Dialog</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>4.</span> <span style=color:#000>Sheet</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>5.</span> <span style=color:#000>Drawer</span> <span style=color:#8f5902;font-style:italic>//outdated
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#0000cf;font-weight:700>6.</span> <span style=color:#000>Popup</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>7.</span> <span style=color:#000>Tool</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>8.</span> <span style=color:#000>ToolTip</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>9.</span> <span style=color:#000>SplashScreen</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>10.</span> <span style=color:#000>SubWindow</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>11.</span> <span style=color:#000>ForeignWindow</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>12.</span> <span style=color:#000>CoverWindow</span>
</span></span></code></pre></div><p>所以这12种是所有的<code>窗口类型</code></p><p>选择完我要的窗口Window，之后，我就可以进一步选择<code>窗口标志</code></p><pre tabindex=0><code>FramelessWindowHint
CustomizeWindowHint
</code></pre><p>当然flag可是不止这两种，但是目前我就主要用到了这两种，所以其他的以后再补充啦哈哈</p><p>第一种就是无边框的窗体</p><p>第二种就是自定义的窗体</p><p>第二种接下来还有许多options是配合它出现的，也就是说，CustomizeWindowHint只是一个开关</p></div><div class=td-content style=page-break-before:always><h1 id=pg-6d64a40926b8626398b8b59604338f3a>QML工程里的content文件夹</h1><div class="td-byline mb-4"><time datetime=2024-08-02 class=text-body-secondary>2024年08月02日</time></div><h2 id=introduction><strong>Introduction</strong></h2><p>content文件夹里面管理着qml的模块，这样的模块可以有多个。 我这里的content文件夹，名字本身可以是其他的名字。有没有什么字符限制，这个暂时还不知道。</p><h2 id=入口><strong>入口</strong></h2><p>在根目录下的main.qml</p><p>/* This file is generated and only relevant for integrating the project into a Qt 6 and cmake based
C++ project. */</p><p>import QtQuick
import content</p><p>App {</p><p>}</p><h2 id=content-结构><strong>content 结构</strong></h2><p>根目录下有一个CMakeList.txt</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#8f5902;font-style:italic>### This file is automatically generated by Qt Design Studio.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>### Do not change
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87>qt_add_library</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>content</span> <span style=color:#4e9a06>STATIC</span><span style=color:#000;font-weight:700>)</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87>qt6_add_qml_module</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>content</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>URI</span> <span style=color:#4e9a06>&#34;content&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>VERSION</span> <span style=color:#4e9a06>1.0</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>RESOURCE_PREFIX</span> <span style=color:#4e9a06>&#34;/qt/qml&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>QML_FILES</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>App.qml</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>Screen01.ui.qml</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>RESOURCES</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>fonts/fonts.txt</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>QML_FILES</span> <span style=color:#4e9a06>volume_mixer/a.qml</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>QML_FILES</span> <span style=color:#4e9a06>volume_mixer/b.qml</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>QML_FILES</span> <span style=color:#4e9a06>volume_mixer/c.qml</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>QML_FILES</span> <span style=color:#4e9a06>volume_mixer/d.qml</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=references><strong>References</strong></h2><p><a href=https://doc.qt.io/qt-6/qtqml-writing-a-module.html target=_blank rel=noopener>1. 介绍QML的Extra_Module</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-f02d194b13b1a2d2656235da09824efc>Q_PROPERTY</h1><div class="td-byline mb-4"><time datetime=2024-08-19 class=text-body-secondary>2024年08月19日</time></div><h2 id=q_><strong>Q_PROPERTY 的详细解释</strong></h2><p>Q_PROPERTY 是 Qt 的元对象系统的一部分，它用于在 Qt 的元对象系统中注册属性，使得这些属性可以被 QML 和其他 Qt 的特性（如信号与槽机制）访问。它的作用包括：</p><pre><code>属性的声明和管理：通过 Q_PROPERTY 声明的属性可以在 Qt 的元对象系统中被识别和管理，使得它们可以在 QML 中访问和绑定。

提供 getter 和 setter：Q_PROPERTY 允许你指定一个属性的 getter 和 setter 方法，这些方法用于访问和修改属性值。

通知属性变化：Q_PROPERTY 允许你定义一个变化通知信号，这样当属性的值发生变化时，可以发出信号通知 QML 或其他对象。

支持绑定：在 QML 中，你可以绑定 UI 元素的属性到 C++ 类的属性，Q_PROPERTY 支持这种绑定机制，使得 UI 可以自动更新。
</code></pre><h3 id=q_property-的基本语法如下>Q_PROPERTY 的基本语法如下：</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Q_PROPERTY</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>type</span> <span style=color:#000>name</span> <span style=color:#000>READ</span> <span style=color:#000>getter</span> <span style=color:#000>WRITE</span> <span style=color:#000>setter</span> <span style=color:#000>NOTIFY</span> <span style=color:#000>signal</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><pre tabindex=0><code>type：属性的数据类型。
name：属性的名称。
READ getter：指定一个 getter 方法来获取属性值。
WRITE setter：指定一个 setter 方法来设置属性值。
    可以加const；
    必须是在public 作用限定符修饰下；
    不能是指针或引用，必须是可以复制的值；

NOTIFY signal：指定一个信号，当属性值发生变化时发出此信号。
</code></pre><h3></h3></div><div class=td-content style=page-break-before:always><h1 id=pg-c9394ea69451a3716d73cb761bd5ae03>Qt Deployment</h1><div class="td-byline mb-4"><time datetime=2024-08-15 class=text-body-secondary>2024年08月15日</time></div><p>要完成Qt项目的部署，你可以按照以下步骤使用<code>windeployqt</code>工具：</p><h3 id=1-准备可执行文件>1. 准备可执行文件</h3><p>确保你已经生成了应用程序的可执行文件（如<code>.exe</code>文件），通常在<code>release</code>目录下。</p><h3 id=2-运行windeployqt>2. 运行<code>windeployqt</code></h3><p>打开命令行，导航到包含可执行文件的目录，然后运行以下命令：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>windeployqt your_application.exe
</span></span></code></pre></div><p>此命令会自动扫描你的应用程序，并将所有必要的Qt库和插件复制到可执行文件所在的目录中。</p><h3 id=3-检查依赖项>3. 检查依赖项</h3><p>运行<code>windeployqt</code>后，检查输出目录中是否包含了所有必需的文件，包括Qt的DLL文件、插件、以及可能的配置文件。
windeployqt会去把相关的依赖项都copy到exe当前的目录下
但问题是，似乎有时候并不整全，我们需要在一个没安装qt sdk的机器上去运行这个deploy过的程序，它会一步一步的提醒缺少了xxx.dll。
我们只要拷贝缺少的dll到项目文件夹下，即可。</p><h3 id=4-测试部署包>4. 测试部署包</h3><p>在另一台没有安装Qt的Windows机器上测试你的应用程序，确保它能够正常运行。这是验证所有依赖项是否正确打包的关键步骤。</p><h3 id=5-打包和分发>5. 打包和分发</h3><p>将输出目录打包成安装程序（如使用Inno Setup）或压缩文件，然后分发给用户。</p><h3 id=可能的扩展>可能的扩展</h3><p>如果你的应用程序有额外的依赖项，比如特定的字体、资源文件或动态链接库（DLL），需要手动添加到部署包中。</p><p>这样，你就可以完成Qt应用程序的基本部署。如果过程中遇到问题或需要更多细节，可以参考<a href=https://doc.qt.io/Qt-5/windows-deployment.html target=_blank rel=noopener>官方文档</a>或向我求助。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-1dc8f6e4d54fbeeab427031d937c73c8>014_Grp_CPU</h1><div class="td-byline mb-4"><time datetime=2024-08-30 class=text-body-secondary>2024年08月30日</time></div></div><div class=td-content><h1 id=pg-41ae5e79d72cfcb320d4e419c371c607>014_01_SOC</h1><div class="td-byline mb-4"><time datetime=2024-08-30 class=text-body-secondary>2024年08月30日</time></div></div><div class=td-content><h1 id=pg-99ce29909ab99f60c365dc239abd0dd5>Chroma Subsampling是什么</h1><div class="td-byline mb-4"><time datetime=2024-08-30 class=text-body-secondary>2024年08月30日</time></div><p><a href=https://www.sohu.com/a/699595331_121466058 target=_blank rel=noopener>色度采样是什么？</a></p><h2 id=1-422-命名的含义>1. 4:2:2 命名的含义</h2><p>在 4:2:2 这种颜色子采样格式中，每个数字都有特定的含义：</p><pre><code>4：表示在一个采样区间内（通常是 4 个像素的水平线），亮度信息（Y）是每个像素采样一次，即逐像素采样。
2：表示在同一个采样区间内，色度信息（Cb 和 Cr）每 2 个像素采样一次，即水平方向上色度的采样频率减半。
2：同样表示在水平方向上，第二个色度通道（通常是 Cr）也以同样的频率（每 2 个像素采样一次）进行采样。
</code></pre><p>颜色子采样（Chroma Subsampling）通过减少色度信息的采样率来降低视频数据量。以下是常见的四种颜色子采样方法，以及每种方法中每多少个像素进行一次色度采样的解释：</p><hr><h3 id=1-444>1. <strong>4:4:4</strong></h3><ul><li><strong>亮度（Y）</strong>：每个像素采样一次。</li><li><strong>色度（Cb 和 Cr）</strong>：每个像素采样一次。</li></ul><p><strong>子采样说明</strong>：</p><ul><li>每个像素都有独立的亮度和色度信息。</li><li><strong>每 1 个像素采样一次</strong>色度信息。</li><li>无子采样，全分辨率，最高质量。</li></ul><h3 id=2-422>2. <strong>4:2:2</strong></h3><ul><li><strong>亮度（Y）</strong>：每个像素采样一次。</li><li><strong>色度（Cb 和 Cr）</strong>：每两个像素共享一个色度信息（水平方向）。</li></ul><p><strong>子采样说明</strong>：</p><ul><li>水平方向上每 2 个像素共享一组色度信息，垂直方向上每个像素都有独立的亮度信息。</li><li><strong>每 2 个像素采样一次</strong>色度信息（水平方向）。</li><li>水平色度分辨率减半，但垂直方向保持不变。</li></ul><h3 id=3-420>3. <strong>4:2:0</strong></h3><ul><li><strong>亮度（Y）</strong>：每个像素采样一次。</li><li><strong>色度（Cb 和 Cr）</strong>：每 2x2 像素块共享一组色度信息。</li></ul><p><strong>子采样说明</strong>：</p><ul><li>水平方向和垂直方向上每 2x2 像素块共享一组色度信息。</li><li><strong>每 4 个像素采样一次</strong>色度信息。</li><li>水平和垂直色度分辨率都减半。</li></ul><h3 id=4-411>4. <strong>4:1:1</strong></h3><ul><li><strong>亮度（Y）</strong>：每个像素采样一次。</li><li><strong>色度（Cb 和 Cr）</strong>：每 4 个像素共享一组色度信息（水平方向）。</li></ul><p><strong>子采样说明</strong>：</p><ul><li>水平方向上每 4 个像素共享一组色度信息，垂直方向上每个像素都有独立的亮度信息。</li><li><strong>每 4 个像素采样一次</strong>色度信息（水平方向）。</li><li>水平色度分辨率降低为亮度分辨率的四分之一，垂直方向不变。</li></ul><h3 id=总结>总结</h3><ul><li><strong>4:4:4</strong>：每 1 个像素采样一次色度信息。</li><li><strong>4:2:2</strong>：每 2 个像素采样一次色度信息。</li><li><strong>4:2:0</strong>：每 4 个像素采样一次色度信息。</li><li><strong>4:1:1</strong>：每 4 个像素采样一次色度信息（仅在水平方向）。</li></ul><p>这些子采样方法通过减少色度信息的采样频率来减少视频数据量，但会导致色度分辨率的降低。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ead88d652c7ae301b2ee35ca429a106d>HDR的标准</h1><div class="td-byline mb-4"><time datetime=2024-08-30 class=text-body-secondary>2024年08月30日</time></div><p>HDR（High Dynamic Range，高动态范围）是一种影像技术，用于提升图像的对比度和色彩范围，使得明亮部分更亮、暗部更暗，从而呈现出更丰富的细节和更接近人眼视觉体验的画面。HDR技术可以应用于视频、照片等多种领域，常见的HDR标准有多种类型，每种类型都有其特定的应用场景和技术特点。</p><p>以下是几种常见的HDR类型：</p><table><thead><tr><th>序号</th><th>HDR类型</th><th>简介</th><th>技术特点</th><th>应用场景</th></tr></thead><tbody><tr><td>1</td><td>HDR10</td><td>最常见、最广泛支持的HDR格式之一，开放标准，无需支付许可费用。</td><td>- 色深：10-bit<br>- 动态范围：最高1000尼特<br>- 元数据：静态元数据，SMPTE ST 2086标准定义。</td><td>4K UHD Blu-ray、流媒体服务（Netflix、Amazon Prime Video）、支持HDR10的电视和显示器。</td></tr><tr><td>2</td><td>HDR10+</td><td>在HDR10基础上发展，由三星、亚马逊和松下合作开发。</td><td>- 色深：10-bit<br>- 动态范围：最高4000尼特<br>- 元数据：动态元数据，场景或帧调整。</td><td>高端电视、流媒体服务等。</td></tr><tr><td>3</td><td>Dolby Vision</td><td>杜比实验室开发，高级HDR格式，需要支付许可费用。</td><td>- 色深：12-bit<br>- 动态范围：最高10000尼特<br>- 元数据：动态元数据，逐帧调整。</td><td>高端电视、4K UHD Blu-ray、流媒体服务（Netflix、Disney+）等。</td></tr><tr><td>4</td><td>HLG</td><td>BBC和NHK开发，主要用于直播电视。</td><td>- 色深：10-bit或12-bit<br>- 动态范围：适合实时广播<br>- 元数据：无，与传统SDR兼容。</td><td>广播电视、现场体育赛事等。</td></tr><tr><td>5</td><td>Advanced HDR by Technicolor</td><td>Technicolor开发，旨在提供高质量视频内容。</td><td>包含SL-HDR1、SL-HDR2等技术，适用于不同应用场景。</td><td>广播、流媒体和电影制作。</td></tr></tbody></table><h3 id=1-hdr10>1. <strong>HDR10</strong></h3><ul><li><strong>简介</strong>：HDR10是目前最常见、最广泛支持的HDR格式之一。它是一个开放的标准，不需要支付许可费用。</li><li><strong>技术特点</strong>：<ul><li><strong>色深</strong>：10-bit（即每种颜色有1024级），支持超过10亿种颜色。</li><li><strong>动态范围</strong>：支持最高1000尼特（nits）的亮度。</li><li><strong>元数据</strong>：使用静态元数据，即整个视频内容只使用一组HDR信息，元数据通过SMPTE ST 2086标准定义。</li></ul></li><li><strong>应用</strong>：广泛应用于4K UHD Blu-ray、流媒体服务（如Netflix、Amazon Prime Video）和支持HDR10的电视和显示器。</li></ul><h3 id=2-hdr10>2. <strong>HDR10+</strong></h3><ul><li><strong>简介</strong>：HDR10+是在HDR10基础上发展而来的格式，由三星、亚马逊和松下合作开发。</li><li><strong>技术特点</strong>：<ul><li><strong>色深</strong>：10-bit。</li><li><strong>动态范围</strong>：支持最高4000尼特的亮度。</li><li><strong>元数据</strong>：使用动态元数据，可以根据场景或帧来调整HDR信息，从而提供更精确的亮度和对比度控制。</li></ul></li><li><strong>应用</strong>：主要应用于高端电视、流媒体服务等。</li></ul><h3 id=3-dolby-vision>3. <strong>Dolby Vision</strong></h3><ul><li><strong>简介</strong>：Dolby Vision是由杜比实验室开发的一种高级HDR格式，具有出色的性能，但使用该格式需要支付许可费用。</li><li><strong>技术特点</strong>：<ul><li><strong>色深</strong>：12-bit（即每种颜色有4096级），支持更丰富的颜色。</li><li><strong>动态范围</strong>：支持最高10000尼特的亮度。</li><li><strong>元数据</strong>：使用动态元数据，提供逐帧的HDR信息调整。</li></ul></li><li><strong>应用</strong>：广泛用于高端电视、4K UHD Blu-ray、流媒体服务（如Netflix、Disney+）等。</li></ul><h3 id=4-hlghybrid-log-gamma>4. <strong>HLG（Hybrid Log-Gamma）</strong></h3><ul><li><strong>简介</strong>：HLG是一种由BBC和NHK共同开发的HDR标准，主要用于直播电视。</li><li><strong>技术特点</strong>：<ul><li><strong>色深</strong>：10-bit或12-bit。</li><li><strong>动态范围</strong>：支持高亮度范围，适合实时广播。</li><li><strong>元数据</strong>：不使用元数据，与传统的标准动态范围（SDR）兼容，适合过渡性应用。</li></ul></li><li><strong>应用</strong>：主要用于广播电视、现场体育赛事等。</li></ul><h3 id=5-advanced-hdr-by-technicolor>5. <strong>Advanced HDR by Technicolor</strong></h3><ul><li><strong>简介</strong>：由Technicolor开发的HDR标准，旨在提供高质量的视频内容。</li><li><strong>技术特点</strong>：包含多种技术，如SL-HDR1、SL-HDR2，分别适用于不同的应用场景和内容格式。</li><li><strong>应用</strong>：主要用于广播、流媒体和电影制作。</li></ul><h3 id=总结>总结</h3><p>HDR10是当前最常见的HDR格式，具有良好的兼容性和广泛的应用范围。尽管HDR10使用的是静态元数据，但它提供的色彩和对比度增强已经能显著提升视觉体验。随着技术的发展，HDR10+和Dolby Vision等动态元数据格式提供了更高的性能和更加精细的画质控制。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-1fded1403e2e2c59e1b7c946eada291f>音视频设备数据流分析</h1><div class="td-byline mb-4"><time datetime=2024-08-29 class=text-body-secondary>2024年08月29日</time></div><h1 id=关键节点介绍>关键节点介绍</h1><h3 id=input>Input:</h3><pre><code>HDMI/SDI Camera or PC Desktop Captured Video
</code></pre><h3 id=output>Output:</h3><pre><code>HDMI/SDI Monitor or PC Display
</code></pre><h3 id=主控芯片mpu>主控芯片：MPU</h3><pre><code>Rockchip RK3568 
NXP i.MX8M Plus
</code></pre><h3 id=encode-ip-module>Encode IP Module</h3><pre tabindex=0><code>FPGA(Field Programable Gate Array)
ASIC(Application-Specific Integrated Circuit)
    Standalone Encode Chip
</code></pre><h3 id=decode-ip-module>Decode IP Module</h3><pre tabindex=0><code>ASIC
    Standalone Decode Chip
</code></pre><hr><h1 id=宏观层面的数据流走向把mpu看做一个黑盒blackbox><strong>宏观层面的数据流走向</strong>（把MPU看做一个黑盒Blackbox）：</h1><p>Input直接进入MPU，MPU将进来的数据进行编码，然后放进内存中</p><p>从软件层面看，早期的Framebuffer方式显示，是开辟一块内存区，将编码后的数据进行解码，解码后的数据拷贝到特定的内存区中，
相应的显示设备上就有了内存区域中的相关显示内容了。</p><p>其实，这里还有非常重要的核心问题：</p><pre tabindex=0><code>为什么需要进行编码？
</code></pre><p>如果没有编码，就不需要解码，直接发到内存里，既显示速度快，又便宜。省去了编解码器，肯定有一定的成本下降。
这个的确很重要，坦白说，我也没有系统的去研究过，所以为了聚焦本文的重点，也为了有尽可能权威的回答，我另外开一篇来说。</p><p>本文主要是介绍宏观微观视角下的数据流走向。
而接下来，我们就要进入微观层面了</p><h1 id=微观层面的数据流走向进入mpu内部><strong>微观层面的数据流走向（进入MPU内部）</strong></h1><h2 id=simple-scene><strong>Simple Scene</strong></h2><p><img src=/2024/August/29/rk3568_block_diagram.png alt="alt text"></p><p><code>这里，特别看红色圈住的区域。</code></p><p>这里面至少有GPU/Decoder/Encoder等7个模块，站在Soc(System On Chip)片上系统的角度来看，他们都是独立的<code>IP核心（Intellectual Property）</code></p><p>IP的中文叫知识产权（至于这里为什么叫这么一个名字，是因为每一个IP都是设计好的，能够直接被拿来使用的，因此命名为知识产权。并非中文世界所认为的是一种无形资产而已）。</p><p>关于IP所处的整个产业链的位置，我借鉴了抖音号(<code>ICshow</code>)，名为（<code>芯片工程师阿伟「芯片设计服务」</code>）的图。因为我认为，要了解一个新的术语，需要放在整个立体的产业结构中去看，这样最容易准确抓住它的定义，即便短期内没法下准定义，但是起码朦胧的认识已经有了。
图如下
<img src=/2024/August/29/chip_industry_structure.jpg alt="alt text"></p><p>也就是说MPU要对外实现编解码功能、图形渲染等图形处理单元的功能，是靠内部的IP来提供。</p><p>MPU内部的IP Cores之间倚靠总线（总线的详细知识点后期我会进一步补充）进行连接。</p><p>从ASIC的英文全称来看，它的定义是特殊应用的集成电路。因此，它最大的特点是：一旦制造出来，它的结构是不可以重新设计或调整的。正因为这样，我们可以把MPU当成一个大的ASIC。（RISC-V的特殊性，可扩展指令，在此，我们先把它剔除在该分类之外）</p><p>在MPU这个ASIC里面，有众多的IP Cores。当Input有数据接入MPU，会先进行简单的图像处理（模拟信号转换成数字信号等）。然后送到VPU这个IP里面，VPU内部又有编码器和解码器以及缓存，可以对输入进来的信号进行编码，从RGB这样的显示格式转换成H.264这样的数字格式。</p><p>编码后，会经过高速数据总线（AXI）传输到内存里。（因为高清HD甚至超高清UHD的视频传输，经过总线和内存，因此，<code>内存的带宽</code>和<code>总线的带宽</code>是重要的参数，是否会成为瓶颈，这里必须要关注。）</p><p>之后，若需要显示在mpu的hdmi output interface上，还需要将已经编码的数据再次解码成为RGB或YUV这样的图像数据。
也可以将编码后的数据透过ethernet或usb等interface发出去。</p><h2 id=complex-scene><strong>Complex Scene</strong></h2><p>在一个更复杂的场景下，例如同时有16路camera接入mpu，这个时候，vpu本身的编码能力再强大，也无法进行实时的编码了。
这个时候，就要考虑使用外接的编码器了。</p><p>例如，使用某一些为16路（或者更多路数）的信号接入进行并行计算的ASIC，这些ASIC可以以低功耗、低延迟的效果进行加速的计算，进而取代mpu原先内置的vpu。
或者还有第二种办法，就是用可编程逻辑门阵列，就是FPGA。它能够灵活的设计电路结构，为某一种算法适配其加速功能。不足之处是功耗大，而且功能较多，有文章说：FPGA是通用可编辑的芯片，冗余功能比较多。不管你怎么设计，都会多出来一些部件。
详细的关于FPGA和ASIC的对比，请看Reference的文章<code>1.到底什么是ASIC和FPGA?</code></p><h2 id=总结><strong>总结</strong></h2><p>从内部来看MPU，是必须的，这样才能深刻去查看研究data sheet里面的block diagram到底想要表达什么，有多少module。
从SOC的角度看IP core，看总线，看ASIC，看FPGA，进而看GPU，NPU， CPU，似乎它是一条线，把这些零散的概念，串起来了。
感谢上帝。</p><hr><h1 id=references><strong>References</strong></h1><p><a href=https://xueqiu.com/7282046183/273570315 target=_blank rel=noopener>1.到底什么是ASIC和FPGA?</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-891a71f383854433046ce745fa980c6a>开发板选择</h1><div class="td-byline mb-4"><time datetime=2024-08-02 class=text-body-secondary>2024年08月02日</time></div><h3 id=迅为>迅为</h3><h3 id=正点原子>正点原子</h3><p><a href=https://www.eet-china.com/mp/a127282.html target=_blank rel=noopener>https://www.eet-china.com/mp/a127282.html</a></p><h3 id=野火>野火</h3><h3 id=友善之臂>友善之臂</h3><h3 id=全志科技>全志科技</h3></div><div class=td-content style=page-break-before:always><h1 id=pg-1b59f38bcee538bb840786f0e0b1e39b>微博</h1><div class="td-byline mb-4"><time datetime=2024-08-13 class=text-body-secondary>2024年08月13日</time></div><h2 id=2024-08-15-1427>2024-08-15 14:27</h2><p>学习好，成绩好，守规矩，就应该rule the world
不要被猪给糟蹋了
论一个胡乱管理的管理者，因为自己的懒惰或无能或懒惰+无能，导致正常的审美和是非都有了不合时宜的恶心。</p><h2 id=2024-08-14-083220>2024-08-14 08:32:20</h2><p>弄不清楚特权和人权的区别</p><p>加上权利崇拜，对有权利的个体所做的事情，无底线的接纳，包括压迫自我尊严，甚至认为这就是是社会，这就是情商高</p><p>而对没有权利的个体，包括弱势群体，总是说“我认识许多有权利的人，公司的老板是我同乡”，你不敢对我呲牙叫嚣，面对面相遇，你必须先朝我点头，甚至哈腰，我回之以充满“自信”的冷冰冰的热情，是给足你面子</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f80954648540c39c42e8f6226a5b186d>基本的是非观</h1><div class="td-byline mb-4"><time datetime=2024-08-02 class=text-body-secondary>2024年08月02日</time></div><p>今早看到姜文的电影《邪不压正》的一个自媒体影评 里面提到一句话： 李天然对他的养父亨德勒说：“车让人不是应当的吗？” 亨德勒大夫对李天然说：“这里是北平！”</p><p>影评说：车不让人意味着没有人权。</p><p>这句话深深刺痛着我的心。</p><p>以色列和哈马斯的战火延烧</p><p>哈马斯为何能够占据加沙，说来话长 得说到一个和平计划，当时因着这个和平计划，以色列将加沙整块让出来。 后来哈马斯在那里，竟然通过民选的方式上台，成为执政党 整个加沙开始了它的恐怖组织的培养皿的命运</p><p>现在，哈马斯和巴勒斯坦地区的其他派别签署了《bj宣言》 国内具有压倒性数量优势的报道关于以色列如何坚持战争，它的联合国代表如何在联合国会议上辱骂其他国家的代表，为了要灭掉哈马斯。 国内一段时间坚持无条件停火</p><p>乌克兰和俄罗斯的战火 不断报道，乌克兰有百分之n的民众厌战，愿意土地换和平。 言下之意，乌克兰人的正当防卫已经不得民心，早该继续无条件停火了。</p><p>三件事都在历史中不断重演，一个没有人权的地方，真相一定是被反复鞭尸的， 其次，妖魔鬼怪的言论充斥主流环境，没有任何保护弱势的力量存在，就势必剩下屠戮者，威胁着每一个弱势，不管弱势占理还是不占理，大棒都是挥舞着向着孤儿寡母。</p><p>这是上帝厌恶的。 教会里，可能还有一帮人在呼喊着，世界没有希望了，我们要复兴教会，言下之意是，世界完蛋了，我们想救也救不了，复兴教会吧，因为我们是神职人员，复兴之后，我们抱团取暖也更有势力。 一个不呼求上帝的公义和慈爱覆庇着现世，改变神儿女所在的世界的神学，当真是不带人入矛盾体都不行。 越爱神似乎就要越恨这个世界，越爱神越想要直接回天家，仿佛世间一切看淡。</p><p>求主拯救我们的世界。change the world。可以透过我！In IX`s Name, Amen</p></div><div class=td-content style=page-break-before:always><h1 id=pg-834c791e06ef257b7fb3f137a85265fa>2024年高考余悸</h1><div class="td-byline mb-4"><time datetime=2024-07-24 class=text-body-secondary>2024年07月24日</time></div><p>人到中年，选择权是自己最后的一点体面</p><p>人大博士举报自己的老师</p><p>我觉得自己有一点的（恶）习惯，就是相信事情不会（这么快）临到自己。</p><p>博士举报自己的导师，遇到的这种痛苦，是她所求甚多，我不求这么多，所以我不会被潜规则。</p><p>可是等人到中年，如果希望继续秉持着这种只要事不关己的态度，那真的到最后可能会发现，很难要小孩，甚至结婚都觉得自己失去了“事不关己的自由”</p><p>从社会学、人类学去看这种个体与群体的关系，都很容易知道现在的情况是病态</p><p>本该青春洋溢，杀伐果断（因为没有踩过坑、吃过屎）的年纪，却被迫的要放下一切追求，仿佛六旬老者，看淡人生。</p><p>从根儿上来看，不就是我们要相信这一切都不会发生在我们身上吗？ 我们可以去报班、上课、心理安慰、辅导、就为了要让我们“不要焦虑”</p><p>就因为环境不容得我们怒目圆瞪，只要对视一眼，就是一个大耳光，就因为这样，就要选择安慰自己，不会的，环境不会打我的，只要我安分。</p><p>最好的年纪，当做最远的打算，一名最优秀的船员，难以想象是从小就一直相信自己不要下海就不会翻船，自己技术不佳，宁可不出海，也不要葬身大海的人。</p><p>我们究竟是怎么一步一步走到今天的，想起来就觉得又简单又云山雾绕，好像怎么也想不明白。</p><p>也真就只有耶稣基督，祂为众人死了，使人都可以因祂活着，才能唤起人内心的斗志。 从这个角度来看，祂的心意、祂的style、祂的plan才特别重要，所以基督教并不是一个倚靠信徒修行的信仰团体，乃是因为与耶稣发生了关系，而且自己知道已经与祂有关。</p><p>耶稣要我们传福音到普天下去，要我们作见证，但环境却随时逼着我们，其实你什么都不能做。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4db5c654bfa7c7a2725075dea74ef688>Roe v. Wade</h1><div class="td-byline mb-4"><time datetime=2024-06-10 class=text-body-secondary>2024年06月10日</time></div><h3 id=罗诉韦德案>罗诉韦德案</h3><p><strong>罗诉韦德案</strong>
（英语：Roe v. Wade），是一起美国联邦最高法院最高法院案例。</p><p>真名Norma McCorvey，化名：Jane Roe简罗提起。</p><p>1969年，Roe罗怀上了第三胎，但她不想要这个孩子。罗住在德克萨斯州，该州的法律规定只有在孕妇的生命受到威胁时才允许堕胎。</p><p>Roe向美国联邦法院起诉当地的地方检察官亨利·韦德（英语：Henry Wade），并指控德克萨斯州的堕胎法违反美国宪法。</p><p>德州的地方法院作出了有利于Roe罗的判决，判决德州的堕胎法违反美国宪法，随后，德州的相关团体将该案件上诉到美国联邦最高法院。</p><p>1973年，最高法院9名大法官以7:2的票数，大比例通过判决，依据美国宪法第14修正案中“正当法律程序”为女性提供了基本的隐私权，而女性的堕胎权是受到宪法保护的。</p><p>正当法律程序（due process 或 due process of law）为一个重要的法律原则，其主要源自于英美法系的国家，其内容为，政府必须要尊重任何依据国内法赋予给人民的法律上之权利，而非仅尊重其中一部分或大部分的权利。</p><p>2022年6月24日，最高法院在多布斯诉杰克逊妇女健康组织案中，以5比4的表决正式推翻了罗诉韦德案的判决。</p><h3 id=司法复审制度judicial-review赋予了联邦最高法院的权利>司法复审制度（judicial review）赋予了联邦最高法院的权利</h3><p>1⃣️解释联邦宪法，</p><p>2⃣️审查联邦和州法律以及</p><p>3⃣️审查立法和行政机构的行为是否符合联邦宪法。</p><p>直接目的：</p><p>抑制民主中的激进力量，避免多数人的暴政，他本来有助于缓和社会改革中的激进力量，使国家在一个稳定的状态中发展。但是，二战后的半个世纪，司法复审却成了自由派和激进派所主导的社会民主化进程的重要推动力量。成为他们有效改革的利器。</p><h3 id=1973年罗诉韦德案件>1973年罗诉韦德案件：</h3><p>最高法院判决：妇女在怀孕的前三个月享有不受州政府干预的堕胎宪法权利。</p><h3 id=1992年计划生育联合会诉凯西案件>1992年计划生育联合会诉凯西案件：</h3><p>堕胎权被包涵在宪法第14修正案的隐私权里面。</p><p>宪法的第14修正案中，其原意并不包含任何与堕胎相关的信息。</p><h3 id=1992年计划生育联合会诉凯西案是美国堕胎斗争历史上的第二件大案>1992年“计划生育联合会诉凯西案”是美国堕胎斗争历史上的第二件大案。</h3><p>该案再度确认女性堕胎权，并且以胎儿存活能力为标准，取消了罗案中确立的妊娠期框架，<strong>进一步放宽女性脱胎的时间限制</strong>。最高法院裁定，**在胎儿具备母体外存活前（通常怀孕24周前），孕妇享有堕胎权。**不过如果科学技术发展，胎儿母体外存活时间提前，则享有脱胎权时间也随之缩短。</p><h3 id=2000年美国童子军诉戴尔>2000年美国童子军诉戴尔：</h3><p>5:4宣布：人们有从事同性恋行为的宪法权利。</p><p>美国童军诉戴尔案（英语：Boy Scouts of America et al. v. Dale），530 U.S. 640 (2000)，是美国最高法院在2000年6月28日的里程碑案件，法院裁定美国童军（BSA）这种私人团体有宪法提供的结社自由权，当“该人的存在以一种显著的方式，影响该团体倡导公共或私人观点的能力”时，得以排除其会籍[1]。以五对四的票数，最高法院判决同性恋不得入会的立场是美国童军“表达的讯息”，而同性恋作为成人领袖将干扰该讯息[2]。该案推翻了纽泽西州最高法院（英语：New Jersey Supreme Court）的判决，其判定纽泽西州的公共场合法（英语：public accommodations law）规定美国童军须重新接纳被组织驱逐出去的公开同性恋童军团长詹姆斯·戴尔（英语：James Dale (activist)）。</p><p>尽管，美国宪法对同性恋性行为完全没有提及。</p><p>美国的建国者和宪法的签署者是否曾经打算让最高法院来决定什么是适当的性行为，什么又不是呢？</p><p>美国的立法精神与古以色列遥相呼应，古以色列人全都俯伏在一份文件之下，就是上帝的律法。</p><p>美国的建国者认为，国家的最高权力根本不是什么人，而是一份文件，就是宪法。</p><p>连总统和所有行政官员都必须俯在宪法之下。</p><p><del>不仅仅是克制了君主和独裁者的发挥，还克制了人民主权的滥用。有对苏格拉底所遭遇的多数人暴政的天然警觉性。</del></p><p>大卫是以色列最伟大的君王，在他治理之下，以色列盛极一时。然而大卫晚年因为贪恋部下的妻子而酿成大错。先知拿单当面谴责大卫，宣告上帝的审判。这让我们看见，即便是圣经中最伟大的王，也不能凌驾于上帝的律法之上。最终统治国家的是上帝的律法，而不是王。</p><p>使用自身的标准而非外在的法律来行使审判权。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-525fbcdeb51c74d87dae039c9ecd68f3>关于堕胎</h1><div class="td-byline mb-4"><time datetime=2024-06-10 class=text-body-secondary>2024年06月10日</time></div><h3 id=堕胎>堕胎</h3><p><strong>堕胎的定义</strong>
堕胎，这个词，在所所在的中国大陆的社会层面上，我个人认为的一般性理解是：在孩子尚未出母腹，终止孩子的生命。</p><h3 id=被挤占的空间>被挤占的空间</h3><p>孩子的成形，就已经开始挤占大人的空间。
母亲最开始可能有的妊娠反应，呕吐，食欲不振
父亲为了照顾状态时时变化中的母亲，需要不断把注意力分散到母亲和孩子身上。</p><p>中期，可能会有身材的改变，体力的改变，衣服变得无法适用，需要全新的。体力也不如之前好，大着肚子要做家务和工作都是困难重重。
父亲将需要在这段时期，带着对母亲的心疼，走过相对感情上不用受到太多冲击的时期。因为前期和晚期都是巨大的变化，父亲需要接受小家伙的被发现以及小家伙的诞生。
说“当父亲不就是这样吗？”那是父亲完全能够应付当下的状况，若是当下状况已经不容易，那么父亲还要面对家庭开支方面的考量，增加工作时间和强度等。</p><p>后期，母亲辗转难眠，手脚可能肿胀甚至变形。
父亲也需要随时准备好照顾母亲的身体和心理需要。</p><p>出生后，更是不得了，叽叽呱呱的，喝奶、换尿布、防止跌落、扶着走路、早起不睡、晚上也不甘心入睡、入睡一半醒来哭闹喝奶去客厅转转
空间没被挤占吗？那不可能的。
我的同事每天轻轻松松，想去哪里就去哪里，随时考虑人生的其他大计划（换城市、出国、升学、考公等）</p><h3 id=不乐意的礼物>不乐意的礼物</h3><p>被挤占空间这回事，很可能是神给大人成长的必经之路。
大人已经很习惯于“我就是牛马，绝不让资本家继续奴役我的孩子，所以我不生了，也不结婚，一分钱都别想赚”
其实，这是不认识神的思考。</p><p>孩子的一生受到父母的干预其实是越来越少的，就算到结婚生子还干预的，也都陷入巨大的家庭冲突和婚姻矛盾里。
孩子的一生需要学习去荣耀神。
当牛马，也不代表这个所谓的“资本家”在决定孩子的人生。</p><p>为何父母如此担心孩子当牛马，因为父母自己就挣脱不出来，并且父母认为自己的孩子同样挣脱不出来。
正是这种对未来的无力感，见证了父母对神是不认识的。</p><p>多少个王朝的更替，多少强势君王的兴起和没落，但神的掌权却超越时间。
神带领在埃及做牛马的以色列人离开埃及</p><p>未完</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=X aria-label=X><a target=_blank rel=noopener href=https://x.com/potter_whi3340 aria-label=X><i class="fab fa-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Hugging Face" aria-label="Hugging Face"><a target=_blank rel=noopener href=https://huggingface.co/PotterWhite aria-label="Hugging Face"><i class="fab fa-robot"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/potterwhite aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href=https://zadoktec.slack.com aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2024&ndash;2025
<span class=td-footer__authors>Potter White | <a href=https://creativecommons.org/licenses/by/4.0 target=_blank rel=noopener>CC BY 4.0</a> |</span></span><span class=td-footer__all_rights_reserved>保留所有权利</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>隐私政策</a></span></div></div></div></footer></div><script src=/js/main.min.c7cf76e0360e19b696291ec124be8f05e7d46230f8031e081350143806af8320.js integrity="sha256-x8924DYOGbaWKR7BJL6PBefUYjD4Ax4IE1AUOAavgyA=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/tabpane-persist.js></script></body></html>