<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>011_Grp_Windows on 嵌入式系统爱好者</title>
    <link>https://potterwhite.github.io/blog/011_windows_development/</link>
    <description>Recent content in 011_Grp_Windows on 嵌入式系统爱好者</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 10 Oct 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://potterwhite.github.io/blog/011_windows_development/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>IMMNotificationClient Callback Problem</title>
      <link>https://potterwhite.github.io/blog/2024/10/10/immnotificationclient-callback-problem/</link>
      <pubDate>Thu, 10 Oct 2024 00:00:00 +0000</pubDate>
      <guid>https://potterwhite.github.io/blog/2024/10/10/immnotificationclient-callback-problem/</guid>
      <description>&lt;!-- &lt;iframe src=&#34;https://potterwhite.github.io/2024/October/IMNotificationClient_Callback.svg&#34; width=&#34;1900&#34; height=&#34;5000&#34; style=&#34;border:none; overflow:scroll; background: #333333;&#34;&gt;&lt;/iframe&gt; --&gt;&#xD;&#xA;&lt;p&gt;&lt;a href=&#34;https://mermaid.live/edit#pako:eNqVVm1T2lgU_ivZfHTQIYhgcdoZi6i03fq225ltcDIBAmQbEhZuutaXGbS-gFCx6jpWq67bWt3uFnWcWsUXfsxyE_jkX9iTBFlEd9mSGYbce85znjz3nCeMkD7Jz5EOMiBIP_tCbBQR33V4RAI-MdkbjLKREKFsTJbiv-KZc-WX_fYBJxKYngiKeUQP0q77tLuJcEY5FnFEmIm0y35eckoiikoCcZdwDSHG2KzeuDxbw4k1fJrrbn-EDybU1Um8d1I82BrUQLXa94nGxnuEk3YDdoyJuMUYYkUfB4AoxMcuz9Kl9TdKfFxJzOPXKzizUprJFPLr-NMKPl_EyVe9OurB6U1gpw7cAcCAzAduMP7mLiHKghBB0TYCJ94ry59qKCore3j-g8FeKz-7WcHu0LBHH48SXdT1pR9GCRftftJUW63xniaPW-QRM8AhxiX6eyVeRMxjCfEB3sciXhIZJysIXtb3TNdsHe-kcHoZOIEGxeyFep4txVfVzW2N39pGcf-lcUyF45yhhCHCNbX0gBjjeg5VBQnFKnUHEIvkmDPEikHO_1d8oqFBOdxVJjPqxAmllcu_KRx_vAmF9w9AFKBUOJ7rfVTMrxW30kCqkN_SSE1t48w7QGhoqOjk0s-gkwZBivkNZW4bQnHmC15IKzvnl2er__SYw-Ed4IO3E-yMSmEoSgBUdUKdx6qQ6NRJdNFPoA-Y7yN-6NCrBLcYkNqUZArP7hbnvuDM8tVGDB4IuCrjexWYLop2CwIXZAWCG-JReZ0T_cYMtdOVMyutHCnZz4N62X-bKC3l9j2DrYVWPyXxxZS69Wfh9KiQS8H3oJHWZdFDuunqPZx5rS5tXp4lChcp_GFCO8T4ofI2p2QW4GAuz5Ll5G49101reirv4srnFE7sX4N36xEP9AjoMnVpF3oDT6dr-o6oL7-G9kBHe0hXH1zdjiRutl7xtz-U5A70Wxn3oY5bF6nG3_5HvGF1HuSiaMMVqkzJcITS-ob6e844_3KbU1d-MEzdXNY8wUJ7JfAcFI4wUSSCufV9yyG2x_sj50MOBy8-l55xsBKSqhjcdpWRcWYCNIFRXa1iZyK-ItcCuXUnzmTI998fA68Z8PrgUfpkTub84HoiPBmY2ldAWDUIpr2_i9C0MhF8rAzD-duqDMpSMahq2QxrgjdDcW9czeXV3RTOJvHUrm5Mh6WlrLL4qnD-FryucLKpnWP2pTI7W3HOsuMn48a7pcZIlfRMaSEB6ZrZ6lwN78PvJ9X56UJuWrfQ6o4YpmhwhlqPqN_4WlP30H2IKE_1xUd1bs8oQ9RKW56EHj2pl67vn4b5wiSBWeD9yXJ-r57fR9ejBo5dGUXDF8oAfTpAP_1TB-eVg0TxYhHP5NTZI5AP3tfghxUj1aL79eintMuQRyRNZJiLhlneD39NRrQYD4lCXJjzkA746ecCrCwgD-kRxyCUlZE08EL0kQ4UlTkTGZXkYIh0BFghBneybu4dPAvTHq6sRljxqSSFr1LglnSMkEOkw9baZG9pvUO12m0Wi9lubjaRL0hHI2WzN1ntVpvdbKXMVIvN0jJmIod1BKqp2XqHslFWq91sMTe32i1jfwO60Sce&#34;&gt;&lt;img src=&#34;https://mermaid.ink/img/pako:eNqVVm1T2lgU_ivZfHTQIYhgcdoZi6i03fq225ltcDIBAmQbEhZuutaXGbS-gFCx6jpWq67bWt3uFnWcWsUXfsxyE_jkX9iTBFlEd9mSGYbce85znjz3nCeMkD7Jz5EOMiBIP_tCbBQR33V4RAI-MdkbjLKREKFsTJbiv-KZc-WX_fYBJxKYngiKeUQP0q77tLuJcEY5FnFEmIm0y35eckoiikoCcZdwDSHG2KzeuDxbw4k1fJrrbn-EDybU1Um8d1I82BrUQLXa94nGxnuEk3YDdoyJuMUYYkUfB4AoxMcuz9Kl9TdKfFxJzOPXKzizUprJFPLr-NMKPl_EyVe9OurB6U1gpw7cAcCAzAduMP7mLiHKghBB0TYCJ94ry59qKCore3j-g8FeKz-7WcHu0LBHH48SXdT1pR9GCRftftJUW63xniaPW-QRM8AhxiX6eyVeRMxjCfEB3sciXhIZJysIXtb3TNdsHe-kcHoZOIEGxeyFep4txVfVzW2N39pGcf-lcUyF45yhhCHCNbX0gBjjeg5VBQnFKnUHEIvkmDPEikHO_1d8oqFBOdxVJjPqxAmllcu_KRx_vAmF9w9AFKBUOJ7rfVTMrxW30kCqkN_SSE1t48w7QGhoqOjk0s-gkwZBivkNZW4bQnHmC15IKzvnl2er__SYw-Ed4IO3E-yMSmEoSgBUdUKdx6qQ6NRJdNFPoA-Y7yN-6NCrBLcYkNqUZArP7hbnvuDM8tVGDB4IuCrjexWYLop2CwIXZAWCG-JReZ0T_cYMtdOVMyutHCnZz4N62X-bKC3l9j2DrYVWPyXxxZS69Wfh9KiQS8H3oJHWZdFDuunqPZx5rS5tXp4lChcp_GFCO8T4ofI2p2QW4GAuz5Ll5G49101reirv4srnFE7sX4N36xEP9AjoMnVpF3oDT6dr-o6oL7-G9kBHe0hXH1zdjiRutl7xtz-U5A70Wxn3oY5bF6nG3_5HvGF1HuSiaMMVqkzJcITS-ob6e844_3KbU1d-MEzdXNY8wUJ7JfAcFI4wUSSCufV9yyG2x_sj50MOBy8-l55xsBKSqhjcdpWRcWYCNIFRXa1iZyK-ItcCuXUnzmTI998fA68Z8PrgUfpkTub84HoiPBmY2ldAWDUIpr2_i9C0MhF8rAzD-duqDMpSMahq2QxrgjdDcW9czeXV3RTOJvHUrm5Mh6WlrLL4qnD-FryucLKpnWP2pTI7W3HOsuMn48a7pcZIlfRMaSEB6ZrZ6lwN78PvJ9X56UJuWrfQ6o4YpmhwhlqPqN_4WlP30H2IKE_1xUd1bs8oQ9RKW56EHj2pl67vn4b5wiSBWeD9yXJ-r57fR9ejBo5dGUXDF8oAfTpAP_1TB-eVg0TxYhHP5NTZI5AP3tfghxUj1aL79eintMuQRyRNZJiLhlneD39NRrQYD4lCXJjzkA746ecCrCwgD-kRxyCUlZE08EL0kQ4UlTkTGZXkYIh0BFghBneybu4dPAvTHq6sRljxqSSFr1LglnSMkEOkw9baZG9pvUO12m0Wi9lubjaRL0hHI2WzN1ntVpvdbKXMVIvN0jJmIod1BKqp2XqHslFWq91sMTe32i1jfwO60Sce?type=png&#34; alt=&#34;&#34;&gt;&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>ASIO</title>
      <link>https://potterwhite.github.io/blog/2024/07/31/asio/</link>
      <pubDate>Wed, 31 Jul 2024 00:00:00 +0000</pubDate>
      <guid>https://potterwhite.github.io/blog/2024/07/31/asio/</guid>
      <description>&lt;h2 id=&#34;a-introduction&#34;&gt;&lt;strong&gt;A. Introduction&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;p&gt;其实张佩的文章已经写得很详细了，但是如果没有任何概念的时候，还是会被众多的经典概念绕晕。 所以我的方法是：先去steinberg的forum去看一些英文原版的介绍， 然后去下载asio 的sdk下来看文档，看代码，跑代码 下载cubase下来，验证asio驱动。&lt;/p&gt;&#xA;&lt;h2 id=&#34;b-concepts&#34;&gt;&lt;strong&gt;B. Concepts&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;h3 id=&#34;a-structure-各层的结构&#34;&gt;a. Structure 各层的结构&lt;/h3&gt;&#xA;&lt;h4 id=&#34;1-应用程序&#34;&gt;1.应用程序&lt;/h4&gt;&#xA;&lt;p&gt;（cubase、dorico、nuendo、wavelab等都是被明确指出需要ASIO driver的）&lt;/p&gt;&#xA;&lt;h4 id=&#34;2-操作系统-用户空间-windows&#34;&gt;2.操作系统-用户空间-windows&lt;/h4&gt;&#xA;&lt;p&gt;windows驱动&lt;/p&gt;&#xA;&lt;p&gt;Steinberg built-in ASIO Driver（win10 x64 &amp;amp; win11 only）&lt;/p&gt;&#xA;&lt;p&gt;早期是Generic Low Latency ASIO Driver&lt;/p&gt;&#xA;&lt;p&gt;第三方的ASIO4ALL- from Michael Tippach&lt;/p&gt;&#xA;&lt;h4 id=&#34;3-操作系统-内核空间-windows&#34;&gt;3.操作系统-内核空间-windows&lt;/h4&gt;&#xA;&lt;h4 id=&#34;4-硬件层&#34;&gt;4.硬件层&lt;/h4&gt;&#xA;&lt;p&gt;ASIO是需要声卡硬件支持的 其实关于这一点，暂时还没有确定的答案，硬件上做什么样特殊的处理吗？ 但是走到操作系统的内核空间层，windows内核需要为ASIO这样一个第三方的公司定制一些特殊的模块，就像Linux那样，驱动目录下有各个不同厂商单独的文件夹。 从理论上来看，当然是可能的。但是好像还没有看到ASIO有任何这方面的资料。 如果在内核空间，所有的驱动模块都是通用的，即与AC97、Realtek等声卡所调用的驱动模块是完全一致的，那么ASIO就并不需要硬件支持了。 用另一个方式来说，ASIO的特殊之处是在用户空间的驱动里，不论是WDM还是其他windows的库，ASIO推出一套标准，用不同的方法去调用内核空间给用户空间的API。 它只是在用不同的方式或逻辑调用相同的内核API，与内核通信而已。&lt;/p&gt;&#xA;&lt;h2 id=&#34;c-asio-sdk&#34;&gt;&lt;strong&gt;C. ASIO SDK&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;h3 id=&#34;a-asio-api试图提供的性能-from-asio-sdk-2-3&#34;&gt;a. ASIO API试图提供的性能(From ASIO SDK 2.3)&lt;/h3&gt;&#xA;&lt;h4 id=&#34;1-high-data-throughput&#34;&gt;&lt;code&gt;1.High data throughput&lt;/code&gt;&lt;/h4&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;PCI &#xD;&#xA;&#xD;&#xA;firewire&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;2-synchronization&#34;&gt;&lt;code&gt;2.synchronization&lt;/code&gt;&lt;/h4&gt;&#xA;&lt;h4 id=&#34;3-low-latency&#34;&gt;&lt;code&gt;3.low latency&lt;/code&gt;&lt;/h4&gt;&#xA;&lt;h4 id=&#34;4-extensibility-on-the-audio-hardware&#34;&gt;&lt;code&gt;4.extensibility on the audio hardware &lt;/code&gt;&lt;/h4&gt;&#xA;&lt;h4 id=&#34;5-no-limitation-on-the-number-of-i-o-channels&#34;&gt;&lt;code&gt;5.no limitation on the number of i/o channels &lt;/code&gt;&lt;/h4&gt;&#xA;&lt;h4 id=&#34;6-no-limitation-on-the-sample-rate&#34;&gt;&lt;code&gt;6.no limitation on the sample rate&lt;/code&gt;&lt;/h4&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;32khz&#xD;&#xA;&#xD;&#xA;96khz&#xD;&#xA;&#xD;&#xA;higher&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;7-no-limitation-on-sample-format&#34;&gt;&lt;code&gt;7.no limitation on sample format&lt;/code&gt;&lt;/h4&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;16&#xD;&#xA;&#xD;&#xA;24&#xD;&#xA;&#xD;&#xA;32 bit&#xD;&#xA;&#xD;&#xA;32/64 bit floating point formats&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;d-conclusion&#34;&gt;&lt;strong&gt;D. Conclusion&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;p&gt;今天一天，到下午四点的时候，终于用cubase试验了自己修改过的asio driver。&lt;/p&gt;</description>
    </item>
    <item>
      <title>声卡项目</title>
      <link>https://potterwhite.github.io/blog/2024/07/11/%E5%A3%B0%E5%8D%A1%E9%A1%B9%E7%9B%AE/</link>
      <pubDate>Thu, 11 Jul 2024 00:00:00 +0000</pubDate>
      <guid>https://potterwhite.github.io/blog/2024/07/11/%E5%A3%B0%E5%8D%A1%E9%A1%B9%E7%9B%AE/</guid>
      <description>&lt;!-- &lt;script type=&#34;module&#34;&gt;&#xD;&#xA;  import mermaid from &#39;https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs&#39;;&#xD;&#xA;  mermaid.initialize({ startOnLoad: true });&#xD;&#xA;&lt;/script&gt; --&gt;&#xD;&#xA;&lt;!-- ![_EnumerateAudioEndpoints](/2024/July/17/flowchart_of_EnumerateEndpoint.svg) --&gt;&#xD;&#xA;&lt;h1 id=&#34;一-介绍&#34;&gt;一、介绍&lt;/h1&gt;&#xA;&lt;p&gt;这本身是一个跨操作系统的项目，但是windows是客户群体最多的一个平台，所以主力是开发win下&lt;/p&gt;&#xA;&lt;h1 id=&#34;二-主要的函数&#34;&gt;二、主要的函数&lt;/h1&gt;&#xA;&lt;details&gt;&#xD;&#xA;    &lt;summary&gt;流程图1 _EnumerateAudioEndpoints&lt;/summary&gt;&#xD;&#xA;&lt;!-- ![_EnumerateAudioEndpoints](/2024/July/11/soundcard_flow_1.svg) --&gt;&#xD;&#xA;&lt;p&gt;this is the first operation of our process&lt;/br&gt;&#xA;A. and it start with CoCreateInstance() to create object of &lt;code&gt;IMMDeviceEnumerator&lt;/code&gt;&lt;/br&gt;&#xA;B. then if success, use &lt;code&gt;IMMDeviceEnumerator.EnumAudioEndpoint()&lt;/code&gt; to enumerate all endpoints(actually include all input &amp;amp; output devices, but API can choose i or o or both devices) in this machine.&lt;/br&gt;&#xA;C. if there exist endpoint, to check the number of endpoints with &lt;code&gt;IMMDeviceCollection.GetCount()&lt;/code&gt;.&lt;/br&gt;&#xA;D. use for loop to enum every endpoint, retrieve its data with &lt;code&gt;IMMDeviceCollection.Item()&lt;/code&gt;&lt;/br&gt;&#xA;E. finally, if retrieving process runs smoothly and there is data who came with Item() operation, push it into endpoint global data pool.&lt;/br&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
